<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
  <title>Package IP/Package XO Flow &mdash; Vitis™ Tutorials 2022.1 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../../../README.html" class="icon icon-home"> Vitis™ Tutorials
            <img src="../../../../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2022.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">日本語版</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/master/docs-jp/README.html">Master</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started Pathway</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Getting_Started/Vitis/README.html">Vitis Flow 101 Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Getting_Started/Vitis_HLS/README.html">Vitis HLS Analysis and Optimization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware Accelerators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Design_Tutorials/02-bloom/README.html">Optimizing Accelerated FPGA Applications: Bloom Filter Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Design_Tutorials/01-convolution-tutorial/README.html">Optimizing Accelerated FPGA Applications: Convolution Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Design_Tutorials/03-rtl_stream_kernel_integration/README.html">Mixed Kernels Design Tutorial with AXI Stream and Vitis</a></li>
<li class="toctree-l1"><a class="reference internal" href="README.html">Getting Started with RTL Kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-mixing-c-rtl-kernels/README.html">Mixing C++ and RTL Kernels</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Runtime and System Optimization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Runtime_and_System_Optimization/Design_Tutorials/01-host-code-opt/README.html">Host Code Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Runtime_and_System_Optimization/Design_Tutorials/02-ivas-ml/README.html">IVAS ZCU104 ML Acceleration Reference Release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Runtime_and_System_Optimization/Feature_Tutorials/01-mult-ddr-banks/README.html">Using Multiple DDR Banks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Runtime_and_System_Optimization/Feature_Tutorials/02-using-multiple-cu/README.html">Using Multiple Compute Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Runtime_and_System_Optimization/Feature_Tutorials/03-controlling-vivado-implementation/README.html">Controlling Vivado Implementation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vitis Platform Creation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Vitis_Platform_Creation/Introduction/01-Overview/README.html">Platform Creation Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Vitis_Platform_Creation/Introduction/02-Edge-AI-ZCU104/README.html">Vitis Custom Embedded Platform Creation Example on ZCU104</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/">Main</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../README.html">Vitis™ Tutorials</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../README.html" class="icon icon-home"></a> &raquo;</li>
      <li>Package IP/Package XO Flow</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/docs/Hardware_Accelerators/Feature_Tutorials/01-rtl_kernel_workflow/package_ip.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <table class="sphinxhide">
 <tr>
   <td align="center"><img src="https://www.xilinx.com/content/dam/xilinx/imgs/press/media-kits/corporate/xilinx-logo.png" width="30%"/><h1>2020.1 Vitis™ Application Acceleration Development Flow Tutorials</h1>
   <a href="https://github.com/Xilinx/Vitis-Tutorials/branches/all">See 2019.2 Vitis Application Acceleration Development Flow Tutorials</a>
   </td>
 </tr>
 <tr>
 <td>
 </td>
 </tr>
</table><div class="section" id="package-ip-package-xo-flow">
<h1>Package IP/Package XO Flow<a class="headerlink" href="#package-ip-package-xo-flow" title="Permalink to this heading">¶</a></h1>
<p>The process described in this lab follows the Package IP/Package XO flow as described in the <a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=2020.1%3Bt=vitis+doc%3Bd=devrtlkernel.html%3Ba=rzv1504034325561">RTL Kernel Development Flow</a> in the Application Acceleration Development flow of the Vitis Unified Software Platform Documentation (UG1416).</p>
<blockquote>
<div><p><strong>IMPORTANT:</strong> Before running the tutorial commands, you must set up the tool environment by running the following commands, as described in <a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=2020.1%3Bt=vitis+doc%3Bd=vhc1571429852245.html">Setting up the Vitis Environment</a> in the Application Acceleration Development flow of the Vitis Unified Software Platform Documentation (UG1416).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span> <span class="c1">#setup Xilinx Vitis tools. XILINX_VITIS and XILINX_VIVADO will be set in this step.</span>
 <span class="nb">source</span> &lt;VITIS_install_path&gt;/settings64.sh
 <span class="c1">#Setup Xilinx runtime. XILINX_XRT will be set in this step.</span>
 <span class="nb">source</span> &lt;XRT_install_path&gt;/setup.sh
</pre></div>
</div>
</div></blockquote>
<div class="section" id="create-a-new-project">
<h2>Create a New Project<a class="headerlink" href="#create-a-new-project" title="Permalink to this heading">¶</a></h2>
<ol>
<li><p>To launch the Vivado®  IDE, enter the <code class="docutils literal notranslate"><span class="pre">vivado</span></code> command in a terminal window.</p></li>
<li><p>Select <strong>Create Project</strong>, or  <strong>File</strong> &gt; <strong>Project</strong> &gt; <strong>New</strong>.</p>
<p>The New Project wizard opens.</p>
</li>
<li><p>Click <strong>Next</strong>.</p></li>
<li><p>On the Project Name page of the New Project wizard, make the following selections:</p>
<ol class="simple">
<li><p>Specify a <strong>Project name</strong>, such as <code class="docutils literal notranslate"><span class="pre">rtl_kernel</span></code>, a <strong>Project location</strong>.</p></li>
<li><p>Enable the <strong>Create project subdirectory</strong> checkbox.</p></li>
<li><p>Click <strong>Next</strong>.</p></li>
</ol>
</li>
<li><p>On the Project Type page, make the following selections:</p>
<ol class="simple">
<li><p>Select <strong>RTL Project</strong></p></li>
<li><p>Enable the <strong>Do not specify sources at this time</strong> checkbox.</p></li>
<li><p>Click <strong>Next</strong>.</p></li>
</ol>
</li>
<li><p>On the Default Part page select <strong>Boards</strong>, and enter <code class="docutils literal notranslate"><span class="pre">U200</span></code> in the Search field.</p>
<ol class="simple">
<li><p>Select <strong>Alveo U200 Data Center Accelerator Card</strong>, and click <strong>Next</strong> to proceed.</p></li>
</ol>
<p>The New Project Summary page is displayed.</p>
</li>
<li><p>Examine it for details of the project, and click <strong>Finish</strong> to create the project.</p>
<p>The Vivado IDE opens with the new project.</p>
<p><img alt="New Project Summary" src="../../../../_images/new_project_open.png" /></p>
</li>
</ol>
</div>
<div class="section" id="add-kernel-sources">
<h2>Add Kernel Sources<a class="headerlink" href="#add-kernel-sources" title="Permalink to this heading">¶</a></h2>
<p>You are ready to add RTL files into the project to package as an IP. The RTL files have been provided for you in this tutorial, but this is the point at which you would insert your own RTL code.</p>
<ol>
<li><p>In the Sources view, click the <strong>Add Sources</strong> command (<img alt="Add Sources" src="../../../../_images/icon_add_sources.png" />). The Add Sources window is displayed.</p></li>
<li><p>Click <strong>Add or create design sources</strong>, and then click <strong>Next</strong>.</p></li>
<li><p>Click <strong>Add Directories</strong>, browse to <code class="docutils literal notranslate"><span class="pre">reference-files/src</span></code>, and select the <code class="docutils literal notranslate"><span class="pre">IP</span></code> directory (which contains the RTL sources).</p>
<blockquote>
<div><p><strong>NOTE</strong>: To add your own RTL IP, specify the required folder or files.</p>
</div></blockquote>
<p><img alt="Add Design Sources" src="../../../../_images/add_rtl_sources.png" /></p>
</li>
<li><p>Select the <strong>Copy sources into project</strong> and <strong>Add sources from subdirectories</strong>.</p></li>
<li><p>Click <strong>Finish</strong>.</p>
<p>The files are added to the project, and the Vivado Design Suite automatically identifies the <code class="docutils literal notranslate"><span class="pre">Vadd_A_B.v</span></code> file as the top level of the design. This RTL module has an interface which is compatible with the <strong>Hardware Interface Requirements</strong> for RTL kernels as discussed in the <a class="reference internal" href="README.html"><span class="doc">Introduction</span></a>. This can be seen in the <code class="docutils literal notranslate"><span class="pre">Vadd_A_B</span></code> module definition by double-clicking the file in the Sources view to open it in a Code Editor window.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">Vadd_A_B</span> <span class="c1">#(</span>
  <span class="n">parameter</span> <span class="n">integer</span> <span class="n">C_S_AXI_CONTROL_ADDR_WIDTH</span> <span class="o">=</span> <span class="mi">12</span> <span class="p">,</span>
  <span class="n">parameter</span> <span class="n">integer</span> <span class="n">C_S_AXI_CONTROL_DATA_WIDTH</span> <span class="o">=</span> <span class="mi">32</span> <span class="p">,</span>
  <span class="n">parameter</span> <span class="n">integer</span> <span class="n">C_M00_AXI_ADDR_WIDTH</span>       <span class="o">=</span> <span class="mi">64</span> <span class="p">,</span>
  <span class="n">parameter</span> <span class="n">integer</span> <span class="n">C_M00_AXI_DATA_WIDTH</span>       <span class="o">=</span> <span class="mi">512</span><span class="p">,</span>
  <span class="n">parameter</span> <span class="n">integer</span> <span class="n">C_M01_AXI_ADDR_WIDTH</span>       <span class="o">=</span> <span class="mi">64</span> <span class="p">,</span>
  <span class="n">parameter</span> <span class="n">integer</span> <span class="n">C_M01_AXI_DATA_WIDTH</span>       <span class="o">=</span> <span class="mi">512</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="open-the-ip-packager">
<h2>Open the IP Packager<a class="headerlink" href="#open-the-ip-packager" title="Permalink to this heading">¶</a></h2>
<p>With the files added to your project, you can package the IP for use as a kernel.</p>
<ol>
<li><p>To start this process, select <strong>Tools</strong> &gt; <strong>Create and Package New IP</strong>.</p></li>
<li><p>Click <strong>Next</strong>.</p></li>
<li><p>Select <strong>Package your current project</strong>, and click <strong>Next</strong>.</p></li>
<li><p>For IP location, take a look at the default location so you can see where your IP will be packaged. The specified location will be needed when running the <code class="docutils literal notranslate"><span class="pre">package_xo</span></code> command in a later step.</p></li>
<li><p>Click <strong>Next</strong>.
The Create and Package IP summary page is displayed.
<img alt="Create and Package IP" src="../../../../_images/create_and_package_ip.png" /></p></li>
<li><p>Examine the summary and click <strong>Finish</strong> to proceed.</p>
<p>The Package IP window is displayed.</p>
<p><img alt="Package IP Window" src="../../../../_images/package_ip_interface.png" /></p>
</li>
</ol>
</div>
<div class="section" id="edit-ports-and-interfaces">
<h2>Edit Ports and Interfaces<a class="headerlink" href="#edit-ports-and-interfaces" title="Permalink to this heading">¶</a></h2>
<ol>
<li><p>Under Packaging Steps, select <strong>Ports and Interfaces</strong>. This displays the Ports and Interfaces window.</p></li>
<li><p>Right-click the <code class="docutils literal notranslate"><span class="pre">m00_axi</span></code> interface and select <strong>Associate Clocks</strong>.</p>
<p>The Associate Clocks dialog box displays the list of available clocks. In this case there is just the <code class="docutils literal notranslate"><span class="pre">ap_clk</span></code> interface to associate with the AXI interface.</p>
</li>
<li><p>Select <code class="docutils literal notranslate"><span class="pre">ap_clk</span></code> and click <strong>OK</strong>.</p></li>
<li><p>Repeat the process to associate <code class="docutils literal notranslate"><span class="pre">ap_clk</span></code> with the <code class="docutils literal notranslate"><span class="pre">m01_axi</span></code> interface, the <code class="docutils literal notranslate"><span class="pre">s_axi_control</span></code> interface.</p>
<p>Next you will add <code class="docutils literal notranslate"><span class="pre">FREQ_HZ</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">ap_clk</span></code>.</p>
</li>
<li><p>Expand the <strong>Clock and Reset Signals</strong> in the Ports and Interfaces window.</p>
<ol class="simple">
<li><p>Right-click the <code class="docutils literal notranslate"><span class="pre">ap_clk</span></code> interface and select the <strong>Edit Interface</strong> command. This displays the Edit Interface dialog box.</p></li>
<li><p>Select the <strong>Parameters</strong> tab.</p></li>
<li><p>Expand the <strong>Requires User Setting</strong> category on the left side of the dialog box, select the <code class="docutils literal notranslate"><span class="pre">FREQ_HZ</span></code> parameter, and select the <strong>Move selected parameters to the right</strong> command, as shown in the following figure.</p></li>
</ol>
<p><img alt="Edit Interface" src="../../../../_images/edit_interface.png" /></p>
<ol class="simple">
<li><p>Click <strong>OK</strong> to close the Edit Interface dialog box.</p></li>
</ol>
</li>
<li><p>The RTL kernel also requires the <code class="docutils literal notranslate"><span class="pre">value_resolve_type</span></code> property on the <code class="docutils literal notranslate"><span class="pre">FREQ_HZ</span></code> parameter to define how the tool should resolve value conflicts. In the Tcl Console, use the following command to define the property with a value of <code class="docutils literal notranslate"><span class="pre">user</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">set_property</span> <span class="n">value_resolve_type</span> <span class="n">user</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_bus_parameters</span> <span class="o">-</span><span class="n">of</span> <span class="p">[::</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_bus_interfaces</span> <span class="o">-</span><span class="n">of</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">current_core</span><span class="p">]</span> <span class="o">*</span><span class="n">clk</span><span class="o">*</span><span class="p">]</span> <span class="s2">&quot;FREQ_HZ&quot;</span><span class="p">]</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="add-control-registers-and-address-offsets">
<h2>Add Control Registers and Address Offsets<a class="headerlink" href="#add-control-registers-and-address-offsets" title="Permalink to this heading">¶</a></h2>
<p>You must also add the control registers and address offsets for the interfaces in the design. This can be done through the Addressing and Memory section of the Package IP window.  This requires a number of control registers to be added with the following attributes.</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Offset</th>
<th>Size (bits)</th>
</tr>
</thead>
<tbody>
<tr>
<td>CTRL</td>
<td>Control Signals</td>
<td>0x000</td>
<td>32</td>
</tr>
<tr>
<td>GIER</td>
<td>Global Interrupt Enable Register</td>
<td>0x004</td>
<td>32</td>
</tr>
<tr>
<td>IP_IER</td>
<td>IP Interrupt Enable Register</td>
<td>0x008</td>
<td>32</td>
</tr>
<tr>
<td>IP_ISR</td>
<td>IP Interrupt Status Register</td>
<td>0x00C</td>
<td>32</td>
</tr>
<tr>
<td>scalar00</td>
<td>Scalar values</td>
<td>0x010</td>
<td>32</td>
</tr>
<tr>
<td>A</td>
<td>pointer argument</td>
<td>0x018</td>
<td>64</td>
</tr>
<tr>
<td>B</td>
<td>pointer argument</td>
<td>0x024</td>
<td>64</td>
</tr>
</tbody>
</table><ol>
<li><p>Under Packaging Steps, select <strong>Addressing and Memory</strong>.
This displays the Addressing and Memory window.</p></li>
<li><p>Under Address Blocks, right-click <strong>reg0</strong> and select <strong>Add Reg</strong>.</p></li>
<li><p>Enter the name of the register in the Add Register dialog box, and click <strong>OK</strong>.</p>
<blockquote>
<div><p><strong>TIP:</strong> You will need to add registers for CTRL, GIER, and all the registers listed in the table above. You can also use the following Tcl commands in the Vivado Tcl Console to add the needed registers:</p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="n">ipx</span><span class="p">::</span><span class="n">add_register</span> <span class="n">CTRL</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_address_blocks</span> <span class="n">reg0</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_memory_maps</span> <span class="n">s_axi_control</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">current_core</span><span class="p">]]]</span>
   <span class="n">ipx</span><span class="p">::</span><span class="n">add_register</span> <span class="n">GIER</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_address_blocks</span> <span class="n">reg0</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_memory_maps</span> <span class="n">s_axi_control</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">current_core</span><span class="p">]]]</span>
   <span class="n">ipx</span><span class="p">::</span><span class="n">add_register</span> <span class="n">IP_IER</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_address_blocks</span> <span class="n">reg0</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_memory_maps</span> <span class="n">s_axi_control</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">current_core</span><span class="p">]]]</span>
   <span class="n">ipx</span><span class="p">::</span><span class="n">add_register</span> <span class="n">IP_ISR</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_address_blocks</span> <span class="n">reg0</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_memory_maps</span> <span class="n">s_axi_control</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">current_core</span><span class="p">]]]</span>
   <span class="n">ipx</span><span class="p">::</span><span class="n">add_register</span> <span class="n">scalar00</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_address_blocks</span> <span class="n">reg0</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_memory_maps</span> <span class="n">s_axi_control</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">current_core</span><span class="p">]]]</span>
   <span class="n">ipx</span><span class="p">::</span><span class="n">add_register</span> <span class="n">A</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_address_blocks</span> <span class="n">reg0</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_memory_maps</span> <span class="n">s_axi_control</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">current_core</span><span class="p">]]]</span>
   <span class="n">ipx</span><span class="p">::</span><span class="n">add_register</span> <span class="n">B</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_address_blocks</span> <span class="n">reg0</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_memory_maps</span> <span class="n">s_axi_control</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">current_core</span><span class="p">]]]</span>
</pre></div>
</div>
<p>After adding the registers to the Addressing and Memory window (as shown in the following figure), you will need to add the descriptions, offset, and size to the registers.</p>
<p><img alt="../../../../_images/address-memory-win.png" src="../../../../_images/address-memory-win.png" /></p>
</li>
<li><p>For each register, click in the <strong>Description</strong> field of the register and enter the description from the table above.</p></li>
<li><p>Click in the <strong>Address Offset</strong> field and enter the offset.</p></li>
<li><p>Click in the <strong>Size</strong> field and enter the field.</p>
<blockquote>
<div><p><strong>TIP:</strong> Description is optional, but Offset and Size are required.</p>
</div></blockquote>
<p>After completing the addition of the various registers and their attributes in accordance with the table above, you must also assign an M_AXI interface to each of the pointer arguments.</p>
</li>
<li><p>Select register <code class="docutils literal notranslate"><span class="pre">A</span></code> in the Registers table, and right-click and select <strong>Add Register Parameter</strong>.</p>
<ol class="simple">
<li><p>In the Add Register Parameter dialog box, add the ASSOCIATED_BUSIF parameter, and click <strong>OK</strong>.<br />This parameter associates the bus interface with the register.</p></li>
<li><p>Repeat the prior two steps for register <code class="docutils literal notranslate"><span class="pre">B</span></code>.</p></li>
<li><p>In the Value field for ASSOCIATED_BUSIF enter <code class="docutils literal notranslate"><span class="pre">m00_axi</span></code> for register <code class="docutils literal notranslate"><span class="pre">A</span></code>, and <code class="docutils literal notranslate"><span class="pre">m01_axi</span></code> for register <code class="docutils literal notranslate"><span class="pre">B</span></code>.</p></li>
</ol>
</li>
</ol>
</div>
<div class="section" id="check-integrity-assign-properties-and-package-ip">
<h2>Check Integrity, Assign Properties, and Package IP<a class="headerlink" href="#check-integrity-assign-properties-and-package-ip" title="Permalink to this heading">¶</a></h2>
<ol>
<li><p>Under the Packaging Steps, Select <strong>Review and Package</strong>.
This displays the Review and Package window.</p></li>
<li><p>Use the following commands in the Tcl Console to add these properties.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>set core [ipx::current_core]
set_property xpm_libraries {XPM_CDC XPM_MEMORY XPM_FIFO} $core
set_property sdx_kernel true $core
set_property sdx_kernel_type rtl $core
</pre></div>
</div>
</li>
<li><p>After setting these properties you can optionally rerun the <strong>check_integrity</strong> command, and your IP should pass the check.</p>
<p>You are now ready to package the IP. However, first check that an archive file will be generated when packaging the IP.</p>
</li>
<li><p>Look in the After Packaging section of the Review and Package window. If you see that an archive will not be generated, then you should enable the archive:</p></li>
<li><p>In the Review and Package window, select <strong>Edit packaging settings</strong>.This displays the Settings dialog box with the IP Package section displayed.</p></li>
<li><p>Under the After Packaging section of the dialog box, enable <strong>Create archive of IP</strong> as shown below, and click <strong>OK</strong>.</p>
<p><img alt="Enable Archive" src="../../../../_images/enable_archive_settings.png" /></p>
<p>You should see the Review and Package window change to reflect that an archive will now be created.</p>
</li>
<li><p>Click <strong>Package IP</strong>.</p></li>
</ol>
</div>
<div class="section" id="create-the-kernel-with-package-xo">
<h2>Create the Kernel with package_xo<a class="headerlink" href="#create-the-kernel-with-package-xo" title="Permalink to this heading">¶</a></h2>
<p>With the Vivado IP packaged, you can now run the <strong>package_xo</strong> command to create the Vitis kernel (<code class="docutils literal notranslate"><span class="pre">.xo</span></code>) file. The <code class="docutils literal notranslate"><span class="pre">package_xo</span></code> command also packages the IP files and the <code class="docutils literal notranslate"><span class="pre">kernel.xml</span></code> file into the generated <code class="docutils literal notranslate"><span class="pre">.xo</span></code> file.</p>
<ol>
<li><p>In the Tcl Console, enter the following command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package_xo</span>  <span class="o">-</span><span class="n">force</span> <span class="o">-</span><span class="n">xo_path</span> <span class="o">&lt;</span><span class="n">tutorial_path</span><span class="o">&gt;/</span><span class="n">reference</span><span class="o">-</span><span class="n">files</span><span class="o">/</span><span class="n">rtl_kernel</span><span class="o">/</span><span class="n">rtl_kernel</span><span class="o">.</span><span class="n">srcs</span><span class="o">/</span><span class="n">sources_1</span><span class="o">/</span><span class="n">imports</span><span class="o">/</span><span class="n">Vadd_A_B</span><span class="o">.</span><span class="n">xo</span> <span class="o">-</span><span class="n">kernel_name</span> <span class="n">Vadd_A_B</span> <span class="o">-</span><span class="n">ip_directory</span> <span class="o">&lt;</span><span class="n">tutorial_path</span><span class="o">&gt;/</span><span class="n">reference</span><span class="o">-</span><span class="n">files</span><span class="o">/</span><span class="n">rtl_kernel</span><span class="o">/</span><span class="n">rtl_kernel</span><span class="o">.</span><span class="n">srcs</span><span class="o">/</span><span class="n">sources_1</span><span class="o">/</span><span class="n">imports</span><span class="o">/</span><span class="n">IP</span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><p><strong>package_xo</strong>: Command name to create a compiled object file (.xo) from the Vivado IP.</p></li>
<li><p>-<strong>force</strong>: overwrites existing kernel file if one exists.</p></li>
<li><p>-<strong>xo_path</strong>: Path and name of the xo file</p></li>
<li><p>-<strong>kernel_name</strong>: Name of the kernel to create, and should match the RTL module name.</p></li>
<li><p>-<strong>ip_directory</strong>: Path to look for the packaged Vivado IP.</p></li>
</ul>
<blockquote>
<div><p><strong>TIP:</strong> The <code class="docutils literal notranslate"><span class="pre">package_xo</span></code> command also has a -<code class="docutils literal notranslate"><span class="pre">kernel_xml</span></code> option to specify an existing <code class="docutils literal notranslate"><span class="pre">kernel.xml</span></code> file if desired.</p>
</div></blockquote>
</li>
<li><p>After the package_xo command returns, navigate to the <code class="docutils literal notranslate"><span class="pre">reference-files/rtl_kernel/rtl_kernel.srcs/sources_1/imports</span></code> folder and look at the <code class="docutils literal notranslate"><span class="pre">Vadd_A_B.xo</span></code> file. You can use this file in Vitis application acceleration flow as explained later in this tutorial.</p></li>
</ol>
</div>
<div class="section" id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this heading">¶</a></h2>
<p>Next, you will work through the <a class="reference internal" href="vitis_ide.html"><span class="doc">RTL Kernel Wizard Flow</span></a> flow. This recreates the Vitis kernel (<code class="docutils literal notranslate"><span class="pre">.xo</span></code>) file you just created, but you will use an alternative approach.
</br></p>
<hr/>
<p align="center" class="sphinxhide"><b><a href="/README.md">Return to Main Page</a> — <a href="./README.md">Return to Start of this Tutorial</a></b></p><p align="center" class="sphinxhide"><sup>Copyright&copy; 2020 Xilinx</sup></p></div>
</div>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2022, Xilinx, Inc. Xilinx is now a part of AMD.
      <span class="lastupdated">Last updated on May 16, 2022.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>