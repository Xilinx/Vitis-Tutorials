<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
  <title>4. Reviewing the DATAFLOW Optimization &mdash; Vitis™ Tutorials 2020.1 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../../README.html" class="icon icon-home"> Vitis™ Tutorials
            <img src="../../../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2020.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">日本語版</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/master/docs-jp/README.html">Master</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started Pathway</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Vitis/README.html">Vitis Flow 101 Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="README.html">Vitis HLS Analysis and Optimization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware Accelerators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Hardware_Accelerators/Design_Tutorials/02-bloom/README.html">Optimizing Accelerated FPGA Applications: Bloom Filter Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Hardware_Accelerators/Design_Tutorials/01-convolution-tutorial/README.html">Optimizing Accelerated FPGA Applications: Convolution Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Hardware_Accelerators/Design_Tutorials/03-rtl_stream_kernel_integration/README.html">Mixed Kernels Design Tutorial with AXI Stream and Vitis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Hardware_Accelerators/Feature_Tutorials/01-rtl_kernel_workflow/README.html">Getting Started with RTL Kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Hardware_Accelerators/Feature_Tutorials/02-mixing-c-rtl-kernels/README.html">Mixing C++ and RTL Kernels</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Runtime and System Optimization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Runtime_and_System_Optimization/Design_Tutorials/01-host-code-opt/README.html">Host Code Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Runtime_and_System_Optimization/Design_Tutorials/02-ivas-ml/README.html">IVAS ZCU104 ML Acceleration Reference Release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Runtime_and_System_Optimization/Feature_Tutorials/01-mult-ddr-banks/README.html">Using Multiple DDR Banks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Runtime_and_System_Optimization/Feature_Tutorials/02-using-multiple-cu/README.html">Using Multiple Compute Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Runtime_and_System_Optimization/Feature_Tutorials/03-controlling-vivado-implementation/README.html">Controlling Vivado Implementation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vitis Platform Creation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Vitis_Platform_Creation/Introduction/01-Overview/README.html">Platform Creation Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Vitis_Platform_Creation/Introduction/02-Edge-AI-ZCU104/README.html">Vitis Custom Embedded Platform Creation Example on ZCU104</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/">Main</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2021-2/build/html/index.html">2021.2</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2021-1/build/html/index.html">2021.1</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-1/docs/build/html/index.html">2020.2</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../README.html">Vitis™ Tutorials</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../README.html" class="icon icon-home"></a> &raquo;</li>
      <li>4. Reviewing the DATAFLOW Optimization</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/Getting_Started/Vitis_HLS/dataflow_design.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <table class="sphinxhide">
 <tr>
   <td align="center"><img src="https://www.xilinx.com/content/dam/xilinx/imgs/press/media-kits/corporate/xilinx-logo.png" width="30%"/><h1>2020.1 Vitis™ Application Acceleration Tutorials</h1>
   <a href="https://github.com/Xilinx/Vitis-Tutorials/branches/all">See 2019.2 Vitis Application Acceleration Development Flow Tutorials</a>
  </td>
 </tr>
 <tr>
 <td>
 </td>
 </tr>
</table><div class="section" id="reviewing-the-dataflow-optimization">
<h1>4. Reviewing the DATAFLOW Optimization<a class="headerlink" href="#reviewing-the-dataflow-optimization" title="Permalink to this heading">¶</a></h1>
<p>In the earlier steps, you found a way to optimize the DCT algortithm so that you could achieve an II=1 with the pipelined loops. In this step, you use the DATAFLOW directive to increase task-level parallelism of the optimized functions or loops. For more information, refer to <a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=2020.1%3Bt=vitis+doc%3Bd=hlsoptimizationdirectives.html%3Ba=rdd1585343102486">set_directive_dataflow</a> in the Vitis HLS flow of the Vitis Unified Software Platform documentation (UG1416).</p>
<p>The DATAFLOW optimization tries to create task-level parallelism between the various functions in the code on top of the loop-level parallelism where possible.</p>
<div class="section" id="create-a-new-solution">
<h2>Create a New Solution<a class="headerlink" href="#create-a-new-solution" title="Permalink to this heading">¶</a></h2>
<p>As described in <a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=2020.1%3Bt=vitis+doc%3Bd=cosimiulationinvitishls.html%3Ba=fwf1584724080811">Creating Additional Solutions</a> in the Vitis HLS flow of the Vitis Unified Software Platform documentation (UG1416), you can create multiple solutions to let you pursue or explore different approaches to optimizing your design. Here you will create a new solution to explore the use of the DATAFLOW optimization.</p>
<ol>
<li><p>In the Explorer view, select the top-level project (<code class="docutils literal notranslate"><span class="pre">dct_prj</span></code>).</p></li>
<li><p>Right-click and select <strong>New Solution</strong>.</p>
<p>The Solution Wizard dialog box opens.</p>
</li>
<li><p>Make the following selections:</p>
<ol>
<li><p>In the Solution Name field, enter <code class="docutils literal notranslate"><span class="pre">DATAFLOW</span></code>.</p></li>
<li><p>In the Options section, make sure the Copy directives and constraints from solution check box is selected, and <code class="docutils literal notranslate"><span class="pre">solution1</span></code> is selected.</p></li>
<li><p>Leave all other settings as default, as shown in the following figure.</p>
<p><img alt="New Solution" src="../../../_images/new_solution-dataflow.png" /></p>
</li>
<li><p>To create the new solution, click <strong>Finish</strong>.</p></li>
</ol>
<blockquote>
<div><p><strong>TIP:</strong> When you create a new solution, it is set as the active solution that all of the simulation, synthesis, and other commands are directed towards. You can change the active solution by right-clicking a solution in the Explorer view and selecting <strong>Set Active Solution</strong>.</p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="add-the-dataflow-optimization">
<h2>Add the DATAFLOW Optimization<a class="headerlink" href="#add-the-dataflow-optimization" title="Permalink to this heading">¶</a></h2>
<ol>
<li><p>Select the <code class="docutils literal notranslate"><span class="pre">dct.cpp</span></code> tab to make the Code Editor active.</p></li>
<li><p>In the Directive view, select the top-level <code class="docutils literal notranslate"><span class="pre">dct</span></code> function, right-click and select <strong>Insert Directive</strong>.</p>
<p>This opens the Vitis HLS Directive Editor.
<img alt="DATAFLOW" src="../../../_images/dataflow_pragma.png" /></p>
</li>
<li><p>Make the following selections:</p>
<ol class="simple">
<li><p>In the the Directive Field, select <strong>DATAFLOW</strong>.</p></li>
<li><p>In the Destination field, select <strong>Directive File</strong>.</p></li>
<li><p>Click <strong>OK</strong> to close the form, and apply the directive.</p></li>
</ol>
</li>
<li><p>Select <strong>Synthesis</strong> &gt; <strong>All Solutions</strong> to rerun synthesis. This runs synthesis for all solutions, letting you compare the results.</p>
<p><img alt="All Solutions" src="../../../_images/synthesis-all_solutions.png" /></p>
<p>After synthesis completes, the Synthesis Summary report is displayed for the active solution; in this case,  the DATAFLOW solution. A Vitis HLS Report Comparison is also displayed for the synthesis results of all solutions that were synthesized as shown in the following figure.</p>
<p><img alt="Synthesis Report" src="../../../_images/synthesis-compare_results.png" /></p>
<p>You can see from the comparison results, the interval for the DATAFLOW solution is about 65% of first solution results. This is the primary advantage of the task-level parallelism provided by the DATAFLOW optimization. The other thing you can see is the increased utilization estimates for FF and LUTs in the design. These are just estimates, and you need to run Vivado synthesis and/or the implementation flow to get more accurate details on the resources used.</p>
<p>The following figure shows the Synthesis Summary report for the DATAFLOW solution.</p>
<p><img alt="Synthesis Report" src="../../../_images/synthesis_report-dataflow.png" /></p>
</li>
</ol>
</div>
<div class="section" id="view-the-dataflow-graph">
<h2>View the Dataflow Graph<a class="headerlink" href="#view-the-dataflow-graph" title="Permalink to this heading">¶</a></h2>
<p>Vitis HLS also provides a Dataflow Graph viewer as one of the features in the Analysis perspective. The DATAFLOW optimization is a dynamic optimization that can only really be understood after C/RTL co-simulation which provides needed performance data. After synthesis, you must run co-simulation. For more information, refer to <a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=2020.1%3Bt=vitis+doc%3Bd=cosimiulationinvitishls.htmla=fwf1584724080811">C/RTL Co-Simulation in Vitis HLS</a> in the Vitis HLS Flow of the Vitis Unified Software Platform Documentation (UG1416).</p>
<ol>
<li><p>From the toolbar menu, select <strong>Run C/RTL Co-Simulation</strong>.
The Co-simulation dialog box displays.</p></li>
<li><p>Make the following selections:</p>
<ol class="simple">
<li><p>Enable the <strong>Channel (PIPO/FIFO) Profiling</strong> checkbox.</p></li>
<li><p>Click <strong>OK</strong>.</p></li>
</ol>
<p><img alt="RTL Co-Sim" src="../../../_images/rtl-co-sim.png" /></p>
<p>After co-simulation completes, the tool opens the Co-simulation Report, which essentially says whether the tool passed your simulation testbench or not. In the case of Dataflow analysis, your testbench needs to call the synthesized function more than once to get the performance data from multiple iterations, and to make sure the design is flushing the FIFOs. When it comes to performance, one function call gives you latency, two or more calls to the function can give you the II.</p>
</li>
<li><p>After the simulation completes, select <strong>Analysis</strong> in the upper right hand corner of the screen to switch to the Analysis perspective.</p></li>
<li><p>In the Module Hierarchy view on the upper left, right click the <code class="docutils literal notranslate"><span class="pre">dct</span></code> function and select <strong>Open Dataflow Viewer</strong> as shown in the following figure.</p>
<p><img alt="Open Dataflow Viewer" src="../../../_images/open_dataflow_viewer.png" /></p>
<blockquote>
<div><p><strong>TIP:</strong> You can tell if the design has a Dataflow graph by the presence of the <img alt="Dataflow Icon" src="../../../_images/icon_dataflow.png" /> icon in the Module Hierarchy view.</p>
</div></blockquote>
<p>The DataFlow Viewer displays the function and the flow through the function. After running C/RTL co-simulation, the elements of the graph are filled out with performance data, and the Process and Channel tables beneath the graph are also filled out. Without the performance data provided by co-simulation, the graph and tables will have NA values to reflect the missing values. For more information, refer to <a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=2020.1%3Bt=vitis+doc%3Bd=analyzingresultssynthesis.htmla=twx1584322463297">Dataflow Viewer</a> in the Vitis HLS Flow of the Vitis Unified Software Platform Documentation (UG1416).</p>
<p><img alt="Dataflow Graph" src="../../../_images/dataflow_graph_channels.png" /></p>
<p>The Dataflow Viewer enables the following throughput analysis options:</p>
<ul class="simple">
<li><p>The graph shows the overall topology of the DATAFLOW region and shows what type of channels (FIFO/PIPO) were inferred for communication between the tasks in the DATAFLOW region. Analyzing each channel and process can be useful to resolve issues such as deadlock or poor throughput because of bad FIFO sizing.</p></li>
<li><p>The co-simulation data helps with the FIFO sizing problem by tracking the maximum size of the FIFO during the course of the simulation and thereby giving the user a good reference point on how to size the FIFOs. In addition, when running cosimulation, automatic deadlock detection can highlight the processes and channels involved in the deadlock allowing the user to quickly narrow the focus and fix the issue.</p></li>
<li><p>In addition to FIFO sizing, the data reported after cosimulation also provides, on a per process and channel basis, the time spent stalling either waiting for input or blocked from writing output. The graph helps the user understand such issues and manage how the channels are sized to accommodate slow producers versus fast consumers and/or vice-versa. In addition, the graph is useful in understanding how reading from the input in the middle of a DATAFLOW region can impact performance. This is a fairly common scenario where performance can be impacted.</p></li>
</ul>
</li>
</ol>
</div>
<div class="section" id="convert-the-directives-into-pragmas">
<h2>Convert the Directives into Pragmas<a class="headerlink" href="#convert-the-directives-into-pragmas" title="Permalink to this heading">¶</a></h2>
<p>Now that you have your optimized design, you can transfer the directives from a Tcl script, which the Vitis HLS tool runs, to pragmas in the source code which can be shared to other users or design teams, and used within the Vitis unified software platform. Select the directives in the Directive view, and change them to pragmas using the following process.</p>
<ol>
<li><p>Select the <code class="docutils literal notranslate"><span class="pre">dct.cpp</span></code> tab to make the Code Editor active, or open the source code if needed.</p></li>
<li><p>Scroll through the Directives view, right-click any directives you see, and select the <strong>Modify Directive</strong>. This displays the Vitis HLS Directive Editor.</p></li>
<li><p>In the Directive Editor, change the Destination to <strong>Source File</strong>, and click <strong>OK</strong>. This changes the directive to a pragma written to the source code files, which you can see displayed in the <code class="docutils literal notranslate"><span class="pre">dct.cpp</span></code> source file.</p>
<blockquote>
<div><p><strong>TIP:</strong> When you edit the <code class="docutils literal notranslate"><span class="pre">ARRAY_PARTITION</span></code> directive, you must specify the factor as 8 since the factor will not be automatically determined.</p>
</div></blockquote>
<p>When you change the <code class="docutils literal notranslate"><span class="pre">ARRAY_PARTITION</span></code> directive for the <code class="docutils literal notranslate"><span class="pre">col_inbuf</span></code> variable, the tool will return a <strong>Warning</strong> indicating that it cannot find the <code class="docutils literal notranslate"><span class="pre">col_inbuf</span></code> variable, and will insert the pragma at the first line of the function. Select <strong>OK</strong> to insert the pragma as indicated.</p>
<p>You must manually correct the placement of the pragma by cutting and pasting the <code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">HLS</span> <span class="pre">ARRAY_PARTITION...</span></code> line into the <code class="docutils literal notranslate"><span class="pre">dct.cpp</span></code> file after the definition of the <code class="docutils literal notranslate"><span class="pre">col_inbuf</span></code> variable on line 71. The pragma must be defined after the variable in order to be associated correctly by the compiler. If this is not done, Vitis HLS will return an error when trying to compile the code.</p>
<p>With the directives converted to pragmas, the <code class="docutils literal notranslate"><span class="pre">dct.cpp</span></code> code is now portable and carries the optimizations you have completed within the code.</p>
</li>
<li><p>To save the <code class="docutils literal notranslate"><span class="pre">dct.cpp</span></code> file with the pragmas into the <code class="docutils literal notranslate"><span class="pre">./vitis_hls_analysis/reference-files</span></code> folder, select <strong>File</strong> &gt; <strong>Save As</strong>. You can use the file in the next lab.</p></li>
</ol>
</div>
<div class="section" id="export-the-vitis-kernel">
<h2>Export the Vitis Kernel<a class="headerlink" href="#export-the-vitis-kernel" title="Permalink to this heading">¶</a></h2>
<p>Finally, you can export the results of the high-level synthesis as a synthesized kernel (<code class="docutils literal notranslate"><span class="pre">.xo</span></code>) file.</p>
<ol class="simple">
<li><p>From the main toolbar, select <strong>Export RTL</strong>. The Export RTL dialog box opens.</p></li>
<li><p>For Format Selection, select <strong>Vitis Kernel (.xo)</strong>.</p></li>
<li><p>In the Output location field specify the <code class="docutils literal notranslate"><span class="pre">./vitis_hls_analysis/reference-files</span></code> folder to write the <code class="docutils literal notranslate"><span class="pre">dct.xo</span></code> file.</p></li>
<li><p>To export the kernel, select <strong>OK</strong>.</p></li>
</ol>
</div>
<div class="section" id="next-step">
<h2>Next Step<a class="headerlink" href="#next-step" title="Permalink to this heading">¶</a></h2>
<p>You can use the exported Vitis kernel, or the optimized C/C++ source code for use in a Vitis application acceleration development flow project. You will do this in the next lab, <a class="reference internal" href="using_the_kernel.html"><span class="doc">Using the HLS Kernel in Vitis</span></a>.</p>
</br>
<hr/>
<p align="center" class="sphinxhide"><b><a href="/README.md">Return to Main Page</a> — <a href="docs/README.md">Return to Start of Tutorial</a></b></p><p align="center" class="sphinxhide"><sup>Copyright&copy; 2020 Xilinx</sup></p></div>
</div>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2022, Xilinx, Inc. Xilinx is now a part of AMD.
      <span class="lastupdated">Last updated on August 23, 2022.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>