


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../../../_static/js/Searchbox.min.js"></script>
	<script type="text/javascript" src="../../../../_static/js/header-footer.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home" alt="Documentation Home"> Vitis™ Tutorials
          

          
          </a>

          
            
            
              <div class="version">
                2021.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">日本語版</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/master/docs-jp/index.html">Master</a></li>
</ul>
<p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Getting_Started/Vitis-Getting-Started.html">Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Acceleration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Hardware-Acceleration.html">Hardware Acceleration</a></li>
</ul>
<p class="caption"><span class="caption-text">AI Engine</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../AI_Engine_Development/AI_Engine_Development.html">AI Engine Development</a></li>
</ul>
<p class="caption"><span class="caption-text">Platforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Vitis_Platform_Creation/Vitis_Platform_Creation.html">Vitis Platform Creation</a></li>
</ul>
<p class="caption"><span class="caption-text">Other Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2021-1/build/html/index.html">2021.1</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-2/docs/index.html">2020.2</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-1/docs/README.html">2020.1</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../../../_sources/docs/Hardware_Acceleration/Feature_Tutorials/01-rtl_kernel_workflow/package_ip.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Vitis™ Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Package IP/Package XO Flow</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/docs/Hardware_Acceleration/Feature_Tutorials/01-rtl_kernel_workflow/package_ip.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <table class="sphinxhide">
 <tr>
   <td align="center"><img src="https://www.xilinx.com/content/dam/xilinx/imgs/press/media-kits/corporate/xilinx-logo.png" width="30%"/><h1>Vitis™ Application Acceleration Development Flow Tutorials</h1>
   </td>
 </tr>
 <tr>
 <td>
 </td>
 </tr>
</table><div class="section" id="package-ip-package-xo-flow">
<h1>Package IP/Package XO Flow<a class="headerlink" href="#package-ip-package-xo-flow" title="Permalink to this headline">¶</a></h1>
<p><em><strong>Version: Vitis 2021.2</strong></em></p>
<p>The process described in this lab follows the Package IP flow as described in the <a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=2021.1%3Bt=vitis+doc%3Bd=devrtlkernel.html%3Ba=rzv1504034325561">RTL Kernel Development Flow</a> in the Vitis Application Acceleration Development Flow documentation (UG1393).</p>
<blockquote>
<div><p><strong>IMPORTANT:</strong> Before running the tutorial commands, you must set up the tool environment by running the following commands, as described in <a class="reference external" href="https://www.xilinx.com/html_docs/xilinx2021_1/vitis_doc/settingupvitisenvironment.html#zks1565446519267">Setting up the Vitis Environment</a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span> <span class="c1">#setup Xilinx Vitis tools. XILINX_VITIS and XILINX_VIVADO will be set in this step.</span>
 <span class="nb">source</span> &lt;VITIS_install_path&gt;/settings64.sh
 <span class="c1">#Setup Xilinx runtime. XILINX_XRT will be set in this step.</span>
 <span class="nb">source</span> &lt;XRT_install_path&gt;/setup.sh
</pre></div>
</div>
</div></blockquote>
<div class="section" id="create-a-new-project">
<h2>Create a New Project<a class="headerlink" href="#create-a-new-project" title="Permalink to this headline">¶</a></h2>
<ol>
<li><p>Change directory to the tutorial folder: <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">./01-rtl_kernel_workflow</span></code>.</p></li>
<li><p>Launch the Vivado®  IDE, enter the <code class="docutils literal notranslate"><span class="pre">vivado</span></code> command in a terminal window.</p></li>
<li><p>Select <strong>Create Project</strong>, or  <strong>File</strong> &gt; <strong>Project</strong> &gt; <strong>New</strong>.</p>
<p>The New Project wizard opens.</p>
</li>
<li><p>Click <strong>Next</strong>.</p></li>
<li><p>On the Project Name page of the New Project wizard, make the following selections:</p>
<ol class="simple">
<li><p>Specify a <strong>Project name</strong>, such as <code class="docutils literal notranslate"><span class="pre">rtl_kernel</span></code>, a <strong>Project location</strong>.</p></li>
<li><p>Enable the <strong>Create project subdirectory</strong> checkbox.</p></li>
<li><p>Click <strong>Next</strong>.</p></li>
</ol>
</li>
<li><p>On the Project Type page, make the following selections:</p>
<ol class="simple">
<li><p>Select <strong>RTL Project</strong></p></li>
<li><p>Enable the <strong>Do not specify sources at this time</strong> checkbox.</p></li>
<li><p>Click <strong>Next</strong>.</p></li>
</ol>
</li>
<li><p>On the Default Part page select <strong>Boards</strong>, and enter <code class="docutils literal notranslate"><span class="pre">U200</span></code> in the Search field.</p>
<ol class="simple">
<li><p>Select <strong>Alveo U200 Data Center Accelerator Card</strong>, and click <strong>Next</strong> to proceed.</p></li>
</ol>
<p>The New Project Summary page is displayed.</p>
</li>
<li><p>Examine it for details of the project, and click <strong>Finish</strong> to create the project.</p>
<p>The Vivado IDE opens with the new project.</p>
<p><img alt="New Project Summary" src="../../../../_images/new_project_open.png" /></p>
</li>
</ol>
</div>
<div class="section" id="add-kernel-sources">
<h2>Add Kernel Sources<a class="headerlink" href="#add-kernel-sources" title="Permalink to this headline">¶</a></h2>
<p>You are ready to add RTL files into the project to package as an IP. The RTL files have been provided for you in this tutorial, but this is the point at which you would insert your own RTL code.</p>
<ol>
<li><p>In the Sources view, click the <strong>Add Sources</strong> command (<img alt="Add Sources" src="../../../../_images/icon_add_sources.png" />). The Add Sources window is displayed.</p></li>
<li><p>Click <strong>Add or create design sources</strong>, and then click <strong>Next</strong>.</p></li>
<li><p>Click <strong>Add Directories</strong>, browse to <code class="docutils literal notranslate"><span class="pre">reference-files/src</span></code>, and select the <code class="docutils literal notranslate"><span class="pre">IP</span></code> directory (which contains the RTL sources).</p>
<blockquote>
<div><p><strong>NOTE</strong>: To add your own RTL IP, specify the required folder or files.</p>
</div></blockquote>
<p><img alt="Add Design Sources" src="../../../../_images/add_rtl_sources.png" /></p>
</li>
<li><p>Select the <strong>Copy sources into project</strong> and <strong>Add sources from subdirectories</strong>.</p></li>
<li><p>Click <strong>Finish</strong>.</p>
<p>The files are added to the project, and the Vivado Design Suite automatically identifies the <code class="docutils literal notranslate"><span class="pre">Vadd_A_B.v</span></code> file as the top level of the design. This RTL module has an interface which is compatible with the <strong>Hardware Interface Requirements</strong> for RTL kernels as discussed in the <a class="reference internal" href="README.html"><span class="doc">Introduction</span></a>. This can be seen in the <code class="docutils literal notranslate"><span class="pre">Vadd_A_B</span></code> module definition by double-clicking the file in the Sources view to open it in a Code Editor window.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">Vadd_A_B</span> <span class="c1">#(</span>
  <span class="n">parameter</span> <span class="n">integer</span> <span class="n">C_S_AXI_CONTROL_ADDR_WIDTH</span> <span class="o">=</span> <span class="mi">12</span> <span class="p">,</span>
  <span class="n">parameter</span> <span class="n">integer</span> <span class="n">C_S_AXI_CONTROL_DATA_WIDTH</span> <span class="o">=</span> <span class="mi">32</span> <span class="p">,</span>
  <span class="n">parameter</span> <span class="n">integer</span> <span class="n">C_M00_AXI_ADDR_WIDTH</span>       <span class="o">=</span> <span class="mi">64</span> <span class="p">,</span>
  <span class="n">parameter</span> <span class="n">integer</span> <span class="n">C_M00_AXI_DATA_WIDTH</span>       <span class="o">=</span> <span class="mi">512</span><span class="p">,</span>
  <span class="n">parameter</span> <span class="n">integer</span> <span class="n">C_M01_AXI_ADDR_WIDTH</span>       <span class="o">=</span> <span class="mi">64</span> <span class="p">,</span>
  <span class="n">parameter</span> <span class="n">integer</span> <span class="n">C_M01_AXI_DATA_WIDTH</span>       <span class="o">=</span> <span class="mi">512</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="open-the-ip-packager">
<h2>Open the IP Packager<a class="headerlink" href="#open-the-ip-packager" title="Permalink to this headline">¶</a></h2>
<p>With the files added to your project, you can package the IP for use as a kernel.</p>
<ol>
<li><p>To start this process, select <strong>Tools</strong> &gt; <strong>Create and Package New IP</strong>.</p></li>
<li><p>Click <strong>Next</strong>.</p></li>
<li><p>Select <strong>Package your current project</strong>, and click <strong>Next</strong>.</p></li>
<li><p>For IP location, take a look at the default location so you can see where your IP will be packaged.</p></li>
<li><p>Click <strong>Next</strong>.
The Create and Package IP summary page is displayed.
<img alt="Create and Package IP" src="../../../../_images/create_and_package_ip.png" /></p></li>
<li><p>Examine the summary and click <strong>Finish</strong> to proceed.</p>
<p>The Package IP window is displayed.</p>
<p><img alt="Package IP Window" src="../../../../_images/package_ip_interface.png" /></p>
</li>
</ol>
</div>
<div class="section" id="specify-the-control-protocol">
<h2>Specify the Control Protocol<a class="headerlink" href="#specify-the-control-protocol" title="Permalink to this headline">¶</a></h2>
<ol>
<li><p>Under Packaging Steps, select <strong>Compatibility</strong>.</p></li>
<li><p>Enable <strong>Package for Vitis</strong>, and ensure that both <strong>Package for IPI</strong> and <strong>Ignore Freq_Hz</strong> are enabled as well. This lets you package the IP as a kernel object (.xo) for use in the Vitis tool flow, and also configures the specific Xilinx parts or device families compatible with your custom IP.</p>
<p><img alt="Package for Vitis" src="../../../../_images/control_protocol.png" /></p>
</li>
</ol>
<p>Enabling the <strong>Package for Vitis</strong> checkbox lets you specify the <strong>Control protocol</strong> for the RTL kernel. The default is <code class="docutils literal notranslate"><span class="pre">ap_ctrl_hs</span></code>, but other protocols such as <code class="docutils literal notranslate"><span class="pre">user_managed</span></code> and <code class="docutils literal notranslate"><span class="pre">ap_ctrl_chain</span></code> are also suported as described in <a class="reference external" href="https://www.xilinx.com/html_docs/xilinx2021_1/vitis_doc/appdev.html#pto1621516421839">Software Controllable Kernels</a>.</p>
<ol class="simple">
<li><p>Select <code class="docutils literal notranslate"><span class="pre">user_managed</span></code> for this tutorial. The tool sets required properties for the Vitis kernel.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">set_property</span> <span class="n">sdx_kernel</span> <span class="n">true</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">current_core</span><span class="p">]</span>
<span class="n">set_property</span> <span class="n">sdx_kernel_type</span> <span class="n">rtl</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">current_core</span><span class="p">]</span>
<span class="n">set_property</span> <span class="n">ipi_drc</span> <span class="p">{</span><span class="n">ignore_freq_hz</span> <span class="n">true</span><span class="p">}</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">current_core</span><span class="p">]</span>
<span class="n">set_property</span> <span class="n">vitis_drc</span> <span class="p">{</span><span class="n">ctrl_protocol</span> <span class="n">user_managed</span><span class="p">}</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">current_core</span><span class="p">]</span>
</pre></div>
</div>
<blockquote>
<div><p><strong>TIP</strong>: Notice that the <strong>Ports and Interfaces</strong> tab now shows a DRC error because you have enabled the <strong>Package for Vitis</strong> checkbox. The error indicates that the Vitis compatible IP must have at least one AXIS (AXI-streaming) interface, or at least one defined register on the AXI slave interface. In this case the <code class="docutils literal notranslate"><span class="pre">s_axi_control</span></code> interface does not have a defined register which you will add shortly.</p>
</div></blockquote>
</div>
<div class="section" id="edit-ports-and-interfaces">
<h2>Edit Ports and Interfaces<a class="headerlink" href="#edit-ports-and-interfaces" title="Permalink to this headline">¶</a></h2>
<ol>
<li><p>Under Packaging Steps, select <strong>Ports and Interfaces</strong>. This displays the Ports and Interfaces window.</p></li>
<li><p>Right-click the <code class="docutils literal notranslate"><span class="pre">m00_axi</span></code> interface and select <strong>Associate Clocks</strong>.</p>
<p>The Associate Clocks dialog box displays the list of available clocks. In this case there is just the <code class="docutils literal notranslate"><span class="pre">ap_clk</span></code> interface to associate with the AXI interface.</p>
</li>
<li><p>Select <code class="docutils literal notranslate"><span class="pre">ap_clk</span></code> and click <strong>OK</strong>.</p></li>
<li><p>Repeat the process to associate <code class="docutils literal notranslate"><span class="pre">ap_clk</span></code> with the <code class="docutils literal notranslate"><span class="pre">m01_axi</span></code> interface, and the <code class="docutils literal notranslate"><span class="pre">s_axi_control</span></code> interface.</p></li>
</ol>
</div>
<div class="section" id="add-control-registers-and-address-offsets">
<h2>Add Control Registers and Address Offsets<a class="headerlink" href="#add-control-registers-and-address-offsets" title="Permalink to this headline">¶</a></h2>
<p>To fix the error in the Ports and Interfaces window, you must add at least one register to the <code class="docutils literal notranslate"><span class="pre">s_axilite</span></code> interface. This can be done through the <strong>Addressing and Memory</strong> section of the Package IP window.  The user-managed kernel requires a number of registers to be added with the following attributes.</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Offset</th>
<th>Size (bits)</th>
</tr>
</thead>
<tbody>
<tr>
<td>USER_CTRL</td>
<td>Control Signals</td>
<td>0x000</td>
<td>32</td>
</tr>
<tr>
<td>scalar00</td>
<td>Scalar values</td>
<td>0x010</td>
<td>32</td>
</tr>
<tr>
<td>A</td>
<td>pointer argument</td>
<td>0x018</td>
<td>64</td>
</tr>
<tr>
<td>B</td>
<td>pointer argument</td>
<td>0x024</td>
<td>64</td>
</tr>
</tbody>
</table><ol>
<li><p>Under Packaging Steps, select <strong>Addressing and Memory</strong>.
This displays the Addressing and Memory window.</p></li>
<li><p>Under Address Blocks, right-click <strong>reg0</strong> and select <strong>Add Reg</strong>.</p></li>
<li><p>Enter the name of the register in the Add Register dialog box, and click <strong>OK</strong>. Notice that the error on the Ports and Interfaces section goes away as you define the registers for the RTL kernel.</p>
<blockquote>
<div><p><strong>TIP:</strong> You will need to add the registers listed in the table above. You can also use the following Tcl commands in the Vivado Tcl Console to add the needed registers:</p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="n">ipx</span><span class="p">::</span><span class="n">add_register</span> <span class="n">CTRL</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_address_blocks</span> <span class="n">reg0</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_memory_maps</span> <span class="n">s_axi_control</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">current_core</span><span class="p">]]]</span>
   <span class="n">ipx</span><span class="p">::</span><span class="n">add_register</span> <span class="n">scalar00</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_address_blocks</span> <span class="n">reg0</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_memory_maps</span> <span class="n">s_axi_control</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">current_core</span><span class="p">]]]</span>
   <span class="n">ipx</span><span class="p">::</span><span class="n">add_register</span> <span class="n">A</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_address_blocks</span> <span class="n">reg0</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_memory_maps</span> <span class="n">s_axi_control</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">current_core</span><span class="p">]]]</span>
   <span class="n">ipx</span><span class="p">::</span><span class="n">add_register</span> <span class="n">B</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_address_blocks</span> <span class="n">reg0</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">get_memory_maps</span> <span class="n">s_axi_control</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">ipx</span><span class="p">::</span><span class="n">current_core</span><span class="p">]]]</span>
</pre></div>
</div>
<p>After adding the registers to the Addressing and Memory window (as shown in the following figure), you will need to add the descriptions, offset, and size to the registers.</p>
<p><img alt="missing image" src="../../../../_images/address-memory-win.png" /></p>
</li>
<li><p>For each register, click in the <strong>Description</strong> field of the register and enter the description from the table above.</p></li>
<li><p>Click in the <strong>Address Offset</strong> field and enter the offset.</p></li>
<li><p>Click in the <strong>Size</strong> field and enter the field.</p>
<blockquote>
<div><p><strong>IMPORTANT:</strong> Description is optional, but Offset and Size are required.</p>
</div></blockquote>
<p>After completing the addition of the various registers and their attributes in accordance with the table above, you must also associate an M_AXI interface with each of the pointer arguments.</p>
</li>
<li><p>Select register <code class="docutils literal notranslate"><span class="pre">A</span></code> in the Registers table, and right-click and select <strong>Add Register Parameter</strong>.</p>
<ol class="simple">
<li><p>In the Add Register Parameter dialog box, add the ASSOCIATED_BUSIF parameter, and click <strong>OK</strong>.<br />This parameter associates the bus interface with the register.</p></li>
<li><p>Repeat the prior two steps for register <code class="docutils literal notranslate"><span class="pre">B</span></code>.</p></li>
<li><p>In the Value field for ASSOCIATED_BUSIF enter <code class="docutils literal notranslate"><span class="pre">m00_axi</span></code> for register <code class="docutils literal notranslate"><span class="pre">A</span></code>, and <code class="docutils literal notranslate"><span class="pre">m01_axi</span></code> for register <code class="docutils literal notranslate"><span class="pre">B</span></code>.</p></li>
</ol>
<p>Your finished results should appear similar to the image below:</p>
</li>
</ol>
<p><img alt="../../../../_images/address-memory-win.png" src="../../../../_images/address-memory-win.png" /></p>
</div>
<div class="section" id="check-integrity-assign-properties-and-package-ip">
<h2>Check Integrity, Assign Properties, and Package IP<a class="headerlink" href="#check-integrity-assign-properties-and-package-ip" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p>Under the Packaging Steps, Select <strong>Review and Package</strong>.
This displays the Review and Package window. You are now ready to package the IP. However, first check that an archive file will be generated when packaging the IP. This is the default behavior when <strong>Package for Vitis</strong> is enabled.</p></li>
<li><p>Look in the <strong>After Packaging</strong> section of the Review and Package window. If you see that an archive will not be generated, then you should enable the archive by selecting <strong>Edit packaging settings</strong>. This displays the Settings dialog box with the IP Package section displayed.</p></li>
</ol>
<ul class="simple">
<li><p>Under the After Packaging section of the dialog box, enable <strong>Create archive of IP</strong> as shown below, and click <strong>OK</strong>.  You should see the <strong>Review and Package</strong> window change to reflect that an archive will now be created.</p></li>
</ul>
<p><img alt="Enable Archive" src="../../../../_images/enable_archive_settings.png" /></p>
<ol>
<li><p>Click <strong>Package IP</strong>.</p>
<p>After packaging the IP you should see dialog box indicating that the IP packaged successfully.</p>
</li>
</ol>
<p>With <strong>Package for Vitis</strong> enabled, the tool automatically runs the <code class="docutils literal notranslate"><span class="pre">package_xo</span></code> command to create the Vitis kernel (<code class="docutils literal notranslate"><span class="pre">.xo</span></code>) file. The <code class="docutils literal notranslate"><span class="pre">package_xo</span></code> command also packages the IP files and the <code class="docutils literal notranslate"><span class="pre">kernel.xml</span></code> file into the generated <code class="docutils literal notranslate"><span class="pre">.xo</span></code> file. You can examine the Tcl Console window to see that the <code class="docutils literal notranslate"><span class="pre">package_xo</span></code> command has been run.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package_xo</span> <span class="o">-</span><span class="n">xo_path</span> <span class="o">&lt;</span><span class="n">tutorial_path</span><span class="o">&gt;/</span><span class="n">rtl_kernel</span><span class="o">/</span><span class="n">rtl_kernel</span><span class="o">.</span><span class="n">srcs</span><span class="o">/</span><span class="n">sources_1</span><span class="o">/</span><span class="n">imports</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">xo</span><span class="o">/</span><span class="n">Vadd_A_B</span><span class="o">.</span><span class="n">xo</span> <span class="o">-</span><span class="n">kernel_name</span> <span class="n">Vadd_A_B</span> <span class="o">-</span><span class="n">ip_directory</span> <span class="o">&lt;</span><span class="n">tutorial_path</span><span class="o">&gt;/</span><span class="n">rtl_kernel</span><span class="o">/</span><span class="n">rtl_kernel</span><span class="o">.</span><span class="n">srcs</span><span class="o">/</span><span class="n">sources_1</span><span class="o">/</span><span class="n">imports</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">IP</span> <span class="o">-</span><span class="n">ctrl_protocol</span> <span class="n">user_managed</span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><p><strong>package_xo</strong>: Command name to create a compiled object file (.xo) from the Vivado IP.</p></li>
<li><p>-<strong>xo_path</strong>: Path and name of the xo file</p></li>
<li><p>-<strong>kernel_name</strong>: Name of the kernel to create, and should match the RTL module name.</p></li>
<li><p>-<strong>ip_directory</strong>: Path to look for the packaged Vivado IP.</p></li>
<li><p>-<strong>ctrl_protocol</strong>: Specifies the control protocol the kernel implements.</p></li>
</ul>
<p>After the <code class="docutils literal notranslate"><span class="pre">package_xo</span></code> command returns, navigate to the <code class="docutils literal notranslate"><span class="pre">reference-files/rtl_kernel/rtl_kernel.srcs/sources_1/imports</span></code> folder where you can see the <code class="docutils literal notranslate"><span class="pre">IP</span></code> folder and the <code class="docutils literal notranslate"><span class="pre">xo</span></code> folder. Look at the <code class="docutils literal notranslate"><span class="pre">Vadd_A_B.xo</span></code> file in the <code class="docutils literal notranslate"><span class="pre">xo</span></code> folder. The <code class="docutils literal notranslate"><span class="pre">.xo</span></code> file contains the IP representation of the kernel, as well as the kernel.xml file used by the Vitis compiler to link the kernel into the device binary (<code class="docutils literal notranslate"><span class="pre">.xclbin</span></code>).</p>
<p>You will use the <code class="docutils literal notranslate"><span class="pre">.xo</span></code> file in the Vitis application acceleration flow as explained later in this tutorial.</p>
</div>
<div class="section" id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h2>
<p>Next, you will examine the <a class="reference internal" href="host-code.html"><span class="doc">Host Application Coding</span></a> required to integrate the user-managed RTL kernel into your accelerated application.
</br></p>
<hr/>
<p align="center" class="sphinxhide"><b><a href="/README.md">Return to Main Page</a> — <a href="./README.md">Return to Start of this Tutorial</a></b></p><p align="center" class="sphinxhide"><sup>Copyright&copy; 2021 Xilinx</sup></p></div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on January 18, 2022.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2019-2022, Xilinx, Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>