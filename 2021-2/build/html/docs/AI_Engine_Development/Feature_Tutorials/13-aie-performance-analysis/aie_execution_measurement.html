


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/linkid.js"></script>
	    <script type="text/javascript" src="../../../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home" alt="Documentation Home"> Vitis™ Tutorials
          

          
          </a>

          
            
            
              <div class="version">
                2021.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">日本語版</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/master/docs-jp/index.html">Master</a></li>
</ul>
<p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Getting_Started/Vitis-Getting-Started.html">Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Acceleration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Hardware_Acceleration/Hardware-Acceleration.html">Hardware Acceleration</a></li>
</ul>
<p class="caption"><span class="caption-text">AI Engine</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../AI_Engine_Development.html">AI Engine Development</a></li>
</ul>
<p class="caption"><span class="caption-text">Platforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Vitis_Platform_Creation/Vitis_Platform_Creation.html">Vitis Platform Creation</a></li>
</ul>
<p class="caption"><span class="caption-text">Other Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2021-1/build/html/index.html">2021.1</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-2/docs/index.html">2020.2</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-1/docs/README.html">2020.1</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../../../_sources/docs/AI_Engine_Development/Feature_Tutorials/13-aie-performance-analysis/aie_execution_measurement.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Vitis™ Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>AI Engine Graph Execution and Measurement</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/docs/AI_Engine_Development/Feature_Tutorials/13-aie-performance-analysis/aie_execution_measurement.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  </table>
<table class="sphinxhide" width="100%">
 <tr width="100%">
    <td align="center"><img src="https://raw.githubusercontent.com/Xilinx/Image-Collateral/main/xilinx-logo.png" width="30%"/><h1>AI Engine Development</h1>
    <a href="https://www.xilinx.com/products/design-tools/vitis.html">See Vitis™ Development Environment on xilinx.com</br></a>
    <a href="https://www.xilinx.com/products/design-tools/vitis/vitis-ai.html">See Vitis-AI™ Development Environment on xilinx.com</a>
    </td>
 </tr>
</table><div class="section" id="ai-engine-graph-execution-and-measurement">
<h1>AI Engine Graph Execution and Measurement<a class="headerlink" href="#ai-engine-graph-execution-and-measurement" title="Permalink to this headline">¶</a></h1>
<p><em><strong>Version: Vitis 2021.2</strong></em></p>
<p>AI Engine graph execution uses locks for memory synchronization. The stream interfaces have inherent data synchronization through backward or forward pressure.</p>
<p>This example introduces the Trace view to show how kernels with buffers and streams are executed and synchronized. Performance measurement methods are also introduced to help you identify the performance bottlenecks in the design. An optimized version of the design is then introduced.</p>
<p><strong>Note:</strong> The default working directory in this step is <code class="docutils literal notranslate"><span class="pre">testcase_ssfifo</span></code>, unless explicitly stated otherwise.</p>
<div class="section" id="graph-and-kernel-code">
<h2>Graph and Kernel Code<a class="headerlink" href="#graph-and-kernel-code" title="Permalink to this headline">¶</a></h2>
<ol>
<li><p>Run the following <code class="docutils literal notranslate"><span class="pre">make</span></code> command to compile the design:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">aie</span>
</pre></div>
</div>
</li>
<li><p>Open the compile result in Vitis Analyzer. It can be found in the following directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vitis_analyzer</span> <span class="n">Work</span><span class="o">/</span><span class="n">graph</span><span class="o">.</span><span class="n">aiecompile_summary</span>
</pre></div>
</div>
</li>
<li><p>Examine the graph view in Vitis Analyzer.</p>
<p><img alt="Graph View" src="../../../../_images/figure11.PNG" /></p>
</li>
</ol>
<p>There are two kernels, <code class="docutils literal notranslate"><span class="pre">aie_dest1</span></code> and <code class="docutils literal notranslate"><span class="pre">aie_dest2</span></code>, in the design. These two kernels are connected through a stream connection and a window connection (ping-pong buffers <code class="docutils literal notranslate"><span class="pre">buf1</span></code> and <code class="docutils literal notranslate"><span class="pre">buf1d</span></code>). The stream connection contains two stream switch FIFOs: <code class="docutils literal notranslate"><span class="pre">Fifo0(24,0)</span></code> and <code class="docutils literal notranslate"><span class="pre">Fifo1(24,0)</span></code>. These hardened FIFOs are in the stream switch of AI Engine array tile 24_0. These FIFOs are inserted to prevent deadlock in the design (see <a class="reference internal" href="aie_hang_analysis.html"><span class="doc">AI Engine Hang Analysis</span></a>).</p>
<p>The input from the PL is connected to the ping-pong buffers <code class="docutils literal notranslate"><span class="pre">buf0</span></code> and <code class="docutils literal notranslate"><span class="pre">buf0d</span></code>, which are read by kernel <code class="docutils literal notranslate"><span class="pre">aie_dest1</span></code>. The output of kernel <code class="docutils literal notranslate"><span class="pre">aie_dest2</span></code> is connected to the PL through a stream connection.</p>
<p>The code for <code class="docutils literal notranslate"><span class="pre">aie_dest1</span></code> is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```
__attribute__ ((noinline)) void aie_dest1(input_window&lt;int32&gt; *in, 
    output_stream&lt;int32&gt; *out, output_window&lt;int32&gt; *outm){
	aie::vector&lt;int32,4&gt; tmp;
	for(int i=0;i&lt;8;i++)
	chess_prepare_for_pipelining
	{
		tmp=window_readincr_v&lt;4&gt;(in);
		writeincr(out,tmp);
		window_writeincr(outm,tmp);
	}
}
```
</pre></div>
</div>
<p>It reads 32 <code class="docutils literal notranslate"><span class="pre">int</span></code> values from the input window and writes them to the stream and window output. The <code class="docutils literal notranslate"><span class="pre">__attribute__</span> <span class="pre">((noinline))</span></code> command instructs the tool the keep the hierarchy of the kernel function.</p>
<p>The code for <code class="docutils literal notranslate"><span class="pre">aie_dest2</span></code> is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```
__attribute__ ((noinline)) void aie_dest2(input_stream&lt;int32&gt; *in, input_window&lt;int32&gt; *inm, 
    output_stream&lt;int32&gt; *outm){
	aie::vector&lt;int32,4&gt; tmp;
	aie::vector&lt;int32,4&gt; tmp2;
	for(int i=0;i&lt;8;i++)
	chess_prepare_for_pipelining
	{
		tmp=readincr_v&lt;4&gt;(in);
		tmp2=window_readincr_v&lt;4&gt;(inm);
		writeincr(outm,tmp+tmp2);
	}
}
```
</pre></div>
</div>
<p>It reads from the stream input and the window buffer, and writes to the stream output.</p>
</div>
<div class="section" id="graph-execution-model">
<h2>Graph Execution Model<a class="headerlink" href="#graph-execution-model" title="Permalink to this headline">¶</a></h2>
<ol>
<li><p>Use the following command to run AI Engine simulator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">aiesim</span>
</pre></div>
</div>
</li>
<li><p>Open the running result by accessing the following directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vitis_analyzer</span> <span class="n">aiesimulator_output</span><span class="o">/</span><span class="n">default</span><span class="o">.</span><span class="n">aierun_summary</span>
</pre></div>
</div>
<p><strong>Note:</strong> The <code class="docutils literal notranslate"><span class="pre">--dump-vcd</span></code> option is used by <code class="docutils literal notranslate"><span class="pre">aiesimulator</span></code> to dump the VCD file for trace.</p>
</li>
<li><p>Click <strong>Trace</strong> view in Vitis Analyzer. Zoom in to view the first few runs of the design:</p>
<p><img alt="Trace View" src="../../../../_images/figure21.PNG" /></p>
<p>This figure lists the following events and their dependencies:</p>
<p><strong>1:</strong> Tile 24_0 DMA s2mm channel 0 (<code class="docutils literal notranslate"><span class="pre">s2mm.Ch0.BD0.lock0</span></code>) starts. It acquires the lock of ping of input buffer (<code class="docutils literal notranslate"><span class="pre">buf0</span></code>) to <code class="docutils literal notranslate"><span class="pre">aie_dest1</span></code> and transfers data from the PL to <code class="docutils literal notranslate"><span class="pre">buf0</span></code>. Refer to <a class="reference external" href="./images/figure1.PNG">Graph View</a> for the position of the buffer in the graph.</p>
<p><strong>2:</strong> After DMA s2mm channel 0 completes, DMA s2mm channel 1 (<code class="docutils literal notranslate"><span class="pre">s2mm.CH1.BD1.lock1</span></code>) starts. It acquires the lock of pong of input buffer (<code class="docutils literal notranslate"><span class="pre">buf0d</span></code>) and transfers data from the PL to <code class="docutils literal notranslate"><span class="pre">buf0d</span></code>.</p>
<p><strong>3a:</strong> The <code class="docutils literal notranslate"><span class="pre">aie_dest1</span></code> kernel (in tile 25_0) acquires the lock of <code class="docutils literal notranslate"><span class="pre">buf0</span></code> (shown as <code class="docutils literal notranslate"><span class="pre">read</span> <span class="pre">lock</span> <span class="pre">allocated</span></code>).</p>
<p><strong>3b:</strong> <code class="docutils literal notranslate"><span class="pre">aie_dest1</span></code> acquires the lock of ping of output buffer (<code class="docutils literal notranslate"><span class="pre">buf1</span></code>) as well.</p>
<p><strong>4a:</strong> After <code class="docutils literal notranslate"><span class="pre">aie_dest1</span></code> acquires the locks of its input buffer (<code class="docutils literal notranslate"><span class="pre">buf0</span></code>) and output buffer (<code class="docutils literal notranslate"><span class="pre">buf1</span></code>), it starts. If any lock cannot be acquired, it will run into lock stall.</p>
<p><strong>4b:</strong> After tile 24_0 DMA s2mm channel 1 (<code class="docutils literal notranslate"><span class="pre">s2mm.CH1.BD1.lock1</span></code>) completes, it switches back to DMA s2mm channel 0 (<code class="docutils literal notranslate"><span class="pre">s2mm.CH0.BD1.lock0</span></code>). At first, <code class="docutils literal notranslate"><span class="pre">buf0</span></code> is still read by <code class="docutils literal notranslate"><span class="pre">aie_dest1</span></code> (<code class="docutils literal notranslate"><span class="pre">read</span> <span class="pre">lock</span> <span class="pre">allocated</span></code>), so it sticks at <code class="docutils literal notranslate"><span class="pre">DMA</span> <span class="pre">lock</span> <span class="pre">req</span></code> in red. After the read lock of the buffer is released, it acquires lock and starts data transfer.</p>
<p><strong>5:</strong> After <code class="docutils literal notranslate"><span class="pre">aie_dest1</span></code> completes, it releases the output buffer (<code class="docutils literal notranslate"><span class="pre">buf1</span></code>). The kernel <code class="docutils literal notranslate"><span class="pre">aie_dest2</span></code> acquires the lock of <code class="docutils literal notranslate"><span class="pre">buf1</span></code> (<code class="docutils literal notranslate"><span class="pre">read</span> <span class="pre">lock</span> <span class="pre">allocated</span></code>).</p>
<p><strong>6a:</strong> After the lock of <code class="docutils literal notranslate"><span class="pre">buf1</span></code> is acquired, <code class="docutils literal notranslate"><span class="pre">aie_dest2</span></code> starts.</p>
<p><strong>6b:</strong>. <code class="docutils literal notranslate"><span class="pre">aie_dest1</span></code> acquires the lock of <code class="docutils literal notranslate"><span class="pre">buf0d</span></code> (<code class="docutils literal notranslate"><span class="pre">read</span> <span class="pre">lock</span> <span class="pre">allocated</span></code>).</p>
<p><strong>6c:</strong> <code class="docutils literal notranslate"><span class="pre">aie_dest1</span></code> acquires the lock of <code class="docutils literal notranslate"><span class="pre">buf1d</span></code> (<code class="docutils literal notranslate"><span class="pre">write</span> <span class="pre">lock</span> <span class="pre">allocated</span></code>).</p>
<p><strong>7:</strong> After <code class="docutils literal notranslate"><span class="pre">aie_dest1</span></code> acquires the locks of its input buffer (<code class="docutils literal notranslate"><span class="pre">buf0d</span></code>) and output buffer (<code class="docutils literal notranslate"><span class="pre">buf1d</span></code>), it starts.</p>
<p><strong>8:</strong> After <code class="docutils literal notranslate"><span class="pre">aie_dest1</span></code> completes, it releases the output buffer (<code class="docutils literal notranslate"><span class="pre">buf1d</span></code>). Kernel <code class="docutils literal notranslate"><span class="pre">aie_dest2</span></code> acquires the lock of <code class="docutils literal notranslate"><span class="pre">buf1d</span></code> (<code class="docutils literal notranslate"><span class="pre">read</span> <span class="pre">lock</span> <span class="pre">allocated</span></code>).</p>
<p><strong>9:</strong> After the lock of <code class="docutils literal notranslate"><span class="pre">buf1d</span></code> is acquired, <code class="docutils literal notranslate"><span class="pre">aie_dest2</span></code> starts.</p>
<p><strong>Note:</strong> The stream interface does not need to acquire lock; it has inherent backward and forward pressure for data synchronization. Every lock acquire and release event has some cycles of overhead.</p>
</li>
</ol>
</div>
<div class="section" id="graph-performance-measurement">
<h2>Graph Performance Measurement<a class="headerlink" href="#graph-performance-measurement" title="Permalink to this headline">¶</a></h2>
<p>There are multiple ways to measure performance:</p>
<ol>
<li><p>The AI Engine simulator output contains a timestamp for each piece of output data. It is possible to make performance calculations both manually and by using scripts. For example, the output of the example (<code class="docutils literal notranslate"><span class="pre">aiesimulator_output/data/output.txt</span></code>) looks like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">T</span> <span class="mi">364</span> <span class="n">ns</span>
<span class="mi">2</span> 
<span class="o">......</span>
<span class="n">T</span> <span class="mi">15816</span> <span class="n">ns</span>
<span class="mi">30</span> 
</pre></div>
</div>
<p>The first samples come out in <code class="docutils literal notranslate"><span class="pre">364</span> <span class="pre">ns</span></code>, and the last samples come out in <code class="docutils literal notranslate"><span class="pre">15816</span> <span class="pre">ns</span></code>. The throughput therefore can be calculated as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">Total</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">15816</span> <span class="o">-</span> <span class="mi">364</span> <span class="o">=</span> <span class="mi">15452</span> <span class="n">ns</span> 
 <span class="n">Total</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="mi">128</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">=</span> <span class="mi">12800</span> <span class="nb">bytes</span>
 <span class="n">Throughput</span> <span class="o">=</span> <span class="mi">12800</span><span class="o">/</span><span class="p">(</span><span class="mi">15452</span><span class="o">*</span><span class="mf">1e-3</span><span class="p">)</span> <span class="o">=</span> <span class="mf">828.3</span> <span class="n">MB</span><span class="o">/</span><span class="n">s</span>
</pre></div>
</div>
<p>This method does <em>not</em> measure the latency of the first kernel execution to produce the output data: make sure that the graph runs a number large enough that this overhead can be neglected.</p>
</li>
<li><p>Xilinx provides event APIs for performance profiling purposes. These APIs use performance counters in shim tiles to do profiling. The following enumeration usages are introduced in this tutorial:</p>
<ul class="simple">
<li><p><strong>event::io_stream_start_to_bytes_transferred_cycles:</strong> This records the start of a running event with a performance counter, and records the event that a specific amount of data is transferred with another performance counter. The return number with this enumeration is therefore the total cycles required to receive that amount of data. The profiled stream should be stopped after this amount of data has been transferred.</p></li>
<li><p><strong>event::io_stream_running_event_count:</strong> This counts how many running events have occurred between <code class="docutils literal notranslate"><span class="pre">start_profiling</span></code> and <code class="docutils literal notranslate"><span class="pre">read_profiling</span></code>. It can be used to count how much data has been transferred, whether the graph is running infinitely or not.</p></li>
</ul>
<p>Take a look at <code class="docutils literal notranslate"><span class="pre">aie/graph.cpp</span></code>. The code to perform profiling is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">100</span><span class="p">;</span>
<span class="nb">int</span> <span class="n">bytes_per_iteration</span><span class="o">=</span><span class="mi">128</span><span class="p">;</span>
<span class="nb">int</span> <span class="n">total_bytes</span><span class="o">=</span><span class="n">bytes_per_iteration</span> <span class="o">*</span> <span class="n">iterations</span><span class="p">;</span>
<span class="n">event</span><span class="p">::</span><span class="n">handle</span> <span class="n">handle</span> <span class="o">=</span> <span class="n">event</span><span class="p">::</span><span class="n">start_profiling</span><span class="p">(</span><span class="o">*</span><span class="n">dout</span><span class="p">,</span> <span class="n">event</span><span class="p">::</span><span class="n">io_stream_start_to_bytes_transferred_cycles</span><span class="p">,</span> <span class="n">total_bytes</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="n">handle</span><span class="o">==</span><span class="n">event</span><span class="p">::</span><span class="n">invalid_handle</span><span class="p">){</span>
 <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;ERROR:Invalid handle. Only two performance counter in a AIE-PL interface tile</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
 <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">gr</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="n">gr</span><span class="o">.</span><span class="n">wait</span><span class="p">();</span>
<span class="n">long</span> <span class="n">long</span> <span class="n">cycle_count</span> <span class="o">=</span> <span class="n">event</span><span class="p">::</span><span class="n">read_profiling</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="n">std</span><span class="p">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s2">&quot;cycle count:&quot;</span><span class="o">&lt;&lt;</span><span class="n">cycle_count</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="p">::</span><span class="n">endl</span><span class="p">;</span>
<span class="n">event</span><span class="p">::</span><span class="n">stop_profiling</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
<span class="n">double</span> <span class="n">throughput</span> <span class="o">=</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span><span class="n">total_bytes</span> <span class="o">/</span> <span class="p">(</span><span class="n">cycle_count</span> <span class="o">*</span> <span class="mf">1e-3</span><span class="p">);</span> 
<span class="n">printf</span><span class="p">(</span><span class="s2">&quot;Throughput of the graph: </span><span class="si">%f</span><span class="s2"> MB/s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span><span class="n">throughput</span><span class="p">);</span>
</pre></div>
</div>
<p>The output of AI Engine simulator looks like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cycle</span> <span class="n">count</span><span class="p">:</span><span class="mi">15414</span>
<span class="n">Throughput</span> <span class="n">of</span> <span class="n">the</span> <span class="n">graph</span><span class="p">:</span> <span class="mf">830.413909</span> <span class="n">MB</span><span class="o">/</span><span class="n">s</span>
</pre></div>
</div>
<p>The event API can be applied in AI Engine simulator, hardware emulation, and hardware flows.</p>
</li>
<li><p>The performance result can also be found in the AI Engine simulator profile report. Add the <code class="docutils literal notranslate"><span class="pre">--profile</span></code> option to <code class="docutils literal notranslate"><span class="pre">aiesimulator</span></code>, open Vitis Analyzer, and open the <strong>Profile</strong> view. The profile result can be viewed as shown in the following figure:</p>
<p><img alt="Profile View" src="../../../../_images/figure31.PNG" /></p>
<p>Kernel <code class="docutils literal notranslate"><span class="pre">aie_dest1</span></code> takes an average of 102 cycles for one iteration. The <code class="docutils literal notranslate"><span class="pre">main</span></code> function takes 5303 cycles for 100 iterations of the graph. This is around 53 cycles of overhead for each iteration of the graph. This overhead includes the lock acquires of the window buffers and the overhead of API calls.</p>
<p>The performance of <code class="docutils literal notranslate"><span class="pre">aie_dest1</span></code> is bounded by the stream interface throughput. The theoretical limit is up to 4 bytes a cycle (4 GB/s), and there are 128 bytes of input for one run. This means that it at least has 32 cycles for the main loop, although in actuality it takes 102 cycles. This indicates that the loop is not well pipelined.</p>
</li>
<li><p>You can check performance-related events to see if they match expectations. For example, check the event <code class="docutils literal notranslate"><span class="pre">PL_TO_SHIM</span></code> to see if the PL can send 32 bits of data per cycle, which is the best achievable performance for a single stream interface. Look for the <code class="docutils literal notranslate"><span class="pre">PL_TO_SHIM</span></code> event in <strong>Trace</strong> view in Vitis Analyzer:</p>
<p><img alt="PL_TO_SHIM" src="../../../../_images/figure41.PNG" /></p>
<p>Search it for multiple times. When it is stable, it can be seen that every four cycles, it happens once. This is because the frequency of the PL has been set at 250 MHz by the option <code class="docutils literal notranslate"><span class="pre">--pl-freq=250</span></code> for the AI Engine compiler.</p>
<p>From a best performance and best resource perspective, you might select a 64-bit interface at 500 MHz if timing allows. If not, it is possible to have the PL running at 250 MHz with a 128-bit width interface.</p>
<p><strong>Note:</strong> The interface takes two channels in the AI Engine-PL interface tiles.</p>
</li>
<li><p>The following methods are introduced in <a class="reference external" href="https://github.com/Xilinx/Vitis-Tutorials/blob/master/AI_Engine_Development/Feature_Tutorials/02-using-gmio/perf_profile_aie_gmio.md">AI Engine Performance Profile</a>:</p>
<ul class="simple">
<li><p>Profiling by C++ class API</p></li>
<li><p>Profiling by AI Engine cycles from AI Engine kernels</p></li>
<li><p>Profiling by event API</p></li>
</ul>
</li>
</ol>
</div>
<div class="section" id="design-optimization-considerations">
<h2>Design Optimization Considerations<a class="headerlink" href="#design-optimization-considerations" title="Permalink to this headline">¶</a></h2>
<p>In this section, the reference design is in <code class="docutils literal notranslate"><span class="pre">testcase_dmafifo_opt</span></code>. From performing the above analysis, it can be seen that the bottleneck of this design contains the following issues:</p>
<ul>
<li><p>The interface bandwidth is not optimal. The design uses a PLIO width of 32 bits running at 250 MHz. Change it to 128 bits running at 250 MHz. The relevant code is in <code class="docutils literal notranslate"><span class="pre">aie/graph.h</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ow">in</span><span class="o">=</span><span class="n">input_plio</span><span class="p">::</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;Datain0&quot;</span><span class="p">,</span> <span class="n">plio_128_bits</span><span class="p">,</span>  <span class="s2">&quot;data/input.txt&quot;</span><span class="p">);</span>
<span class="n">dataout</span><span class="o">=</span><span class="n">output_plio</span><span class="p">::</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;Dataout0&quot;</span><span class="p">,</span> <span class="n">plio_128_bits</span><span class="p">,</span>  <span class="s2">&quot;data/output.txt&quot;</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p>The overhead of the graph iterations is too large. The hierarchy of the design should not be touched. Increase the window buffer size from 128 bits to 4096 bits. To avoid deadlock, the FIFO size also needs to be increased. The relevant code is in <code class="docutils literal notranslate"><span class="pre">aie/graph.h</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">connect</span><span class="o">&lt;</span> <span class="n">window</span><span class="o">&lt;</span><span class="mi">4096</span><span class="o">&gt;</span> <span class="o">&gt;</span><span class="n">net0</span><span class="p">(</span><span class="ow">in</span><span class="p">,</span> <span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="ow">in</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="n">connect</span><span class="o">&lt;</span> <span class="n">stream</span> <span class="o">&gt;</span><span class="n">net1</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">out</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="ow">in</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="n">connect</span><span class="o">&lt;</span> <span class="n">window</span><span class="o">&lt;</span><span class="mi">4096</span><span class="o">&gt;</span> <span class="o">&gt;</span><span class="n">net2</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">out</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="ow">in</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="n">connect</span><span class="o">&lt;</span> <span class="n">stream</span> <span class="o">&gt;</span><span class="n">net3</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">out</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">dataout</span><span class="p">);</span>
<span class="n">fifo_depth</span><span class="p">(</span><span class="n">net1</span><span class="p">)</span><span class="o">=</span><span class="mi">1024</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Note:</strong> When the FIFO depth is large, the DMA FIFO is used. <em>Do not</em> set the FIFO depth to larger than (<em>or equal to</em>) 8192 for a single DMA FIFO.</p>
</li>
<li><p>The kernel is not well pipelined. As well as increasing the loop count to deal with more data, more instructions should be added in the loop body and a <code class="docutils literal notranslate"><span class="pre">__restrict</span></code> keyword should be added to the ports to make the tool schedule instructions more freely. The optimized code for <code class="docutils literal notranslate"><span class="pre">aie_dest1</span></code> is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">__attribute__</span> <span class="p">((</span><span class="n">noinline</span><span class="p">))</span> <span class="n">void</span> <span class="n">aie_dest1</span><span class="p">(</span><span class="n">input_window</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">__restrict</span> <span class="ow">in</span><span class="p">,</span> 
        <span class="n">output_stream</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">__restrict</span> <span class="n">out</span><span class="p">,</span> <span class="n">output_window</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">__restrict</span> <span class="n">outm</span><span class="p">){</span>
	<span class="n">aie</span><span class="p">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">int32</span><span class="p">,</span><span class="mi">4</span><span class="o">&gt;</span> <span class="n">tmp</span><span class="p">;</span>
	<span class="k">for</span><span class="p">(</span><span class="nb">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">128</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
	<span class="n">chess_prepare_for_pipelining</span>
	<span class="p">{</span>
		<span class="n">tmp</span><span class="o">=</span><span class="n">window_readincr_v</span><span class="o">&lt;</span><span class="mi">4</span><span class="o">&gt;</span><span class="p">(</span><span class="ow">in</span><span class="p">);</span>
		<span class="n">writeincr</span><span class="p">(</span><span class="n">out</span><span class="p">,</span><span class="n">tmp</span><span class="p">);</span>
		<span class="n">window_writeincr</span><span class="p">(</span><span class="n">outm</span><span class="p">,</span><span class="n">tmp</span><span class="p">);</span>
		<span class="n">tmp</span><span class="o">=</span><span class="n">window_readincr_v</span><span class="o">&lt;</span><span class="mi">4</span><span class="o">&gt;</span><span class="p">(</span><span class="ow">in</span><span class="p">);</span>
		<span class="n">writeincr</span><span class="p">(</span><span class="n">out</span><span class="p">,</span><span class="n">tmp</span><span class="p">);</span>
		<span class="n">window_writeincr</span><span class="p">(</span><span class="n">outm</span><span class="p">,</span><span class="n">tmp</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Similar optimization is done for <code class="docutils literal notranslate"><span class="pre">aie_dest2</span></code>. For more information about loop analysis and optimization, refer to the <em>AI Engine Kernel Coding Best Practices Guide</em>.</p>
</li>
</ul>
<p>After making these optimizations, run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```
make aiesim
```
</pre></div>
</div>
<p>It can be seen that the design performance can be increased from around 828 MB/s to around 3748 MB/s. This is approaching the theoretical limit of the design (4 GB/s).</p>
<p>Next, run the design in hardware emulation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```
make run_hw_emu
```
</pre></div>
</div>
<p>In QEMU, run the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```
cd /mnt/*1
./host.exe a.xclbin
```
</pre></div>
</div>
<p>Build the design for hardware:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```
make package TARGET=hw
```
</pre></div>
</div>
<p>The performance in hardware is similar:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```
cycle count:109435
Throughput of the graph: 3742.86 MB/s
```
</pre></div>
</div>
<div class="section" id="conclusion">
<h3>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h3>
<p>This example has shown a number of different ways to do performance analysis and profiling. Some optimization skills have also been introduced. In the next section, take a look at how deadlocks might occur, and how to analyze them: see <a class="reference internal" href="aie_hang_analysis.html"><span class="doc">AI Engine Deadlock Analysis</span></a>.</p>
</div>
</div>
</div>
<div class="section" id="revision-history">
<h1>Revision History<a class="headerlink" href="#revision-history" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>July 2021: Initial release.</p></li>
</ul>
<p>© Copyright 2021 Xilinx, Inc.</p>
<p>Licensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">apache</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">licenses</span><span class="o">/</span><span class="n">LICENSE</span><span class="o">-</span><span class="mf">2.0</span>
</pre></div>
</div>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on January 18, 2022.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2019-2022, Xilinx, Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>