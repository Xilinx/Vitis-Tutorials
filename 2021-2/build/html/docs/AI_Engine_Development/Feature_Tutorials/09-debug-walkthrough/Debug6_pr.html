


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../../../_static/js/Searchbox.min.js"></script>
	<script type="text/javascript" src="../../../../_static/js/header-footer.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home" alt="Documentation Home"> Vitis™ Tutorials
          

          
          </a>

          
            
            
              <div class="version">
                2021.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">日本語版</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/master/docs-jp/index.html">Master</a></li>
</ul>
<p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Getting_Started/Vitis-Getting-Started.html">Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Acceleration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Hardware_Acceleration/Hardware-Acceleration.html">Hardware Acceleration</a></li>
</ul>
<p class="caption"><span class="caption-text">AI Engine</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../AI_Engine_Development.html">AI Engine Development</a></li>
</ul>
<p class="caption"><span class="caption-text">Platforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Vitis_Platform_Creation/Vitis_Platform_Creation.html">Vitis Platform Creation</a></li>
</ul>
<p class="caption"><span class="caption-text">Other Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2021-1/build/html/index.html">2021.1</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-2/docs/index.html">2020.2</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-1/docs/README.html">2020.1</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../../../_sources/docs/AI_Engine_Development/Feature_Tutorials/09-debug-walkthrough/Debug6_pr.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Vitis™ Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/docs/AI_Engine_Development/Feature_Tutorials/09-debug-walkthrough/Debug6_pr.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <table>
 <tr>
   <td align="center"><img src="https://www.xilinx.com/content/dam/xilinx/imgs/press/media-kits/corporate/xilinx-logo.png" width="30%"/><h1>AI Engine Debug Walkthrough Tutorial - From Simulation to Hardware</h1>
   </td>
 </tr>
 <tr>
 <td align="center"><h1>Profiling Graph Inputs and Outputs with Profiling APIs</h1>
 </td>
 </tr>
</table><div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p>In this tutorial you will learn how to:</p>
<ul class="simple">
<li><p>Add profiling APIs in graph and PS code to calculate design performance.</p></li>
<li><p>Generate VCD file to view design information.</p></li>
<li><p>Cross check between calculated performance with profiling APIs and vitis_analyzer trace view.</p></li>
</ul>
</div>
<div class="section" id="profiling-apis">
<h1>Profiling APIs<a class="headerlink" href="#profiling-apis" title="Permalink to this headline">¶</a></h1>
<p>Start profiling API,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/// Start profiling and acquire resources needed <span class="k">for</span> profiling. Should be called after graph::init<span class="o">()</span>.
/// @param io Plarform PLIO or GMIO object.
/// @param option io_profiling_option enum.
/// @param value Optional value <span class="k">for</span> the specified option.
/// @return Return event::handle to be used by read_profiling and stop_profiling. Return event::invalid_handle <span class="k">for</span> error conditions or unsupported use cases.
static handle start_profiling<span class="o">(</span>IoAttr<span class="p">&amp;</span> io, io_profiling_option option, uint32 <span class="nv">value</span> <span class="o">=</span> <span class="m">0</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<p>Read profiling API,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/// Read profiling.
/// @param h event::handle returned from start_profiling.
/// @return Profiling value.
static long long read_profiling<span class="o">(</span>handle h<span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<p>Stop profiling API,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/// Stop profiling and release resources needed <span class="k">for</span> profiling.
/// @param h event::handle returned from start_profiling.
static void stop_profiling<span class="o">(</span>handle h<span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<p><a class="reference external" href="#1-Profiling-APIs-with-AIE-Emulator">1. Profiling APIs with AIE Emulator</a></p>
<p><a class="reference external" href="#2-Profile-APIs-with-HW-Emulator">2. Profiling APIs with HW Emulator</a></p>
<p><a class="reference external" href="#3-Profile-APIs-on-HW">3. Profiling APIs on HW</a></p>
<p><a class="reference external" href="#4-Cross-Check-I/O-Performance-values-with-VCD">4. Cross Check I/O Performance values with VCD</a></p>
</div>
<div class="section" id="profiling-apis-with-aie-emulator">
<h1>1. Profiling APIs with AIE Emulator<a class="headerlink" href="#profiling-apis-with-aie-emulator" title="Permalink to this headline">¶</a></h1>
<div class="section" id="step-1-1-download-the-project">
<h2>Step 1.1 Download the Project<a class="headerlink" href="#step-1-1-download-the-project" title="Permalink to this headline">¶</a></h2>
<p>Clone the project source from git repository and unzip the zip file.</p>
</div>
<div class="section" id="step-1-2-prepare-profiling-apis-applied-graph-code">
<h2>Step 1.2 Prepare Profiling APIs applied graph code<a class="headerlink" href="#step-1-2-prepare-profiling-apis-applied-graph-code" title="Permalink to this headline">¶</a></h2>
<p>Use this tutorial’s graph.cpp.profile_api that contains AIE profiling APIs.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="si">${</span><span class="nv">DOWNLOAD_PATH</span><span class="si">}</span>/AI_Engine_Development/Feature_Tutorials/09-debug-walkthrough/aie
cp graph.cpp.profile_api graph.cpp
<span class="nb">cd</span> ..
cp Makefile.emu Makefile
make libadf.a
</pre></div>
</div>
</div>
<div class="section" id="step-1-3-run-aie-emulator">
<h2>Step 1.3 Run AIE Emulator<a class="headerlink" href="#step-1-3-run-aie-emulator" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aiesimulator --pkg-dir<span class="o">=</span>./Work --i<span class="o">=</span>. --profile
</pre></div>
</div>
</div>
<div class="section" id="step-1-4-expected-result">
<h2>Step 1.4 Expected Result<a class="headerlink" href="#step-1-4-expected-result" title="Permalink to this headline">¶</a></h2>
<img src="images/pr_aie_perf.png" width="600"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>vitis_analyzer ./aiesimulator_output/default.aierun_summary
</pre></div>
</div>
</div>
</div>
<div class="section" id="profiling-apis-with-hw-emulator">
<h1>2. Profiling APIs with HW Emulator<a class="headerlink" href="#profiling-apis-with-hw-emulator" title="Permalink to this headline">¶</a></h1>
<div class="section" id="step-2-1-prepare-profiling-apis-applied-host-code-and-makefile">
<h2>Step 2.1 Prepare profiling APIs applied host code and Makefile<a class="headerlink" href="#step-2-1-prepare-profiling-apis-applied-host-code-and-makefile" title="Permalink to this headline">¶</a></h2>
<p>After step 1.1 completed.
Use this tutorial’s host.cpp.profile_api that contains AIE profiling APIs and Makefile for HW Emulation.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="si">${</span><span class="nv">DOWNLOAD_PATH</span><span class="si">}</span>/AI_Engine_Development/Feature_Tutorials/09-debug-walkthrough/sw
cp host.cpp.profile_api host.cpp
<span class="nb">cd</span> ..
cp Makefile.emu Makefile
</pre></div>
</div>
</div>
<div class="section" id="step-2-2-build-the-design">
<h2>Step 2.2 Build the Design<a class="headerlink" href="#step-2-2-build-the-design" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make
</pre></div>
</div>
</div>
<div class="section" id="step-2-3-run-hardware-emulator">
<h2>Step 2.3 Run Hardware Emulator<a class="headerlink" href="#step-2-3-run-hardware-emulator" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./launch_hw_emu.sh
</pre></div>
</div>
</div>
<div class="section" id="step-2-4-run-application">
<h2>Step 2.4 Run Application<a class="headerlink" href="#step-2-4-run-application" title="Permalink to this headline">¶</a></h2>
<p>After Petalinux boots up.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /mnt/sd-mmcblk0p1
./host.exe a.xclbin
</pre></div>
</div>
<img src="images/pr_hw_emu_perf.png" width="600"></div>
</div>
<div class="section" id="profiling-apis-on-hw">
<h1>3. Profiling APIs on HW<a class="headerlink" href="#profiling-apis-on-hw" title="Permalink to this headline">¶</a></h1>
<div class="section" id="step-3-1-prepare-hw-makefile">
<h2>Step 3.1 Prepare HW Makefile<a class="headerlink" href="#step-3-1-prepare-hw-makefile" title="Permalink to this headline">¶</a></h2>
<p>After step 1.1 completed.
Use this tutorial’s Makefile for Hardware.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="si">${</span><span class="nv">DOWNLOAD_PATH</span><span class="si">}</span>/AI_Engine_Development/Feature_Tutorials/09-debug-walkthrough
cp Makefile.profile_hw Makefile
make
</pre></div>
</div>
</div>
<div class="section" id="step-3-2-flash-sd-card">
<h2>Step 3.2 Flash SD card<a class="headerlink" href="#step-3-2-flash-sd-card" title="Permalink to this headline">¶</a></h2>
<p>Flash generated sd_card.img to SD card.</p>
</div>
<div class="section" id="step-3-3-boots-up-vck190-board">
<h2>Step 3.3 Boots up VCK190 board<a class="headerlink" href="#step-3-3-boots-up-vck190-board" title="Permalink to this headline">¶</a></h2>
<p>Plug in flashed completed SD card to vck190 board’s sd slot.
Power up the vck190 board.</p>
</div>
<div class="section" id="step-3-4-run-the-application">
<h2>Step 3.4 Run the Application<a class="headerlink" href="#step-3-4-run-the-application" title="Permalink to this headline">¶</a></h2>
<p>After vck190 board boots up and ready to accepts commands with Linux prompt, issue these command from terminal.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /mnt/sd-mmcblk0p1
./host.exe a.xclbin
</pre></div>
</div>
</div>
<div class="section" id="step-3-5-expected-result">
<h2>Step 3.5 Expected result<a class="headerlink" href="#step-3-5-expected-result" title="Permalink to this headline">¶</a></h2>
<img src="images/pr_hw_perf.png" width="600"><p>Note: Due to slower memory access, hardware and hardware emulation performance values are not optimized and less than AIE simulation.</p>
</div>
</div>
<div class="section" id="cross-check-i-o-performance-values-with-vcd">
<h1>4. Cross Check I/O Performance values with VCD<a class="headerlink" href="#cross-check-i-o-performance-values-with-vcd" title="Permalink to this headline">¶</a></h1>
<div class="section" id="step-4-1-vcd-generation">
<h2>Step 4.1 VCD generation<a class="headerlink" href="#step-4-1-vcd-generation" title="Permalink to this headline">¶</a></h2>
<p>Command to generate AIE emulation VCD file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aiesimulator --pkg-dir<span class="o">=</span>./Work --i<span class="o">=</span>. --dump-vcd<span class="o">=</span>foo
</pre></div>
</div>
<p>Command to generate hardware emulation VCD file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./launch_hw_emu.sh -add-env <span class="nv">AIE_COMPILER_WORKDIR</span><span class="o">=</span><span class="si">${</span><span class="nv">PROJECT_FULL_PATH</span><span class="si">}</span>/Work -aie-sim-options <span class="si">${</span><span class="nv">PROJECT_FULL_PATH</span><span class="si">}</span>/aiesim_options.txt
</pre></div>
</div>
<p>Where aiesim_options.txt content is</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">AIE_DUMP_VCD</span><span class="o">=</span>foo
</pre></div>
</div>
<p>Follow step 2.4 to run application.</p>
</div>
<div class="section" id="step-4-2-launch-vitis-analyzer-to-view-trace">
<h2>Step 4.2 Launch vitis_analyzer to view trace<a class="headerlink" href="#step-4-2-launch-vitis-analyzer-to-view-trace" title="Permalink to this headline">¶</a></h2>
<p>Launch vitis_analyser for AIE emulation.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>vitis_analyzer ./aiesimulator_output/default.aierun_summary
</pre></div>
</div>
<p>Launch vitis_analyser for hardware emulation.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>vitis_analyzer ./sim/behav_waveform/xsim/default.aierun_summary
</pre></div>
</div>
<p>Hardware event trace steps are available at https://gitenterprise.xilinx.com/swm/Vitis-Tutorials/blob/2021.2_next/AI_Engine_Development/Feature_Tutorials/09-debug-walkthrough/Debug4_et.md</p>
</div>
<div class="section" id="step-4-3-locate-profiled-interface">
<h2>Step 4.3 Locate profiled interface<a class="headerlink" href="#step-4-3-locate-profiled-interface" title="Permalink to this headline">¶</a></h2>
<p>After default.aierun_summary file is opened with Vitis_analyzer, select <code class="docutils literal notranslate"><span class="pre">Graph</span></code> view, locate the output file <code class="docutils literal notranslate"><span class="pre">data/ublf_out0.txt</span></code> that associated with <code class="docutils literal notranslate"><span class="pre">attr_o_ulbfo0</span></code> PLIO from host.cpp.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>PLIO *attr_o_ulbfo0  <span class="o">=</span> new PLIO<span class="o">(</span><span class="s2">&quot;ulbfo0&quot;</span>,  plio_64_bits, <span class="s2">&quot;data/ulbf_out0.txt&quot;</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
<p>This PLIO is configured using profile API for output performance measurement. This can be found from host.cpp</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>    event::handle <span class="nv">handle1</span> <span class="o">=</span> event::start_profiling<span class="o">(</span>*attr_o_ulbfo0,  event::io_stream_start_to_bytes_transferred_cycles, OUT_LEN*sizeof<span class="o">(</span>cint16<span class="o">)</span>*2<span class="o">)</span><span class="p">;</span>
...
    <span class="k">if</span> <span class="o">(</span>handle1 !<span class="o">=</span> event::invalid_handle<span class="o">)</span>
    <span class="o">{</span>   
        <span class="nv">cycle_count1</span> <span class="o">=</span> event::read_profiling<span class="o">(</span>handle1<span class="o">)</span><span class="p">;</span>
    <span class="o">}</span>
...
    <span class="k">if</span> <span class="o">(</span>cycle_count1<span class="o">)</span>
    <span class="o">{</span>
        double <span class="nv">throughput1</span> <span class="o">=</span> <span class="o">(</span>double<span class="o">)</span>OUT_LEN*2/<span class="o">(</span>cycle_count1 * 1e-9<span class="o">)</span><span class="p">;</span> //samples per second
        printf<span class="o">(</span><span class="s2">&quot; Output: Throughput %f samples\n&quot;</span>, throughput1<span class="o">)</span><span class="p">;</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        printf<span class="o">(</span><span class="s2">&quot;cycle_count1 is ZERO!\n&quot;</span><span class="o">)</span><span class="p">;</span>
    <span class="o">}</span>
</pre></div>
</div>
<img src="images/pr_aie_perf_tile.png" width="900">
Select the tile links to the output file by moving cursor on top of the tile.</div>
<div class="section" id="step-4-4-locate-tile">
<h2>Step 4.4 Locate tile<a class="headerlink" href="#step-4-4-locate-tile" title="Permalink to this headline">¶</a></h2>
<p>Switch to <code class="docutils literal notranslate"><span class="pre">Trace</span></code> view, Locate tile(21,0).</p>
</div>
<div class="section" id="step-4-5-use-tool-to-measure-execution-time">
<h2>Step 4.5 Use tool to measure execution time<a class="headerlink" href="#step-4-5-use-tool-to-measure-execution-time" title="Permalink to this headline">¶</a></h2>
<p>Move marker to beginning of kernel execution from an iteration. Add second marker and move the second marker to beginning of another iteration.</p>
<img src="images/pr_aie_perf_vcd.png" width="900"></div>
<div class="section" id="step-4-6-performance-calculation">
<h2>Step 4.6 Performance Calculation<a class="headerlink" href="#step-4-6-performance-calculation" title="Permalink to this headline">¶</a></h2>
<p>Above example indicates 9.400 microseconds (us) is used for 10 iterations execution time. Each iteration execution time is 0.94 us or 940 nanoseconds (ns) in average.</p>
<p>Per output file <code class="docutils literal notranslate"><span class="pre">ulbf_out0.txt</span></code>, 38400 lines for 100 iterations. Each iteration processes and outputs 384 lines. Each line has 2 cint16 samples.</p>
<p>Performance calculation:</p>
<p>1,000,000,000(AI engine frequency in HZ) / 940(clock cycles each iteration) x 384(lines each iteration) x 2(samples per line) = 817,021,276.59(samples/second). This number is close to profiling API reported, 818,527,715.90 samples/s.</p>
</div>
</div>
<div class="section" id="limitations">
<h1>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h1>
<p>Due to limited AIE performance counters, calling AIE profiling APIs may return errors. Host code is required to check profiling APIs’ return code to ensure correctness of profiling APIs.</p>
</div>
<div class="section" id="support">
<h1>Support<a class="headerlink" href="#support" title="Permalink to this headline">¶</a></h1>
<p>GitHub issues will be used for tracking requests and bugs. For questions go to <a class="reference external" href="https://support.xilinx.com/">support.xilinx.com</a>.</p>
</div>
<div class="section" id="license">
<h1>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h1>
<p>Licensed under the Apache License, Version 2.0 (the “License”);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">apache</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">licenses</span><span class="o">/</span><span class="n">LICENSE</span><span class="o">-</span><span class="mf">2.0</span>
</pre></div>
</div>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
<p align="center"><sup>XD005 | &copy; Copyright 2021 Xilinx, Inc.</sup></p></div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on January 18, 2022.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2019-2022, Xilinx, Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>