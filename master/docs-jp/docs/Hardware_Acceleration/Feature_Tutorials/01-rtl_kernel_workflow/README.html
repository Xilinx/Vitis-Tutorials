<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
  <title>Getting Started with RTL Kernels &mdash; Vitis™ Tutorials 2022.1 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Mixing C++ and RTL Kernels" href="../02-mixing-c-rtl-kernels/README.html" />
    <link rel="prev" title="Using Aurora IP in Alveo with Vitis Flow" href="../../Design_Tutorials/08-alveo_aurora_kernel/README.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../../../index.html" class="icon icon-home"> Vitis™ Tutorials
            <img src="../../../../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2022.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">日本語版</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/master/docs-jp/index.html">Main</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Getting_Started/Vitis-Getting-Started.html">Getting Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Acceleration</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../Hardware-Acceleration.html">Hardware Acceleration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../Hardware-Acceleration.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Hardware-Acceleration.html#design-tutorials">Design Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../Hardware-Acceleration.html#feature-tutorials">Feature Tutorials</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Getting Started with RTL Kernels</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tutorial-overview">Tutorial Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#before-you-begin">Before You Begin</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requirements-for-using-an-rtl-design-as-an-rtl-kernel">Requirements for Using an RTL Design as an RTL Kernel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../02-mixing-c-rtl-kernels/README.html">Mixing C and RTL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03-dataflow_debug_and_optimization/README.html">Dataflow Debug and Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../04-mult-ddr-banks/README.html">Using Multiple DDR Banks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05-using-multiple-cu/README.html">Using Multiple Compute Units</a></li>
<li class="toctree-l3"><a class="reference internal" href="../06-controlling-vivado-implementation/README.html">Controlling Vivado Implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../07-using-hbm/README.html">Optimizing for HBM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08-using-hostmem/README.html">Host Memory Access</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08-using-hostmem/README.html#xrt-and-platform-version">XRT and Platform version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08-using-hostmem/README.html#tutorial-description">Tutorial Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08-using-hostmem/README.html#running-the-application">Running the application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08-using-hostmem/README.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../09-using-ethernet-on-alveo/README.html">Using GT Kernels and Ethernet IPs on Alveo</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AI Engine</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../AI_Engine_Development/AI_Engine_Development.html">AI Engine Development</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Platforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Vitis_Platform_Creation/Vitis_Platform_Creation.html">Vitis Platform Creation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2021-2/build/html/index.html">2021.2</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2021-1/build/html/index.html">2021.1</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-2/docs/index.html">2020.2</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-1/docs/README.html">2020.1</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Vitis™ Tutorials</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../Hardware-Acceleration.html">Vitis Hardware Acceleration</a> &raquo;</li>
      <li>Getting Started with RTL Kernels</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/docs/Hardware_Acceleration/Feature_Tutorials/01-rtl_kernel_workflow/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <table width="100%">
 <tr width="100%">
    <td align="center"><img src="https://raw.githubusercontent.com/Xilinx/Image-Collateral/main/xilinx-logo.png" width="30%"/><h1>Hardware Acceleration Tutorials</h1>
    <a href="https://www.xilinx.com/products/design-tools/vitis.html">See Vitis™ Development Environment on xilinx.com</a>
    </td>
 </tr>
</table><div class="section" id="getting-started-with-rtl-kernels">
<h1>Getting Started with RTL Kernels<a class="headerlink" href="#getting-started-with-rtl-kernels" title="Permalink to this heading">¶</a></h1>
<p><em><strong>Version: Vitis 2022.1</strong></em></p>
<div class="section" id="tutorial-overview">
<h2>Tutorial Overview<a class="headerlink" href="#tutorial-overview" title="Permalink to this heading">¶</a></h2>
<p>In the Vitis application acceleration development flow, as explained in <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1393-vitis-application-acceleration/PL-Kernel-Properties">Kernel Properties</a>, RTL kernels can be either XRT-managed kernels adhering to XRT requirements of the <code class="docutils literal notranslate"><span class="pre">ap_ctrl_chain</span></code> or <code class="docutils literal notranslate"><span class="pre">ap_ctrl_hs</span></code> control protocols for execution control, or can be user-managed kernels that do not meet this standard but rather implement any number of user-defined control schemes specified in the RTL design. You can use an existing execution mechanism in an existing RTL design, or design your RTL to support the XRT control scheme.</p>
<p>In this tutorial you will examine the process of packaging an existing RTL design with a user-managed control scheme into an RTL kernel, and review the host application requirements to integrate that kernel into your accelerated application.</p>
<p>This tutorial includes an RTL design containing a simple vector accumulation example that performs a <code class="docutils literal notranslate"><span class="pre">B[i]</span> <span class="pre">=</span> <span class="pre">A[i]+B[i]</span></code> operation, which you will build into a Xilinx compiled object file (.xo) for use in the Vitis flow. It also contains a host application using the <a class="reference external" href="https://xilinx.github.io/XRT/master/html/xrt_native_apis.html">XRT native API</a> which interacts with the kernel. The host application:</p>
<ol class="simple">
<li><p>loads the device executable (<code class="docutils literal notranslate"><span class="pre">.xclbin</span></code>) into the Xilinx device on the accelerator platform</p></li>
<li><p>identifies the kernel and implements the user-designed control structure</p></li>
<li><p>creates read/write buffers to transfer data between global memory and the Xilinx device</p></li>
<li><p>starts the RTL kernel on the accelerator target by writing to a register, and waits for the kernel to signal its completion by reading a register</p></li>
<li><p>reads back the data to examine the results</p></li>
</ol>
<p>Using these reference files, the tutorial guides you through the process of building and running your project.</p>
</div>
<div class="section" id="before-you-begin">
<h2>Before You Begin<a class="headerlink" href="#before-you-begin" title="Permalink to this heading">¶</a></h2>
<p>The labs in this tutorial use:</p>
<ul class="simple">
<li><p>BASH Linux shell commands</p></li>
<li><p>2022.1 Vitis core development kit release and the <em>xilinx_u200_gen3x16_xdma_2_202110_1</em> platform.</p></li>
<li><p>If necessary, the tutorial can be easily extended to other versions and platforms.</p></li>
</ul>
<blockquote>
<div><p><strong>IMPORTANT:</strong></p>
<ul class="simple">
<li><p>Before running any of the examples, make sure you have the Vitis core development kit installed as described in <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1393-vitis-application-acceleration/Installation">Installation</a>.</p></li>
<li><p>If you run applications on Xilinx® Alveo™ Data Center accelerator cards, ensure the card and software drivers have been correctly installed by following the instructions on the <a class="reference external" href="https://www.xilinx.com/products/boards-and-kits/alveo.html">Alveo Portfolio page</a>.</p></li>
</ul>
</div></blockquote>
<div class="section" id="accessing-the-tutorial-reference-files">
<h3>Accessing the Tutorial Reference Files<a class="headerlink" href="#accessing-the-tutorial-reference-files" title="Permalink to this heading">¶</a></h3>
<ol class="simple">
<li><p>To access the reference files, type the following into a terminal: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/Xilinx/Vitis-Tutorials</span></code></p></li>
<li><p>Navigate to <code class="docutils literal notranslate"><span class="pre">Vitis-Tutorials/Hardware_Acceleration/Feature_Tutorials/01-rtl_kernel_workflow/reference-files</span></code> directory.</p></li>
</ol>
</div>
</div>
<div class="section" id="requirements-for-using-an-rtl-design-as-an-rtl-kernel">
<h2>Requirements for Using an RTL Design as an RTL Kernel<a class="headerlink" href="#requirements-for-using-an-rtl-design-as-an-rtl-kernel" title="Permalink to this heading">¶</a></h2>
<p>To use an RTL kernel within the Vitis IDE, it must meet both the Vitis core development kit execution model and the hardware interface requirements as described in <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1393-vitis-application-acceleration/RTL-Kernels">RTL Kernels</a> in the Vitis Application Acceleration Development Flow documentation (UG1393).</p>
<p>RTL kernels can use the same software interface and execution model as C/C++ software functions. They are seen by the host application as functions with a void return value, scalar and pointer arguments.</p>
<ul class="simple">
<li><p>It must start when called.</p></li>
<li><p>It is responsible for processing data to provide the necessary results.</p></li>
<li><p>It must send a notification when processing is complete.</p></li>
</ul>
<p>For instance, the function signature for the RTL kernel in this tutorial:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">vadd_A_B</span><span class="p">(</span><span class="nb">int</span> <span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="nb">int</span> <span class="o">*</span><span class="n">b</span><span class="p">,</span> <span class="nb">int</span> <span class="n">scalar</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="vector-accumulate-rtl-ip">
<h3>Vector-Accumulate RTL IP<a class="headerlink" href="#vector-accumulate-rtl-ip" title="Permalink to this heading">¶</a></h3>
<p>For this tutorial, the Vector-Accumulate RTL IP performing <code class="docutils literal notranslate"><span class="pre">B[i]=A[i]+B[i]</span></code> meets all the requirements described above and has the following characteristics:</p>
<ul class="simple">
<li><p>An AXI4-Lite slave interface (<code class="docutils literal notranslate"><span class="pre">s_axilite</span></code>) used to access programmable registers (control registers, scalar arguments, and pointer base addresses).</p>
<ul>
<li><p>Offset <code class="docutils literal notranslate"><span class="pre">0x00</span></code> - Control Register: Controls and provides kernel status</p>
<ul>
<li><p>Bit <code class="docutils literal notranslate"><span class="pre">0</span></code>: <strong>start signal</strong>: Asserted by the host application when kernel can start processing data. Must be cleared when the <strong>done</strong> signal is asserted.</p></li>
<li><p>Bit <code class="docutils literal notranslate"><span class="pre">1</span></code>: <strong>done signal</strong>: Asserted by the kernel when it has completed operation. Cleared on read.</p></li>
<li><p>Bit <code class="docutils literal notranslate"><span class="pre">2</span></code>: <strong>idle signal</strong>: Asserted by this signal when it is not processing any data. The transition from Low to High should occur synchronously with the assertion of the <strong>done</strong> signal.</p></li>
</ul>
</li>
<li><p>Offset <code class="docutils literal notranslate"><span class="pre">0x10</span></code> Register for the scalar <code class="docutils literal notranslate"><span class="pre">size</span></code> argument</p></li>
<li><p>Offset <code class="docutils literal notranslate"><span class="pre">0x18</span></code> Register specifying the base address for pointer argument <code class="docutils literal notranslate"><span class="pre">A</span></code></p></li>
<li><p>Offset <code class="docutils literal notranslate"><span class="pre">0x24</span></code> Register specifying the base address for pointer argument <code class="docutils literal notranslate"><span class="pre">B</span></code></p></li>
</ul>
</li>
<li><p>Two AXI4 memory mapped interfaces for the pointer arguments, <code class="docutils literal notranslate"><span class="pre">A</span></code> and <code class="docutils literal notranslate"><span class="pre">B</span></code>, used to communicate with global memory.</p>
<ul>
<li><p>All AXI4 master interfaces must have 64-bit addresses.</p></li>
<li><p>The RTL designer is responsible for partitioning global memory spaces to specify the kernel arguments. The base address (memory offset) for each partition must be set by a control register programmable through the <code class="docutils literal notranslate"><span class="pre">s_axilite</span></code> interface as described above.</p></li>
</ul>
</li>
</ul>
<blockquote>
<div><p><strong>TIP:</strong> If your original RTL design uses a different execution model or hardware interfaces, you must customize your host application to address the kernel as required or add logic to the kernel to ensure that the design behaves in an expected manner.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this heading">¶</a></h2>
<p>This tutorial demonstrates how to package RTL IPs as Vitis kernels (<code class="docutils literal notranslate"><span class="pre">.xo</span></code>), and use them in the Vitis core development kit. The tutorial uses the <a class="reference internal" href="package_ip.html"><span class="doc">Package IP/Package XO</span></a> flow to package an existing RTL module as a Vivado IP, and package that IP as a Vitis kernel (<code class="docutils literal notranslate"><span class="pre">.xo</span></code>).</p>
</br>
<hr/>
<p align="center" class="sphinxhide"><b><a href="/README.md">Return to Main Page</a></b></p><p align="center" class="sphinxhide"><sup>Copyright&copy; 2021-2022 Xilinx</sup></p></div>
</div>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../Design_Tutorials/08-alveo_aurora_kernel/README.html" class="btn btn-neutral float-left" title="Using Aurora IP in Alveo with Vitis Flow" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../02-mixing-c-rtl-kernels/README.html" class="btn btn-neutral float-right" title="Mixing C++ and RTL Kernels" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2022, Xilinx, Inc..
      <span class="lastupdated">Last updated on May 16, 2022.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>