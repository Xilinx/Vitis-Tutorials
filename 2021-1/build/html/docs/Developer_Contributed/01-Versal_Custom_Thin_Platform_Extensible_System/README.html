<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
  <title>Versal Custom Thin Platform Extensible System &mdash; Vitis™ Tutorials 2021.1 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../../index.html" class="icon icon-home"> Vitis™ Tutorials
            <img src="../../../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2021.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">日本語版</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/master/docs-jp/index.html">Master</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Getting_Started/Vitis-Getting-Started.html">Getting Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Acceleration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Hardware_Acceleration/Hardware-Acceleration.html">Hardware Acceleration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AI Engine</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../AI_Engine_Development/AI_Engine_Development.html">AI Engine Development</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Platforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Vitis_Platform_Creation/Vitis_Platform_Creation.html">Vitis Platform Creation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-2/docs/index.html">2020.2</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-1/docs/README.html">2020.1</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Vitis™ Tutorials</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Versal Custom Thin Platform Extensible System</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/Developer_Contributed/01-Versal_Custom_Thin_Platform_Extensible_System/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <table class="sphinxhide" width="100%">
 <tr width="100%">
    <td align="center"><img src="https://raw.githubusercontent.com/Xilinx/Image-Collateral/main/xilinx-logo.png" width="30%"/><h1>Vitis™ In-Depth Tutorials</h1>
    </td>
 </tr>
</table><section id="versal-custom-thin-platform-extensible-system">
<h1>Versal Custom Thin Platform Extensible System<a class="headerlink" href="#versal-custom-thin-platform-extensible-system" title="Permalink to this heading">¶</a></h1>
<p>This tutorial describes a Versal VCK190 System Example Design based on a thin custom platform (minimal clocks and AXI exposed to PL) including HLS/RTL kernels and an AI Engine kernel using a full Makefile build-flow for Vivado™/Petalinux/Vitis 2021.1.</p>
<section id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading">¶</a></h2>
<p>The Versal VCK190 System Example Design full Makefile build-flow builds the whole project in the following order:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="mf">1.</span> <span class="n">version_check</span><span class="p">:</span> <span class="n">Checks</span> <span class="k">if</span> <span class="n">the</span> <span class="n">Vivado</span><span class="p">,</span> <span class="n">Petalinux</span><span class="p">,</span> <span class="ow">and</span> <span class="n">Vitis</span> <span class="n">version</span> <span class="ow">is</span> <span class="mf">2021.1</span>
  <span class="mf">2.</span> <span class="n">board_repo</span><span class="p">:</span>    <span class="n">Downloads</span> <span class="n">the</span> <span class="n">board</span> <span class="n">files</span> <span class="k">for</span> <span class="n">es1</span> <span class="ow">and</span> <span class="n">pre</span><span class="o">-</span><span class="n">production</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">Xilinx</span> <span class="n">GitHub</span> 
  <span class="mf">3.</span> <span class="n">xsa</span><span class="p">:</span>           <span class="n">Building</span> <span class="n">the</span> <span class="n">thin</span> <span class="n">platform</span> <span class="n">xsa</span> <span class="p">(</span><span class="n">only</span> <span class="n">pre</span><span class="o">-</span><span class="n">synth</span><span class="p">)</span>
  <span class="mf">4.</span> <span class="n">petalinux</span><span class="p">:</span>     <span class="n">Building</span> <span class="n">Petalinux</span> <span class="ow">and</span> <span class="n">sysroot</span>
  <span class="mf">5.</span> <span class="n">xpfm</span><span class="p">:</span>          <span class="n">Building</span> <span class="n">the</span> <span class="n">Vitis</span> <span class="n">Platform</span>
  <span class="mf">6.</span> <span class="n">bif</span><span class="p">:</span>           <span class="n">Copy</span> <span class="n">over</span> <span class="n">necessary</span> <span class="n">petalinux</span> <span class="n">files</span> <span class="n">to</span> <span class="n">the</span> <span class="n">generated</span> <span class="n">software</span> <span class="n">platform</span> <span class="p">(</span><span class="n">required</span> <span class="n">by</span> <span class="n">the</span> <span class="n">Vitis</span> <span class="n">packager</span><span class="p">)</span>
  <span class="mf">7.</span> <span class="n">ip</span><span class="p">:</span>            <span class="n">Building</span> <span class="n">Ai</span> <span class="n">Engine</span> <span class="n">graph</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">towards</span> <span class="n">libadf</span><span class="o">.</span><span class="n">a</span> <span class="ow">and</span> <span class="n">compiling</span> <span class="n">hls</span><span class="o">/</span><span class="n">rtl</span> <span class="n">kernels</span> <span class="n">to</span> <span class="o">*.</span><span class="n">xo</span>
  <span class="mf">8.</span> <span class="n">ps_apps</span><span class="p">:</span>       <span class="n">Building</span> <span class="nb">all</span> <span class="n">XRT</span><span class="o">-</span><span class="n">based</span> <span class="n">PS</span> <span class="n">applications</span>
  <span class="mf">9.</span> <span class="n">vitis</span><span class="p">:</span>         <span class="n">Linking</span> <span class="nb">all</span> <span class="n">kernels</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">thin</span> <span class="n">platform</span> <span class="ow">and</span> <span class="n">packaging</span> <span class="nb">all</span> <span class="n">necessary</span> <span class="n">sd_card</span> <span class="n">files</span>
</pre></div>
</div>
<p>The following diagram explains the build-flow dependencies.</p>
<p><strong>Notes:</strong></p>
<ul class="simple">
<li><p>The diagram should be read from right to left.</p></li>
<li><p>The diagram is for illustration only. The actual build-flow is more sequential.</p></li>
</ul>
<img src="./documentation/readme_files/Design_dependencies.svg"><p>In the <code class="docutils literal notranslate"><span class="pre">[project-root]</span></code> you can start the full build with <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">all</span></code> after setting up the 2021.1 version of Vivado, Petalinux and Vitis:</p>
<ul class="simple">
<li><p>Everything is in the GitHub repository; no extra files are needed.</p></li>
<li><p>In the <code class="docutils literal notranslate"><span class="pre">[project-root]/Makefile</span></code>: “export DEVICE_NAME := xcvc1902-vsva2197-2MP-e-S-es1” (for es1 version); <strong>change it to xcvc1902-vsva2197-2MP-e-S (for pre-production version)</strong>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[project-root]/petalinux/Makefile</span></code>: the generated tmp-dir ends up in <code class="docutils literal notranslate"><span class="pre">/tmp</span></code>.</p>
<ul>
<li><p>If you want to place it somewhere else you need to add <code class="docutils literal notranslate"><span class="pre">--tmpdir</span> <span class="pre">[your_tmp_dir]</span></code> at the end of the <code class="docutils literal notranslate"><span class="pre">petalinux-create</span></code> line in the <code class="docutils literal notranslate"><span class="pre">[project-root]/petalinux/Makefile</span></code>.</p>
<ul>
<li><p>Be aware that this may not be located on an NFS-drive!</p></li>
</ul>
</li>
</ul>
</li>
<li><p>End result: <code class="docutils literal notranslate"><span class="pre">[project-root]/package_output/sd_card/*</span></code> can be used for FAT-32 sd_card (partition); or <code class="docutils literal notranslate"><span class="pre">[project-root]/package_output/sd_card.img</span></code> can be used.</p></li>
</ul>
</section>
<section id="more-in-depth">
<h2>More In-Depth<a class="headerlink" href="#more-in-depth" title="Permalink to this heading">¶</a></h2>
<p>The following explains the different sub-build steps. Click on each item for more detailed information.<br />Each step is sequential (in the order listed - by the <code class="docutils literal notranslate"><span class="pre">[project-root]/Makefile</span></code>):</p>
<details>
 <summary> make version_check </summary><ul class="simple">
<li><p>Checks if the Vivado, Petalinux, and Vitis versions are 2021.1.</p></li>
</ul>
</details>
<details>
 <summary> make platform/hw/board_repo </summary><ul class="simple">
<li><p>Retrieves all es1 and pre-production board files from the Xilinx GitHub.</p></li>
</ul>
</details>
<details>
 <summary> make xsa -C platform </summary><p><code class="docutils literal notranslate"><span class="pre">[project-root]/platform</span></code> Directory/file structure:
| Directory/file      | Description<br />| ——————–|————————————————————–
| Makefile            | The platform xsa/xpfm Makefile<br />| hw/*                | The hardware platform Makefile and sources</p>
<ul class="simple">
<li><p>Builds the output file needed for Petalinux and Vitis software platform creation -&gt; <code class="docutils literal notranslate"><span class="pre">[project-root]/platform/hw/build/vck190_thin.xsa</span></code>.</p></li>
<li><p>After this step you could open the platform blockdesign in Vivado for review</p></li>
</ul>
</details>
<details>
  <summary> make all -C petalinux </summary><p><code class="docutils literal notranslate"><span class="pre">[project-root]/petalinux</span></code> Directory/file structure:
| Directory/file      | Description<br />| ——————–|————————————————————–
| Makefile            | The Petalinux Makefile<br />| src/config          | A script used to exchange/add petalinux configuration items
| src/device-tree/*   | Some device-tree changes needed for VCK190<br />| src/boot_custom.bif | bif file needed to have a correct BOOT.BIN in the Vitis packager</p>
<ul class="simple">
<li><p>Builds all required Petalinux images which end up in <code class="docutils literal notranslate"><span class="pre">[project-root]/petalinux/linux/images/linux</span></code>.</p></li>
<li><p>It also builds a <code class="docutils literal notranslate"><span class="pre">sysroot</span></code> which ends up in <code class="docutils literal notranslate"><span class="pre">[project-root]/petalinux/sysroot</span></code> (needed for <code class="docutils literal notranslate"><span class="pre">[project-root]/ps_apps</span></code> build).</p></li>
</ul>
</details>
<details>
  <summary> make xpfm -C platform </summary><p><code class="docutils literal notranslate"><span class="pre">[project-root]/platform</span></code> Directory/file structure:
| Directory/file      | Description<br />| ——————–|————————————————————–
| Makefile            | The platform xsa/xpfm Makefile<br />| sw/*                | The Vitis platform Makefile and sources</p>
<ul class="simple">
<li><p>Builds the output files needed for ip and Vitis -&gt; <code class="docutils literal notranslate"><span class="pre">[project-root]/platform/sw/build/vck190_thin/export/vck190_thin/vck190_thin.xpfm</span></code> and some generated subfolders.</p></li>
</ul>
</details>
<details>
  <summary> make bif </summary><ul class="simple">
<li><p>Copies over some Petalinux-generated files to the software platform. These are necessary for a correct Vitis-build.</p></li>
</ul>
</details>
<details>
  <summary> make all -C ip </summary><p><code class="docutils literal notranslate"><span class="pre">[project-root]/ip</span></code> Directory/file structure:
| Directory/file      | Description<br />| ——————–|————————————————————–
| Makefile            | The ip generic Makefile; it automatically searches for sub-projects to build<br />| aie/*               | aie “datamover” kernel Makefile and sources
| counter/*           | free-running RTL “counter” kernel Makefile and sources that feeds the aie “datamover” kernel
| subtractor/*        | Managed RTL “subtractor” kernel Makefile and sources that measures the delay between the counter-input and the aie-output
| vadd/*              | XRT-controlled HLS “vadd” kernel Makefile and sources</p>
<ul class="simple">
<li><p>Builds the output files needed for Vitis linker -&gt; <code class="docutils literal notranslate"><span class="pre">[project-root]/ip/aie/libadf.a</span></code> and <code class="docutils literal notranslate"><span class="pre">[project-root]/ip/*.xo</span></code></p></li>
<li><p>Kernel structure/flow:</p>
<ul>
<li><p>vadd is a separate kernel</p></li>
<li><p>counter -&gt; aie “datamover” -&gt; subtractor</p></li>
</ul>
</li>
</ul>
</details>
<details>
  <summary> make all -C ps_apps </summary><p><code class="docutils literal notranslate"><span class="pre">[project-root]/ps_apps</span></code> Directory/file structure:
| Directory/file      | Description<br />| ——————–|———————————————————
| Makefile            | The ps_apps generic Makefile; it automatically searches for sub-projects to build
| aie_dly_test/*      | PS XRT Application - using the native XRT API - Makefile and sources that measures the delay between counter-input and aie-output
| vadd_cpp/*          | PS XRT Application - using the native XRT API - Makefile and sources that checks out the vadd kernel
| vadd_ocl/*          | PS XRT Application - using the opencl XRT API - Makefile and sources that checks out the vadd kernel</p>
<ul class="simple">
<li><p>Builds the output files needed for vitis packager -&gt; <code class="docutils literal notranslate"><span class="pre">[project-root]/ps_apps/*.exe</span></code></p></li>
</ul>
</details>
<details>
  <summary> make all -C vitis </summary><p><code class="docutils literal notranslate"><span class="pre">[project-root]/vitis</span></code> Directory/file structure:
| Directory/file      | Description<br />| ——————–|———————————————————
| Makefile            | The Vitis generic Makefile for linker and packager
| src/system.cfg      | Vitis connection and clock configuration needed for Vitis linker</p>
<ul class="simple">
<li><p>Runs the Vitis linker and packager</p></li>
<li><p>The output of the Vitis packager ends up in <code class="docutils literal notranslate"><span class="pre">[project-root]/package_output</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">[project-root]/package_output/sd_card.img</span></code> or you find all FAT-32 files in <code class="docutils literal notranslate"><span class="pre">[project-root]/package_output/sd_card/*</span></code></p></li>
</ul>
</li>
<li><p>All other files can be ignored; they are an output from the Vitis packager and are unused</p></li>
<li><p>After this step you could open the full blockdesign (platform extended with all kernels) in Vivado for review</p></li>
</ul>
</details></section>
<section id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this heading">¶</a></h2>
<ol class="simple">
<li><p>Copy over the <code class="docutils literal notranslate"><span class="pre">[project-root]/package_output/sd_card/*</span></code> to an sd card or put the <code class="docutils literal notranslate"><span class="pre">[project-root]/package_output/sd_card.img</span></code> on an sd card.</p></li>
<li><p>Start-up and boot-up (no password is needed for linux login).</p></li>
<li><p>Execute the following after boot-up (it also includes the results):</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="n">root</span><span class="nd">@linux</span><span class="p">:</span><span class="o">~</span><span class="c1"># cd /media/sd-mmcblk0p1/</span>
   <span class="n">root</span><span class="nd">@linux</span><span class="p">:</span><span class="o">/</span><span class="n">media</span><span class="o">/</span><span class="n">sd</span><span class="o">-</span><span class="n">mmcblk0p1</span><span class="c1"># ./vadd_cpp.exe a.xclbin</span>
   <span class="n">Passed</span><span class="p">:</span> <span class="n">auto</span> <span class="n">my_device</span> <span class="o">=</span> <span class="n">xrt</span><span class="p">::</span><span class="n">device</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
   <span class="n">Passed</span><span class="p">:</span> <span class="n">auto</span> <span class="n">xclbin_uuid</span> <span class="o">=</span> <span class="n">my_device</span><span class="o">.</span><span class="n">load_xclbin</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">xclbin</span><span class="p">)</span>
   <span class="n">Passed</span><span class="p">:</span> <span class="n">auto</span> <span class="n">my_vadd</span> <span class="o">=</span> <span class="n">xrt</span><span class="p">::</span><span class="n">kernel</span><span class="p">(</span><span class="n">my_device</span><span class="p">,</span> <span class="n">xclbin_uuid</span><span class="p">,</span> <span class="s2">&quot;vadd&quot;</span><span class="p">)</span>
   <span class="n">VADD</span> <span class="n">TEST</span> <span class="n">PASSED</span>
   <span class="n">root</span><span class="nd">@linux</span><span class="p">:</span><span class="o">/</span><span class="n">media</span><span class="o">/</span><span class="n">sd</span><span class="o">-</span><span class="n">mmcblk0p1</span><span class="c1"># ./vadd_ocl.exe a.xclbin</span>
   <span class="n">Loading</span><span class="p">:</span> <span class="s1">&#39;a.xclbin&#39;</span>
   <span class="n">VADD</span> <span class="n">TEST</span> <span class="n">PASSED</span>
   <span class="n">root</span><span class="nd">@linux</span><span class="p">:</span><span class="o">/</span><span class="n">media</span><span class="o">/</span><span class="n">sd</span><span class="o">-</span><span class="n">mmcblk0p1</span><span class="c1"># ./aie_dly_test.exe a.xclbin</span>
   <span class="n">Initializing</span> <span class="n">ADF</span> <span class="n">API</span><span class="o">...</span>
   <span class="n">Passed</span><span class="p">:</span> <span class="n">auto</span> <span class="n">my_device</span> <span class="o">=</span> <span class="n">xrt</span><span class="p">::</span><span class="n">device</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
   <span class="n">Passed</span><span class="p">:</span> <span class="n">auto</span> <span class="n">xclbin_uuid</span> <span class="o">=</span> <span class="n">my_device</span><span class="o">.</span><span class="n">load_xclbin</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">xclbin</span><span class="p">)</span>
   <span class="n">Passed</span><span class="p">:</span> <span class="n">auto</span> <span class="n">my_rtl_ip</span> <span class="o">=</span> <span class="n">xrt</span><span class="p">::</span><span class="n">ip</span><span class="p">(</span><span class="n">my_device</span><span class="p">,</span> <span class="n">xclbin_uuid</span><span class="p">,</span> <span class="s2">&quot;subtractor&quot;</span><span class="p">)</span>
   <span class="n">Passed</span><span class="p">:</span> <span class="n">auto</span> <span class="n">my_graph</span>  <span class="o">=</span> <span class="n">xrt</span><span class="p">::</span><span class="n">graph</span><span class="p">(</span><span class="n">my_device</span><span class="p">,</span> <span class="n">xclbin_uuid</span><span class="p">,</span> <span class="s2">&quot;mygraph_top&quot;</span><span class="p">)</span>
   <span class="n">Passed</span><span class="p">:</span> <span class="n">my_graph</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
   <span class="n">Passed</span><span class="p">:</span> <span class="n">my_graph</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
   <span class="n">Poll</span> <span class="n">subtractor</span> <span class="n">register</span>
     <span class="n">Value</span> <span class="n">Reg0</span><span class="p">:</span>  <span class="mi">530</span>
     <span class="n">Value</span> <span class="n">Reg1</span><span class="p">:</span>  <span class="mi">142</span>
     <span class="n">Value</span> <span class="n">Reg2</span><span class="p">:</span>  <span class="mi">141</span>
     <span class="n">Value</span> <span class="n">Reg3</span><span class="p">:</span>  <span class="mi">32</span>
   <span class="n">Poll</span> <span class="n">subtractor</span> <span class="n">register</span>
     <span class="n">Value</span> <span class="n">Reg0</span><span class="p">:</span>  <span class="mi">530</span>
     <span class="n">Value</span> <span class="n">Reg1</span><span class="p">:</span>  <span class="mi">142</span>
     <span class="n">Value</span> <span class="n">Reg2</span><span class="p">:</span>  <span class="mi">141</span>
     <span class="n">Value</span> <span class="n">Reg3</span><span class="p">:</span>  <span class="mi">32</span>
   <span class="n">Poll</span> <span class="n">subtractor</span> <span class="n">register</span>
     <span class="n">Value</span> <span class="n">Reg0</span><span class="p">:</span>  <span class="mi">5</span><span class="n">da</span>
     <span class="n">Value</span> <span class="n">Reg1</span><span class="p">:</span>  <span class="mi">142</span>
     <span class="n">Value</span> <span class="n">Reg2</span><span class="p">:</span>  <span class="mi">141</span>
     <span class="n">Value</span> <span class="n">Reg3</span><span class="p">:</span>  <span class="mi">32</span>
   <span class="o">...</span>
   <span class="n">Poll</span> <span class="n">subtractor</span> <span class="n">register</span>
     <span class="n">Value</span> <span class="n">Reg0</span><span class="p">:</span>  <span class="mi">5</span><span class="n">f2</span>
     <span class="n">Value</span> <span class="n">Reg1</span><span class="p">:</span>  <span class="mi">142</span>
     <span class="n">Value</span> <span class="n">Reg2</span><span class="p">:</span>  <span class="mi">141</span>
     <span class="n">Value</span> <span class="n">Reg3</span><span class="p">:</span>  <span class="mi">32</span>
   <span class="n">Poll</span> <span class="n">subtractor</span> <span class="n">register</span>
     <span class="n">Value</span> <span class="n">Reg0</span><span class="p">:</span>  <span class="mi">556</span>
     <span class="n">Value</span> <span class="n">Reg1</span><span class="p">:</span>  <span class="mi">142</span>
     <span class="n">Value</span> <span class="n">Reg2</span><span class="p">:</span>  <span class="mi">141</span>
     <span class="n">Value</span> <span class="n">Reg3</span><span class="p">:</span>  <span class="mi">32</span>
   <span class="n">Poll</span> <span class="n">subtractor</span> <span class="n">register</span>
     <span class="n">Value</span> <span class="n">Reg0</span><span class="p">:</span>  <span class="mi">6</span><span class="n">ac</span>
     <span class="n">Value</span> <span class="n">Reg1</span><span class="p">:</span>  <span class="mi">142</span>
     <span class="n">Value</span> <span class="n">Reg2</span><span class="p">:</span>  <span class="mi">140</span>
     <span class="n">Value</span> <span class="n">Reg3</span><span class="p">:</span>  <span class="mi">32</span>
   <span class="n">Passed</span><span class="p">:</span> <span class="n">my_graph</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
   <span class="n">root</span><span class="nd">@linux</span><span class="p">:</span><span class="o">/</span><span class="n">media</span><span class="o">/</span><span class="n">sd</span><span class="o">-</span><span class="n">mmcblk0p1</span><span class="c1">#</span>
</pre></div>
</div>
</section>
<section id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>xsa: CIPS settings are added manually; configured in the bd-files.</p></li>
<li><p><strong>ALL</strong> kernels use 250MHz clock as default.</p></li>
<li><p>The example design is fully FAT-32</p>
<ul>
<li><p>if you like to use ext4 rootfs instead:</p>
<ul>
<li><p>petalinux already generates it.</p></li>
<li><p>You will need to copy it to the Vitis platform in the <code class="docutils literal notranslate"><span class="pre">[project-root]/Makefile</span></code> in the <code class="docutils literal notranslate"><span class="pre">bif</span></code> section.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">v++</span> <span class="pre">-p</span></code> command line in <code class="docutils literal notranslate"><span class="pre">[project-root]\vitis\Makefile</span></code> will need adaptations to be able to use ext4 rootfs instead of FAT-32.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Simulations and Emulations are <strong>NOT</strong> included in this Tutorial!</p></li>
</ul>
</section>
<section id="design-considerations">
<h2>Design Considerations<a class="headerlink" href="#design-considerations" title="Permalink to this heading">¶</a></h2>
<p>Note: The <strong>MUST</strong>’s in below explanations are due to how the generic Makefiles are setup, and is <strong>NOT</strong> a Xilinx tools requirement!</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[project-root]/ps_apps</span></code>: PS applications can easily be added by adding a sub-project for each in <code class="docutils literal notranslate"><span class="pre">[project-root]/ps_apps</span></code>.</p>
<ul>
<li><p>Vitis will automatically package them and they will end up on the sd_card.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">[PS</span> <span class="pre">Application].exe</span></code> (extension <strong>MUST</strong> be .exe) <strong>MUST</strong> end up in the <code class="docutils literal notranslate"><span class="pre">[project-root]/ps_apps</span></code> dir.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">[project-root]/ip</span></code>: Kernels can be added by just adding a sub-project in <code class="docutils literal notranslate"><span class="pre">[project-root]/ip</span></code>.</p>
<ul>
<li><p>You will need to update the <code class="docutils literal notranslate"><span class="pre">[project-root]/vitis/src/system.cfg</span></code> file to setup the correct connections/clocks.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">[kernel].xo</span></code> file <strong>MUST</strong> end up in the <code class="docutils literal notranslate"><span class="pre">[project-root]/ip</span></code> dir</p></li>
<li><p>An extra aie graph <strong>MUST</strong> be added in the <code class="docutils literal notranslate"><span class="pre">[project-root]/ip/aie</span></code> dir, the <code class="docutils literal notranslate"><span class="pre">[project-root]/ip/aie/Makefile</span></code> will need adaptations.</p></li>
</ul>
</li>
</ul>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this heading">¶</a></h2>
<p>The following documents provide supplemental information for this tutorial.</p>
<section id="ai-engine-documentation">
<h3><a class="reference external" href="https://www.xilinx.com/html_docs/xilinx2021_1/vitis_doc/yii1603912637443.html">AI Engine Documentation</a><a class="headerlink" href="#ai-engine-documentation" title="Permalink to this heading">¶</a></h3>
<p>Contains sections on how to develop AI Engine graphs, how to use the AI Engine compiler, AI Engine simulation, and performance analysis.</p>
</section>
<section id="xilinx-runtime-xrt-architecture">
<h3><a class="reference external" href="https://xilinx.github.io/XRT/master/html/index.html">Xilinx Runtime (XRT) Architecture</a><a class="headerlink" href="#xilinx-runtime-xrt-architecture" title="Permalink to this heading">¶</a></h3>
<p>The following are links to the XRT information used by this tutorial:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://xilinx.github.io/XRT/master/html/index.html">XRT Documentation</a>: Explains general XRT API calls used in the PS Host Application.</p></li>
<li><p><a class="reference external" href="https://github.com/Xilinx/XRT">XRT Github Repo</a>: Contains the XRT source code.</p></li>
<li><p><a class="reference external" href="https://github.com/Xilinx/XRT/blob/master/src/runtime_src/core/include/experimental/xrt_aie.h">XRT AIE API</a>: Documents the AI Engine XRT API calls</p></li>
</ul>
</section>
<section id="vitis-unified-software-development-platform-2021-1-documentation">
<h3><a class="reference external" href="https://www.xilinx.com/html_docs/xilinx2021_1/vitis_doc/index.html">Vitis Unified Software Development Platform 2021.1 Documentation</a><a class="headerlink" href="#vitis-unified-software-development-platform-2021-1-documentation" title="Permalink to this heading">¶</a></h3>
<p>The following are links to Vitis related information referenced in this tutorial:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.xilinx.com/html_docs/xilinx2021_1/vitis_doc/kme1569523964461.html">Vitis Application Acceleration Development Flow Documentation</a></p></li>
<li><p><a class="reference external" href="https://github.com/Xilinx/Vitis-Tutorials">Vitis Application Acceleration Development Flow Tutorials</a></p></li>
<li><p><a class="reference external" href="https://www.xilinx.com/html_docs/xilinx2021_1/vitis_doc/irn1582730075765.html">Vitis HLS</a></p></li>
</ul>
</section>
</section>
<section id="revision-history">
<h2>Revision History<a class="headerlink" href="#revision-history" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>October 2021 - Optimized AI Engine Datamovers + Added more clarifications in this README.md + Improved petalinux version check</p></li>
<li><p>September 2021 - Initial Release</p></li>
</ul>
<p>Licensed under the Apache License, Version 2.0 (the “License”);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">apache</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">licenses</span><span class="o">/</span><span class="n">LICENSE</span><span class="o">-</span><span class="mf">2.0</span>
</pre></div>
</div>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
<p align="center"><sup>XD106 | © Copyright 2021 Xilinx, Inc.</sup></p></section>
</section>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2022, Xilinx, Inc. Xilinx is now a part of AMD.
      <span class="lastupdated">Last updated on July 27, 2022.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>