


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../../../_static/js/Searchbox.min.js"></script>
	<script type="text/javascript" src="../../../../_static/js/header-footer.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Table of Contents" href="../06-fft2d_AIEvsHLS/README.html" />
    <link rel="prev" title="Beamforming Tutorial" href="../03-beamforming/README.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home" alt="Documentation Home"> Vitis™ Tutorials
          

          
          </a>

          
            
            
              <div class="version">
                2021.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">日本語版</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/master/docs-jp/index.html">Master</a></li>
</ul>
<p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Getting_Started/Vitis-Getting-Started.html">Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Acceleration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Hardware_Acceleration/Hardware-Acceleration.html">Hardware Acceleration</a></li>
</ul>
<p class="caption"><span class="caption-text">AI Engine</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../AI_Engine_Development.html">AI Engine Development</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../AI_Engine_Development.html#design-tutorials">Design Tutorials</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../01-aie_lenet_tutorial/README.html">LeNet Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="../02-super_sampling_rate_fir/README.html">Super Sampling Rate FIR Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03-beamforming/README.html">Beamforming Design</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">AIE Emulation on Custom Platforms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-1-creating-custom-rtl-ip-with-the-vivado-design-suite">Step 1 - Creating Custom RTL IP with the Vivado® Design Suite</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-2-interfacing-plio-kernels-to-graph">Step 2 - Interfacing PLIO Kernels to graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-3-building-input-output-plio-kernels">Step 3 - Building Input/Output PLIO Kernels</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-4-building-xclbin">Step 4 - Building XCLBIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-5-build-host-application">Step 5 - Build Host Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-6-package">Step 6 - Package</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-7-run-emulation">Step 7 - Run Emulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../06-fft2d_AIEvsHLS/README.html">Table of Contents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../06-fft2d_AIEvsHLS/README.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../06-fft2d_AIEvsHLS/README.html#before-you-begin">Before You Begin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../06-fft2d_AIEvsHLS/README.html#design-implementations">Design Implementations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../06-fft2d_AIEvsHLS/README.html#ai-engine-and-hls-implementation-comparison">AI Engine and HLS Implementation Comparison</a></li>
<li class="toctree-l3"><a class="reference internal" href="../06-fft2d_AIEvsHLS/README.html#references">References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../06-fft2d_AIEvsHLS/README.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../06-fft2d_AIEvsHLS/README.html#support">Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../06-fft2d_AIEvsHLS/README.html#license">License</a></li>
<li class="toctree-l3"><a class="reference internal" href="../07-firFilter_AIEvsHLS/README.html">Table of Contents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../07-firFilter_AIEvsHLS/README.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../07-firFilter_AIEvsHLS/README.html#before-you-begin">Before You Begin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../07-firFilter_AIEvsHLS/README.html#design-implementations">Design Implementations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../07-firFilter_AIEvsHLS/README.html#choosing-between-ai-engine-and-hls-implementations">Choosing between AI Engine and HLS Implementations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../07-firFilter_AIEvsHLS/README.html#ai-engine-specific-design-considerations">AI Engine Specific Design Considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../07-firFilter_AIEvsHLS/README.html#measuring-resources-throughput-latency-and-power">Measuring Resources, Throughput, Latency, and Power</a></li>
<li class="toctree-l3"><a class="reference internal" href="../07-firFilter_AIEvsHLS/README.html#conclusion">Conclusion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../07-firFilter_AIEvsHLS/README.html#revision-history">Revision History</a></li>
<li class="toctree-l3"><a class="reference internal" href="../07-firFilter_AIEvsHLS/README.html#support">Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../07-firFilter_AIEvsHLS/README.html#license">License</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08-n-body-simulator/README.html">AIE Emulation on Custom Platforms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../AI_Engine_Development.html#feature-tutorials">Feature Tutorials</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Platforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Vitis_Platform_Creation/Vitis_Platform_Creation.html">Vitis Platform Creation</a></li>
</ul>
<p class="caption"><span class="caption-text">Other Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-2/docs/index.html">2020.2</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-1/docs/README.html">2020.1</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../../../_sources/docs/AI_Engine_Development/Design_Tutorials/04-custom-platform-emulation/README.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Vitis™ Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../AI_Engine_Development.html">AI Engine Development</a> &raquo;</li>
        
      <li>Custom Platform Emulation with RTL Kernel</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/docs/AI_Engine_Development/Design_Tutorials/04-custom-platform-emulation/README.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <table class="sphinxhide" width="100%">
 <tr width="100%">
    <td align="center"><img src="https://raw.githubusercontent.com/Xilinx/Image-Collateral/main/xilinx-logo.png" width="30%"/><h1>Versal™ ACAP AI Engine Tutorials</h1>
    <a href="https://www.xilinx.com/products/design-tools/vitis.html">See Vitis™ Development Environment on xilinx.com</br></a>
    <a href="https://www.xilinx.com/products/design-tools/vitis/vitis-ai.html">See Vitis-AI™ Development Environment on xilinx.com</a>
    </td>
 </tr>
</table><div class="section" id="custom-platform-emulation-with-rtl-kernel">
<h1>Custom Platform Emulation with RTL Kernel<a class="headerlink" href="#custom-platform-emulation-with-rtl-kernel" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This tutorial demonstrates the following two features of the Vitis™ unified software platform flow:</p>
<ol class="simple">
<li><p>Ability to create a custom platform to meet your needs.</p></li>
<li><p>Ability to reuse any AXI-based IP you have created as an RTL IP.</p></li>
</ol>
<p>The ability to control your platform, and convert your RTL IP to an RTL kernel allows for a more streamlined process for creating the design you need.</p>
<p>Prior to starting this tutorial read and execute the platform creation tutorial https://github.com/Xilinx/Vitis-Tutorials/tree/master/Vitis_Platform_Creation/Introduction/03_Edge_VCK190.</p>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>In this tutorial you will learn:</p>
<ul class="simple">
<li><p>How to create an RTL kernel (outside the ADF graph) to be used with the ADF graph.</p></li>
<li><p>How to modify the ADF graph code to incorporate the RTL kernel as a PLIO kernel.</p></li>
<li><p>How to build and emulate the design with a custom platform.</p></li>
</ul>
</div>
<div class="section" id="step-1-creating-custom-rtl-ip-with-the-vivado-design-suite">
<h2>Step 1 - Creating Custom RTL IP with the Vivado® Design Suite<a class="headerlink" href="#step-1-creating-custom-rtl-ip-with-the-vivado-design-suite" title="Permalink to this headline">¶</a></h2>
<p>After creating the custom platform from the previous tutorial, the next step is to package your RTL code as a Vivado IP and generate a Vitis RTL kernel.</p>
<ol>
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">polar_clip_rtl_kernel.tcl</span></code> file.</p></li>
<li><p>This Tcl script creates an IP following the Vivado IP Packaging flow as described in the <a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?d=xilinx2021_1/ug1118-vivado-creating-packaging-custom-ip.pdf">Creating and Packaging Custom IP User Guide (UG1118)</a>.</p>
<p>Note the following points:</p>
<ul>
<li><p>The script creates a Vivado Design Suite project; this is required to create any IP because all source and constraint files need to be local to the IP.</p></li>
<li><p>Lines 40 and 41 are used to associate the correct clock pins to the interfaces. This is required for the Vitis compiler which links those interfaces to the platform clocking.</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nv">ipx</span><span class="o">::</span>associate_bus_interfaces <span class="o">-</span>busif in_sample <span class="o">-</span>clock ap_clk <span class="k">[</span><span class="nv">ipx</span><span class="o">::</span>current_core<span class="k">]</span>
<span class="nv">ipx</span><span class="o">::</span>associate_bus_interfaces <span class="o">-</span>busif out_sample <span class="o">-</span>clock ap_clk <span class="k">[</span><span class="nv">ipx</span><span class="o">::</span>current_core<span class="k">]</span>
</pre></div>
</div>
</li>
<li><p>On lines 44 and 45 the <code class="docutils literal notranslate"><span class="pre">FREQ_HZ</span></code> bus parameter is removed. This parameter is used in IP integrator, and is to make sure the associated clock of the interface is used correctly. However, the Vitis compiler sets this during the compilation process, and having it set in the IP will cause the compiler to incorrectly link the clocks.</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nv">ipx</span><span class="o">::</span>remove_bus_parameter FREQ_HZ <span class="k">[</span><span class="nv">ipx</span><span class="o">::</span>get_bus_interfaces in_sample <span class="o">-</span>of_objects <span class="k">[</span><span class="nv">ipx</span><span class="o">::</span>current_core<span class="k">]]</span>
<span class="nv">ipx</span><span class="o">::</span>remove_bus_parameter FREQ_HZ <span class="k">[</span><span class="nv">ipx</span><span class="o">::</span>get_bus_interfaces out_sample <span class="o">-</span>of_objects <span class="k">[</span><span class="nv">ipx</span><span class="o">::</span>current_core<span class="k">]]</span>
</pre></div>
</div>
</li>
<li><p>At the end of the script there is the <code class="docutils literal notranslate"><span class="pre">package_xo</span></code> command. This command analyzes the IP that was created to make sure proper AXI interfaces are used and other rule checks are followed. It then creates the XO file in the same location as the IP repository. A key function used in this command is the <code class="docutils literal notranslate"><span class="pre">-output_kernel_xml</span></code>. The <code class="docutils literal notranslate"><span class="pre">kernel.xml</span></code> file is key to the RTL kernel as it describes to the Vitis tool how the kernel should be controlled. You can find more information on RTL kernels and their requirements <a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?t=vitis+doc%3Bv=2021.1%3Bd=devrtlkernel.html">here</a>.</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span>package_xo -kernel_name $kernelName \
    -ctrl_protocol ap_ctrl_none \
    -ip_directory [pwd]/ip_repo/$kernelName \
    -xo_path [pwd]/ip_repo/${kernelName}.xo \
    -force -output_kernel_xml [pwd]/ip_repo/kernel_${kernelName}_auto.xml
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>To complete this step run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>vivado -source polar_clip_rtl_kernel.tcl -mode batch
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make polar_clip.xo
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="step-2-interfacing-plio-kernels-to-graph">
<h2>Step 2 - Interfacing PLIO Kernels to graph<a class="headerlink" href="#step-2-interfacing-plio-kernels-to-graph" title="Permalink to this headline">¶</a></h2>
<p>To set up the ADF graph to interface with the <code class="docutils literal notranslate"><span class="pre">polar_clip</span></code> RTL kernel, you must add other connections to PLIOs that represent the RTL kernel.</p>
<ol>
<li><p>The following <code class="docutils literal notranslate"><span class="pre">graph.cpp</span></code> shows how to connect to the RTL kernel.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;graph.h&quot;</span><span class="cp"></span>

<span class="n">PLIO</span> <span class="o">*</span><span class="n">in0</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PLIO</span><span class="p">(</span><span class="s">&quot;DataIn1&quot;</span><span class="p">,</span> <span class="n">adf</span><span class="o">::</span><span class="n">plio_32_bits</span><span class="p">,</span><span class="s">&quot;data/input.txt&quot;</span><span class="p">);</span>

<span class="c1">// RTL Kernel PLIO</span>
<span class="n">PLIO</span> <span class="o">*</span><span class="n">ai_to_pl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PLIO</span><span class="p">(</span><span class="s">&quot;clip_in&quot;</span><span class="p">,</span><span class="n">adf</span><span class="o">::</span><span class="n">plio_32_bits</span><span class="p">,</span> <span class="s">&quot;data/output.txt&quot;</span><span class="p">);</span>
<span class="n">PLIO</span> <span class="o">*</span><span class="n">pl_to_ai</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PLIO</span><span class="p">(</span><span class="s">&quot;clip_out&quot;</span><span class="p">,</span> <span class="n">adf</span><span class="o">::</span><span class="n">plio_32_bits</span><span class="p">,</span><span class="s">&quot;data/input2.txt&quot;</span><span class="p">);</span>

<span class="n">PLIO</span> <span class="o">*</span><span class="n">out0</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PLIO</span><span class="p">(</span><span class="s">&quot;DataOut1&quot;</span><span class="p">,</span><span class="n">adf</span><span class="o">::</span><span class="n">plio_32_bits</span><span class="p">,</span> <span class="s">&quot;data/output.txt&quot;</span><span class="p">);</span>

<span class="c1">// RTL Kernel Addition to the platform</span>
<span class="n">simulation</span><span class="o">::</span><span class="n">platform</span><span class="o">&lt;</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="o">&gt;</span> <span class="n">platform</span><span class="p">(</span><span class="n">in0</span><span class="p">,</span> <span class="n">pl_to_ai</span><span class="p">,</span> <span class="n">out0</span><span class="p">,</span> <span class="n">ai_to_pl</span><span class="p">);</span>

<span class="n">clipped</span> <span class="n">clipgraph</span><span class="p">;</span>

<span class="n">connect</span><span class="o">&lt;&gt;</span> <span class="n">net0</span><span class="p">(</span><span class="n">platform</span><span class="p">.</span><span class="n">src</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">clipgraph</span><span class="p">.</span><span class="n">in</span><span class="p">);</span>

<span class="c1">// Additional nets to the RTL Kernel</span>
<span class="n">connect</span><span class="o">&lt;&gt;</span> <span class="n">net1</span><span class="p">(</span><span class="n">clipgraph</span><span class="p">.</span><span class="n">clip_in</span><span class="p">,</span><span class="n">platform</span><span class="p">.</span><span class="n">sink</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="n">connect</span><span class="o">&lt;&gt;</span> <span class="n">net2</span><span class="p">(</span><span class="n">platform</span><span class="p">.</span><span class="n">src</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">clipgraph</span><span class="p">.</span><span class="n">clip_out</span><span class="p">);</span>
<span class="n">connect</span><span class="o">&lt;&gt;</span> <span class="n">net3</span><span class="p">(</span><span class="n">clipgraph</span><span class="p">.</span><span class="n">out</span><span class="p">,</span> <span class="n">platform</span><span class="p">.</span><span class="n">sink</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

<span class="cp">#ifdef __AIESIM__</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span> <span class="n">argv</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">clipgraph</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
    <span class="n">clipgraph</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
    <span class="n">clipgraph</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#endif</span>
</pre></div>
</div>
</li>
<li><p>Note the following:</p>
<ul class="simple">
<li><p>Two additional <code class="docutils literal notranslate"><span class="pre">PLIO</span></code> objects <code class="docutils literal notranslate"><span class="pre">ai_to_pl</span></code> and <code class="docutils literal notranslate"><span class="pre">pl_to_ai</span></code> are added. These are to hook up to the <code class="docutils literal notranslate"><span class="pre">polar_clip</span></code> RTL kernel.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">simulation::platform</span></code> object now has the two extra PLIO interfaces.</p></li>
<li><p>There are additional net objects to hook up the RTL kernel to the rest of the platform object.</p></li>
</ul>
</li>
</ol>
<p>For more information on RTL kernels in the AI Engine see: <a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?t=vitis+doc%3Bv=2021.1%3Bd=programmable_logic_integration.html%3Ba=rdd1604332009149">Design Flow Using RTL Programmable Logic</a>.</p>
<ol>
<li><p>Compile the graph using the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aiecompiler --target<span class="o">=</span>hw -include<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$XILINX_VITIS</span><span class="s2">/aietools/include&quot;</span> -include<span class="o">=</span><span class="s2">&quot;./aie&quot;</span> -include<span class="o">=</span><span class="s2">&quot;./data&quot;</span> -include<span class="o">=</span><span class="s2">&quot;./aie/kernels&quot;</span> -include<span class="o">=</span><span class="s2">&quot;./&quot;</span>  -workdir<span class="o">=</span>./Work  aie/graph.cpp
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make aie
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="step-3-building-input-output-plio-kernels">
<h2>Step 3 - Building Input/Output PLIO Kernels<a class="headerlink" href="#step-3-building-input-output-plio-kernels" title="Permalink to this headline">¶</a></h2>
<p>Similar to the <code class="docutils literal notranslate"><span class="pre">polar_clip</span></code> kernel, the <code class="docutils literal notranslate"><span class="pre">mm2s</span></code> and <code class="docutils literal notranslate"><span class="pre">s2mm</span></code> kernels are not part of the ADF graph. Unlike the <code class="docutils literal notranslate"><span class="pre">polar_clip</span></code> (RTL kernel), these are HLS-based kernels and use the Vitis compiler to compile them into XO files. Remember that instead of targeting a Xilinx provided platform, you are targeting the custom platform created in the previous tutorial.</p>
<p>To build these kernels run the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>v++ -c --platform ../../../Versal_Platform_Creation/Tutorial-VCK190_Custom/ref_files/step3_pfm/platform_repo/vck190_custom/export/vck190_custom/vck190_custom.xpfm -g --save-temps -k mm2s pl_kernels/mm2s.cpp -o mm2s.xo
v++ -c --platform ../../../Versal_Platform_Creation/Tutorial-VCK190_Custom/ref_files/step3_pfm/platform_repo/vck190_custom/export/vck190_custom/vck190_custom.xpfm -g --save-temps -k mm2s pl_kernels/s2mm.cpp -o s2mm.xo
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make kernels
</pre></div>
</div>
</div>
<div class="section" id="step-4-building-xclbin">
<h2>Step 4 - Building XCLBIN<a class="headerlink" href="#step-4-building-xclbin" title="Permalink to this headline">¶</a></h2>
<p>Because there is no HLS kernel in the ADF graph, the <code class="docutils literal notranslate"><span class="pre">system.cfg</span></code> file, which is used to determine connectivity, needs to reflect the new AI Engine interfacing.</p>
<ol>
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">system.cfg</span></code> file and the <code class="docutils literal notranslate"><span class="pre">sc</span></code> options and note that there are two lines specific to the <code class="docutils literal notranslate"><span class="pre">polar_clip</span></code> kernel. Note that the name of the interfaces are the same as defined previously in the code snippet for the <code class="docutils literal notranslate"><span class="pre">graph.h</span></code> file where the first parameter of the PLIO object is instantiated.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">[</span><span class="nv">connectivity</span><span class="p p-Indicator">]</span>
<span class="l l-Scalar l-Scalar-Plain">sc=mm2s_1.s:ai_engine_0.DataIn1</span>
<span class="l l-Scalar l-Scalar-Plain">sc=ai_engine_0.clip_in:polar_clip_1.in_sample</span>
<span class="l l-Scalar l-Scalar-Plain">sc=polar_clip_1.out_sample:ai_engine_0.clip_out</span>
<span class="l l-Scalar l-Scalar-Plain">sc=ai_engine_0.DataOut1:s2mm_1.s</span>
</pre></div>
</div>
</li>
<li><p>Close <code class="docutils literal notranslate"><span class="pre">system.cfg</span></code>.</p></li>
<li><p>Build the emulation design using the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>v++ -l --platform ../../../Versal_Platform_Creation/Tutorial-VCK190_Custom/ref_files/step3_pfm/platform_repo/vck190_custom/export/vck190_custom/vck190_custom.xpfm s2mm.xo mm2s.xo polar_clip.xo libadf.a -t hw_emu --save-temps -g --config system.cfg -o tutorial.xclbin
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make xclbin
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="step-5-build-host-application">
<h2>Step 5 - Build Host Application<a class="headerlink" href="#step-5-build-host-application" title="Permalink to this headline">¶</a></h2>
<p>Building the host application follows a similar procedure, regardless of whether it is targeting a base platform or custom platform. Make sure to use the appropriate <code class="docutils literal notranslate"><span class="pre">SYSROOT</span></code> path for the design. Also make sure to adjust the path based upon where you cloned the repositories.</p>
<p>Build the host application:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aarch64-linux-gnu-g++ -Wall -c -std<span class="o">=</span>c++14 -Wno-int-to-pointer-cast <span class="se">\</span>
    --sysroot<span class="o">=</span>../../../Versal_Platform_Creation/Tutorial-VCK190_Custom/ref_files/step2_petalinux/build/petalinux/images/linux/sdk/sysroots/aarch64-xilinx-linux <span class="se">\</span>
    -I../../../Versal_Platform_Creation/Tutorial-VCK190_Custom/ref_files/step2_petalinux/build/petalinux/images/linux/sdk/sysroots/aarch64-xilinx-linux/usr/include/xrt <span class="se">\</span>
    -I../../../Versal_Platform_Creation/Tutorial-VCK190_Custom/ref_files/step2_petalinux/build/petalinux/images/linux/sdk/sysroots/aarch64-xilinx-linux/usr/include <span class="se">\</span>
    -I./ -I../aie -I<span class="nv">$XILINX_VITIS</span>/aietools/include -I<span class="nv">$XILINX_VITIS</span>/include <span class="se">\</span>
    -o aie_control_xrt.o ../Work/ps/c_rts/aie_control_xrt.cpp
aarch64-linux-gnu-g++ -Wall -c -std<span class="o">=</span>c++14 -Wno-int-to-pointer-cast <span class="se">\</span>
    --sysroot<span class="o">=</span>../../../Versal_Platform_Creation/Tutorial-VCK190_Custom/ref_files/step2_petalinux/build/petalinux/images/linux/sdk/sysroots/aarch64-xilinx-linux  <span class="se">\</span>
    -I../../../Versal_Platform_Creation/Tutorial-VCK190_Custom/ref_files/step2_petalinux/build/petalinux/images/linux/sdk/sysroots/aarch64-xilinx-linux/usr/include/xrt <span class="se">\</span>
    -I../../../Versal_Platform_Creation/Tutorial-VCK190_Custom/ref_files/step2_petalinux/build/petalinux/images/linux/sdk/sysroots/aarch64-xilinx-linux/usr/include <span class="se">\</span>
    -I./ -I../aie -I<span class="nv">$XILINX_VITIS</span>/aietools/include -I<span class="nv">$XILINX_VITIS</span>/include <span class="se">\</span>
    -o host.o host.cpp
aarch64-linux-gnu-g++ *.o -ladf_api_xrt -lxrt_coreutil <span class="se">\</span>
    -L../../../Versal_Platform_Creation/Tutorial-VCK190_Custom/ref_files/step2_petalinux/build/petalinux/images/linux/sdk/sysroots/aarch64-xilinx-linux/usr/lib <span class="se">\</span>
    --sysroot<span class="o">=</span>../../../Versal_Platform_Creation/Tutorial-VCK190_Custom/ref_files/step2_petalinux/build/petalinux/images/linux/sdk/sysroots/aarch64-xilinx-linux <span class="se">\</span>
    -L<span class="nv">$XILINX_VITIS</span>/aietools/lib/aarch64.o -std<span class="o">=</span>c++14 -o host.exe
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make host
</pre></div>
</div>
</div>
<div class="section" id="step-6-package">
<h2>Step 6 - Package<a class="headerlink" href="#step-6-package" title="Permalink to this headline">¶</a></h2>
<p>When packaging the design, make sure that the <code class="docutils literal notranslate"><span class="pre">rootfs</span></code>, <code class="docutils literal notranslate"><span class="pre">kernel_image</span></code>, and <code class="docutils literal notranslate"><span class="pre">platform</span></code> all point to the custom platform with the custom Linux build. If any of these items are not correct, packaging can throw an error, or, if it does package, then the emulation will malfunction.</p>
<p>To package the design run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ./sw
v++ -p -t hw_emu <span class="se">\</span>
    -f ../../../Versal_Platform_Creation/Tutorial-VCK190_Custom/ref_files/step3_pfm/platform_repo/vck190_custom/export/vck190_custom/vck190_custom.xpfm <span class="se">\</span>
    --package.rootfs<span class="o">=</span>../../../../Versal_Platform_Creation/Tutorial-VCK190_Custom/ref_files/step2_petalinux/build/petalinux/images/linux/rootfs.ext4 <span class="se">\</span>
    --package.image_format<span class="o">=</span>ext4 <span class="se">\</span>
    --package.boot_mode<span class="o">=</span>sd <span class="se">\</span>
    --package.kernel_image<span class="o">=</span>../../../../Versal_Platform_Creation/Tutorial-VCK190_Custom/ref_files/step2_petalinux/build/petalinux/images/linux/Image <span class="se">\</span>
    --package.defer_aie_run <span class="se">\</span>
    --package.sd_file host.exe ../tutorial.xclbin ../libadf.a
<span class="nb">cd</span> ..
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make package
</pre></div>
</div>
</div>
<div class="section" id="step-7-run-emulation">
<h2>Step 7 - Run Emulation<a class="headerlink" href="#step-7-run-emulation" title="Permalink to this headline">¶</a></h2>
<p>After packaging, everything is ready to run emulation or to run on hardware.</p>
<ol>
<li><p>To run emulation use the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make run_emu
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ./sw
./launch_hw_emu.sh 
<span class="nb">cd</span> ..
</pre></div>
</div>
</li>
</ol>
<p>When launched, use the Linux prompt to run the design.</p>
<ol>
<li><p>Execute the following command when the emulated Linux prompt displays:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /mnt/sd-mmcblk0p1
<span class="nb">export</span> <span class="nv">XILINX_XRT</span><span class="o">=</span>/usr
</pre></div>
</div>
<p>This sets up the design to run emulation. Run the design using the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./host.exe a.xclbin
</pre></div>
</div>
</li>
</ol>
<p>You should see an output displaying <strong>TEST PASSED</strong>. When this is shown, run the keyboard command: <code class="docutils literal notranslate"><span class="pre">Ctrl+A</span> <span class="pre">x</span></code> to end the QEMU instance.</p>
<div class="section" id="to-view-emulation-waveforms">
<h3>To View Emulation Waveforms<a class="headerlink" href="#to-view-emulation-waveforms" title="Permalink to this headline">¶</a></h3>
<p>The following image shows a debug waveform to show the data movement through the system. The general flow of data is as follows:</p>
<ul class="simple">
<li><p>Data goes from DDR memory to the AI Engine through the <code class="docutils literal notranslate"><span class="pre">mm2s</span></code> kernel.</p></li>
<li><p>The ADF graph processes the data and sends data to the <code class="docutils literal notranslate"><span class="pre">polar_clip</span></code> kernel.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">polar_clip</span></code> kernel processes data and sends it back to the ADF graph.</p></li>
<li><p>The AI Engine sends the resulting graph output to the <code class="docutils literal notranslate"><span class="pre">s2mm</span></code> kernel to store in DDR memory.</p></li>
</ul>
<p><img alt="xsim block diagram" src="../../../../_images/block_diagram.png" /></p>
<p><img alt="xsim waveform" src="../../../../_images/xsim_waveform.png" /></p>
<ol class="simple">
<li><p>Launch the emulation from the <code class="docutils literal notranslate"><span class="pre">sw</span></code> directory with <code class="docutils literal notranslate"><span class="pre">./launch_hw_emu.sh</span> <span class="pre">-g</span></code> command. The <code class="docutils literal notranslate"><span class="pre">-g</span></code> option tells the script to launch the Vivado Simulator (<code class="docutils literal notranslate"><span class="pre">xsim</span></code>) Waveform GUI as shown in the preceding image.</p></li>
<li><p>When the GUI opens up, add waveforms to the waveform viewer or you can use the existing <code class="docutils literal notranslate"><span class="pre">.wcfg</span></code> file in the repo by selecting <strong>File &gt; Simulation Waveform &gt; Open Configuration</strong>, locate the <code class="docutils literal notranslate"><span class="pre">custom.wcfg</span></code>, and click <strong>OK</strong>.</p></li>
<li><p>Click <strong>Run &gt; Run All</strong> or <strong>F3</strong>.</p></li>
</ol>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>This tutorial shows how to:</p>
<ul class="simple">
<li><p>Create a custom RTL kernel from a Vivado IP.</p></li>
<li><p>Modify the ADF graph to handle more PLIO interfacing.</p></li>
<li><p>Build and execute the design in emulation.</p></li>
</ul>
<div class="section" id="license">
<h3>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h3>
<p>Licensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License.</p>
<p>You may obtain a copy of the License at</p>
<p><a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<p class="sphinxhide" align="center"><sup>Copyright&copy; 2020–2021 Xilinx</sup><br><sup>XD012</sup></br></p></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../06-fft2d_AIEvsHLS/README.html" class="btn btn-neutral float-right" title="Table of Contents" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../03-beamforming/README.html" class="btn btn-neutral float-left" title="Beamforming Tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on November 15, 2021.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2021, Xilinx, Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>