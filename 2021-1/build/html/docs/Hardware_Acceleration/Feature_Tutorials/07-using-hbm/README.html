<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
  <title>Optimizing HBM &mdash; Vitis™ Tutorials 2021.1 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Host Memory Access" href="../08-using-hostmem/README.html" />
    <link rel="prev" title="Controlling Vivado Implementation" href="../06-controlling-vivado-implementation/README.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../../../index.html" class="icon icon-home"> Vitis™ Tutorials
            <img src="../../../../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2021.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">日本語版</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/master/docs-jp/index.html">Master</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Getting_Started/Vitis-Getting-Started.html">Getting Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Acceleration</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../Hardware-Acceleration.html">Hardware Acceleration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../Hardware-Acceleration.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Hardware-Acceleration.html#design-tutorials">Design Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../Hardware-Acceleration.html#feature-tutorials">Feature Tutorials</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../01-rtl_kernel_workflow/README.html">Getting Started with RTL Kernels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../02-mixing-c-rtl-kernels/README.html">Mixing C and RTL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03-dataflow_debug_and_optimization/README.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03-dataflow_debug_and_optimization/README.html#before-you-begin">Before You Begin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03-dataflow_debug_and_optimization/README.html#accessing-the-tutorial-reference-files">Accessing the Tutorial Reference Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03-dataflow_debug_and_optimization/README.html#next-steps">Next Steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../04-mult-ddr-banks/README.html">Using Multiple DDR Banks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05-using-multiple-cu/README.html">Using Multiple Compute Units</a></li>
<li class="toctree-l3"><a class="reference internal" href="../06-controlling-vivado-implementation/README.html">Controlling Vivado Implementation</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Optimizing for HBM</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#before-you-begin">Before You Begin</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tutorial-overview">Tutorial Overview</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../08-using-hostmem/README.html">Host Memory Access</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AI Engine</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../AI_Engine_Development/AI_Engine_Development.html">AI Engine Development</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Platforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Vitis_Platform_Creation/Vitis_Platform_Creation.html">Vitis Platform Creation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-2/docs/index.html">2020.2</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-1/docs/README.html">2020.1</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Vitis™ Tutorials</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../Hardware-Acceleration.html">Vitis Hardware Acceleration</a> &raquo;</li>
      <li>Optimizing HBM</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/docs/Hardware_Acceleration/Feature_Tutorials/07-using-hbm/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <table class="sphinxhide">
 <tr>
   <td align="center"><img src="https://raw.githubusercontent.com/Xilinx/Image-Collateral/main/xilinx-logo.png" width="30%"/><h1>2021.1 Vitis™ Application Acceleration Development Flow Tutorials</h1>
   <a href="https://github.com/Xilinx/Vitis-Tutorials/tree/2020.2">See 2020.2 Vitis Application Acceleration Development Flow Tutorials</a>
   </td>
 </tr>
 <tr>
 <td>
 </td>
 </tr>
</table><section id="optimizing-hbm">
<h1>Optimizing HBM<a class="headerlink" href="#optimizing-hbm" title="Permalink to this heading">¶</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>This tutorial covers essential steps on migrating an existing application using DDR memory to HBM memory.  The tutorial begins by explaining the structural differences between DDR and HBM, as well as achievable theoretical bandwidth. The second section uses a simple example with necessary steps to migrate an application from DDR to HBM.</p>
</section>
<section id="before-you-begin">
<h2>Before You Begin<a class="headerlink" href="#before-you-begin" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p><strong>TIP</strong>: This tutorial takes approximately two hours to complete.</p>
</div></blockquote>
<p>The labs in this tutorial use:</p>
<ul class="simple">
<li><p>BASH Linux shell commands.</p></li>
<li><p>2020.2 Vitis core development kit release and the <em>xilinx_u200_xdma_201830_2</em> and <em>xilinx_u50_gen3x16_xdma_201920_3</em> platforms. If necessary, it can be easily ported to other versions and platforms. Its also expected that you have a Xilinx® Alveo™ Data Center accelerator card that supports DDR and HBM to run this tutorial.</p></li>
</ul>
<blockquote>
<div><p><strong>IMPORTANT:</strong></p>
<ul class="simple">
<li><p>Before running any of the examples, make sure you have installed the Vitis core development kit as described in <a class="reference external" href="https://www.xilinx.com/html_docs/xilinx2020_2/vitis_doc/acceleration_installation.html#vhc1571429852245">Installation</a> in the Application Acceleration
Development flow of the Vitis Unified Software Platform Documentation (UG1416).</p></li>
<li><p>If you run applications on Xilinx® Alveo™ Data Center accelerator cards, ensure the card and software drivers have been correctly installed by following the instructions on the <a class="reference external" href="https://www.xilinx.com/products/boards-and-kits/alveo.html">Alveo Portfolio page</a>.</p></li>
</ul>
</div></blockquote>
<section id="accessing-the-tutorial-reference-files">
<h3>Accessing the Tutorial Reference files<a class="headerlink" href="#accessing-the-tutorial-reference-files" title="Permalink to this heading">¶</a></h3>
<ol class="simple">
<li><p>Enter the command in a terminal: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">http://github.com/Xilinx/Vitis-Tutorials</span></code>.</p></li>
<li><p>Navigate to <code class="docutils literal notranslate"><span class="pre">Hardware_Acceleration/Feature_Tutorials/04-using-hbm</span></code> directory, and then access the <code class="docutils literal notranslate"><span class="pre">reference-files</span></code> directory.</p></li>
</ol>
</section>
<section id="generating-all-the-xclbins">
<h3>Generating all the xclbins<a class="headerlink" href="#generating-all-the-xclbins" title="Permalink to this heading">¶</a></h3>
<ol>
<li><p>The tutorial provides the results as you go through. But if you intend to generate the xclbins, this can take several hours to generate the multiple <code class="docutils literal notranslate"><span class="pre">xclbin</span></code>. Its recommended to build all of these upfront so that you can focus on tutorial without waiting on these builds. The following steps will build the necessary xclbins for next two modules.</p></li>
<li><p>Update the <code class="docutils literal notranslate"><span class="pre">PLATFORM</span></code> variable in the <code class="docutils literal notranslate"><span class="pre">makefile/Makefile</span></code> as shown below with the platform intended to be used.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ifeq ($(memtype), DDR)
PLATFORM :=xilinx_u200_gen3x16_xdma_1_202110_1
else
PLATFORM :=xilinx_u50_gen3x16_xdma_201920_3
endif
</pre></div>
</div>
</li>
<li><p>Run the following command to build three xclbins for module 2 (Migration from DDR to HBM). The expected time to build xclbins is about 7-8 hours or you can run these in parallel.</p>
<p><code class="docutils literal notranslate"> <span class="pre">cd</span> <span class="pre">04-using-hbm/makefile;</span>&#160; <span class="pre">make</span> <span class="pre">ddr_addSeq_build</span>&#160; <span class="pre">hbm_addSeq_2Banks_build</span> <span class="pre">hbm_addSeq_overlap_build</span></code></p>
</li>
<li><p>Run the following command to build ten xclbins for module 3 (HBM Bandwidth Results). The expected time to build xclbins is about 5-6 hours since the following command will run parallel jobs by default</p>
<p><code class="docutils literal notranslate"> <span class="pre">cd</span> <span class="pre">04-using-hbm/makefile;</span>&#160; <span class="pre">make</span> <span class="pre">build_without_rama</span> <span class="pre">build_with_rama</span></code></p>
<p>If your machine doesn’t have enough resources to run multiple build jobs in parallel, you can always run these serially using the following commands but it may take about several hours.</p>
<p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">04-using-hbm/makefile;</span>&#160; <span class="pre">make</span> <span class="pre">noramajob-64</span> <span class="pre">noramajob-128</span> <span class="pre">noramajob-256</span> <span class="pre">noramajob-512</span> <span class="pre">noramajob-1024</span> <span class="pre">ramajob-64</span> <span class="pre">ramajob-128</span> <span class="pre">ramajob-256</span> <span class="pre">ramajob-512</span> <span class="pre">ramajob-1024;</span></code></p>
</li>
</ol>
<p>Please refer to the ./makefile/Makefile for more information.</p>
</section>
</section>
<section id="tutorial-overview">
<h2>Tutorial Overview<a class="headerlink" href="#tutorial-overview" title="Permalink to this heading">¶</a></h2>
<ol class="simple">
<li><p><a class="reference internal" href="1_overview.html"><span class="doc">HBM Overview</span></a>: Provides a brief overview on the structural differences between DDR and HBM and theoretical maximum bandwidth by HBM.</p></li>
<li><p><a class="reference internal" href="2_Migrating_to_HBM.html"><span class="doc">Migration from DDR to HBM</span></a>: Walks through the steps of migrating an existing DDR based application to HBM</p></li>
<li><p><a class="reference internal" href="3_BW_Explorations.html"><span class="doc">HBM Bandwidth Explorations</span></a>: Shows the achievable bandwidth using a single kernel port based on access pattern and transaction size.</p></li>
</ol>
<section id="id1">
<h3><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<p align="center"><b>
Start the next step: <a href="1_overview.md"> HBM Overview
</b></p>
</br>
<hr/>
<p align="center"><b><a href="docs/README.md">Return to Start of Tutorial</a></b></p><p class="sphinxhide" align="center"><sup>Copyright&copy; 2020-2021 Xilinx</sup></p></section>
</section>
</section>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../06-controlling-vivado-implementation/README.html" class="btn btn-neutral float-left" title="Controlling Vivado Implementation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../08-using-hostmem/README.html" class="btn btn-neutral float-right" title="Host Memory Access" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2022, Xilinx, Inc. Xilinx is now a part of AMD.
      <span class="lastupdated">Last updated on July 27, 2022.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>