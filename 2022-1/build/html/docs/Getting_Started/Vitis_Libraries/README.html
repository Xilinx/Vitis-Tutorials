<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
  <title>Getting Started With Vitis Libraries &mdash; Vitis™ Tutorials 2022.1 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Versal Platform Creation Quick Start" href="../Vitis_Platform/README.html" />
    <link rel="prev" title="4. Reviewing the DATAFLOW Optimization" href="../Vitis_HLS/dataflow_design.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../../index.html" class="icon icon-home"> Vitis™ Tutorials
            <img src="../../../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2022.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">日本語版</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/master/docs-jp/index.html">Main</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../Vitis-Getting-Started.html">Getting Started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Vitis/Getting_Started_Vitis.html">Vitis Introduction and Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Vitis_HLS/Getting_Started_Vitis_HLS.html">Vitis HLS</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Vitis Libraries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#before-you-begin">Before You Begin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setup-environment">Setup Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-vitis-libraries">Get Vitis Libraries</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-tutorial">Running the Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#create-and-run-a-hls-project">Create and run a HLS project</a></li>
<li class="toctree-l4"><a class="reference internal" href="#use-the-exported-ip-in-rtl-design-with-vivado-flow">Use the Exported IP in RTL Design with Vivado Flow</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reference">Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Vitis_Platform/README.html">Vitis Platform</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Acceleration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Hardware_Acceleration/Hardware-Acceleration.html">Hardware Acceleration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AI Engine</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../AI_Engine_Development/AI_Engine_Development.html">AI Engine Development</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Platforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Vitis_Platform_Creation/Vitis_Platform_Creation.html">Vitis Platform Creation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2021-2/build/html/index.html">2021.2</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2021-1/build/html/index.html">2021.1</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-2/docs/build/html/index.html">2020.2</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-1/docs/build/html/README.html">2020.1</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Vitis™ Tutorials</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../Vitis-Getting-Started.html">Introduction</a> &raquo;</li>
      <li>Getting Started With Vitis Libraries</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/Getting_Started/Vitis_Libraries/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <table>
 <tr>
   <td align="center"><img src="https://raw.githubusercontent.com/Xilinx/Image-Collateral/main/xilinx-logo.png" width="30%"/><h1>Vitis™ Application Acceleration Tutorials</h1>
   </td>
 </tr>
</table><div class="section" id="getting-started-with-vitis-libraries">
<h1>Getting Started With Vitis Libraries<a class="headerlink" href="#getting-started-with-vitis-libraries" title="Permalink to this heading">¶</a></h1>
<p><em><strong>Version: Vitis 2022.1</strong></em></p>
<p>This tutorial focuses on how to leverage the Vitis Libraries to build your own design. The tutorial will use FFT’s L1 library as an example. It contains instructions from cloning the library, compile and simulate on its own till instantiate it into top-level design.</p>
<div class="section" id="before-you-begin">
<h2>Before You Begin<a class="headerlink" href="#before-you-begin" title="Permalink to this heading">¶</a></h2>
<div class="section" id="setup-environment">
<h3>Setup Environment<a class="headerlink" href="#setup-environment" title="Permalink to this heading">¶</a></h3>
<p>Before playing with the libraries, you need to set up Vitis environment first. For how to set up Vitis environment, please refer to <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1393-vitis-application-acceleration/Setting-Up-the-Environment-to-Run-the-Vitis-Software-Platform">Vitis online documentation</a>.
Below are the example scripts to set up Vitis and XRT:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ source &lt;Vitis Tool Installation Path&gt;/Vitis/2022.1/settings64.sh
$ source /opt/xilinx/xrt/setup.sh
$ export PLATFORM_REPO_PATHS=&lt;Platform Installation Path&gt;
</pre></div>
</div>
</div>
<div class="section" id="get-vitis-libraries">
<h3>Get Vitis Libraries<a class="headerlink" href="#get-vitis-libraries" title="Permalink to this heading">¶</a></h3>
<p>Now we need to clone the Vitis Libraries into local path.</p>
<p>The Vitis Library is open source on Xilinx GitHub: https://github.com/Xilinx/Vitis_Libraries.</p>
<p>Assuming you are using $/home/project$ as working directory, then use following command to clone the Vitis Library repository into the working directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">project</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">Xilinx</span><span class="o">/</span><span class="n">Vitis_Libraries</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>This will take a few seconds to minutes for downloading depending on network.
After it is completed, you may browse into the sub folders to get familiar with the file structure.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Vitis_Libraries/
├── Jenkinsfile
├── LICENSE.txt
├── README.md
├── blas/
├── codec/
├── data_analytics/
├── data_compression/
├── database/
├── dsp/
├── genomics/
├── graph/
├── hpc/
├── quantitative_finance/
├── security/
├── solver/
├── sparse/
├── utils/
└── vision/
</pre></div>
</div>
<p>There are many different categories of libraries under the top level folder. In this lab, we are going to use the <strong>dsp</strong> library. So let’s enter the the sub-directory <em>dsp</em>, and you can find following directory structure.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>dsp/
├── Jenkinsfile
├── L1/
│   ├── README.md
│   ├── examples/
│   ├── include/
│   ├── meta/
│   ├── src/
│   └── tests/
├── L2/
│   ├── README.md
│   ├── benchmarks/
│   ├── examples/
│   ├── include/
│   ├── meta/
│   └── tests/
├── LICENSE.txt
├── README.md
├── docs/
│   ├── Doxyfile
│   ├── Makefile
│   ├── Makefile.sphinx
│   ├── README.md
│   └── src/
├── ext/
│   ├── README.md
│   ├── make_utility/
│   └── xcl2/
└── library.json
</pre></div>
</div>
<p>This library is written in C++ and it contains three levels of abstractions.</p>
<ul class="simple">
<li><p>L1: Module level, it provides optimized hardware implementation of the core LZ based and data compression specific modules like lz4 compress and snappy compress.</p></li>
<li><p>L2: Kernel level, a demo on lz4, snappy, zlib and zstd data compression algorithms are shown via kernel which internally uses the optimized hardware modules.</p></li>
<li><p>L3: The software API level will wrap the details of offloading acceleration with prebuilt binary (overlay) and allow users to accelerate data compression tasks on Alveo cards without hardware development.</p></li>
</ul>
</div>
</div>
<div class="section" id="running-the-tutorial">
<h2>Running the Tutorial<a class="headerlink" href="#running-the-tutorial" title="Permalink to this heading">¶</a></h2>
<div class="section" id="create-and-run-a-hls-project">
<h3>Create and run a HLS project<a class="headerlink" href="#create-and-run-a-hls-project" title="Permalink to this heading">¶</a></h3>
<p>In this step, we are going to create a HLS project by using the files provided in the <a class="reference external" href="https://github.com/Xilinx/Vitis_Libraries/tree/master/dsp/L1/examples/1Dfix_impluse">1Dfix_impluse</a> example of L1 Vitis dsp library. The source files and script file are all located under this folder. Here we assume you have cloned the Vitis Libraries into <em>/home/project/Vitis_Libraries</em> directory.</p>
<ol class="simple">
<li><p>Go into the <code class="docutils literal notranslate"><span class="pre">/home/project/Vitis_libraries/dsp/L1/examples/1Dfix_impluse</span></code> folder and run below command to create the HLS project.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">make</span> <span class="n">run</span> <span class="n">CSIM</span><span class="o">=</span><span class="mi">1</span> <span class="n">CSYNTH</span><span class="o">=</span><span class="mi">1</span> <span class="n">COSIM</span><span class="o">=</span><span class="mi">1</span> <span class="n">XPART</span><span class="o">=</span><span class="n">xcvu9p</span><span class="o">-</span><span class="n">flgc2104</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="n">e</span>
</pre></div>
</div>
<p>By executing the command it will run through project creation, C synthesis, C simulation and Co-simulation flow. You can modify the parameter to skip certain steps. Here the xcvu9p part is used as an example, you may change it to other FPGA parts. Or you can use <code class="docutils literal notranslate"><span class="pre">DEVICE</span></code> keyword to specify an acceleration platform such as u250 Alveo platform. At the end of the flow, console window will print out the input and output data value and show <em><strong>PASS</strong></em> at the end of simulation.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>

<span class="o">===============================================================</span>
<span class="o">--</span><span class="n">Input</span> <span class="n">Impulse</span><span class="p">:</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="o">===============================================================</span>
<span class="o">===============================================================</span>
<span class="o">--</span><span class="n">Output</span> <span class="n">Step</span> <span class="n">fuction</span><span class="p">:</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="o">===============================================================</span>
<span class="n">INFO</span><span class="p">:</span> <span class="p">[</span><span class="n">COSIM</span> <span class="mi">212</span><span class="o">-</span><span class="mi">1000</span><span class="p">]</span> <span class="o">***</span> <span class="n">C</span><span class="o">/</span><span class="n">RTL</span> <span class="n">co</span><span class="o">-</span><span class="n">simulation</span> <span class="n">finished</span><span class="p">:</span> <span class="n">PASS</span> <span class="o">***</span>

<span class="o">...</span>
</pre></div>
</div>
<p>The testbench uses a single pulse signal as input to the FFT and the output should be a step signal. And these can be verified by looking at the values printed out to the screen.</p>
<ol class="simple">
<li><p>Now we will open the project in Vitis HLS GUI. Enter following command in <code class="docutils literal notranslate"><span class="pre">/home/project/Vitis_libraries/dsp/L1/examples/1Dfix_impluse</span></code> directory:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vitis_hls</span> <span class="o">-</span><span class="n">p</span> <span class="n">prj_impulse_test</span><span class="o">.</span><span class="n">prj</span> <span class="o">&amp;</span>
</pre></div>
</div>
<p>You may browse into the source files, synthesis report or waveform viewer by simply selecting them from the ‘Explorer’ window and ‘Flow Navigator’ window.</p>
<p>The top_module.cpp calls the FFT library and the parameters are defined in the data_path.hpp file. For detailed instructions about how to use FFT library, please refer to the Vitis Library <a class="reference external" href="https://xilinx.github.io/Vitis_Libraries/dsp/2022.1/user_guide/L1.html#fixed-point-1-d-ssr-fft-usage">github.io</a> page.</p>
<ol class="simple">
<li><p>Export IP in HLS project</p></li>
</ol>
<p>Now we have verified that the library IP is working properly and we will export it to a Vivado IP. To do so, click the <code class="docutils literal notranslate"><span class="pre">Export</span> <span class="pre">RTL</span></code> from <em>IMPLEMENTATION</em> item in <em>Flow Navigator</em>. In the pop-up window, we will leave every settings unchanged and click <code class="docutils literal notranslate"><span class="pre">OK</span></code> to export the IP.
By default, the IP will be exported to the <code class="docutils literal notranslate"><span class="pre">&lt;project</span> <span class="pre">folder&gt;/solutionN/impl</span></code>, in this case, it is in following directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">Vitis_Libraries</span><span class="o">/</span><span class="n">dsp</span><span class="o">/</span><span class="n">L1</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="mi">1</span><span class="n">Dfix_impluse</span><span class="o">/</span><span class="n">prj_impulse_test</span><span class="o">.</span><span class="n">prj</span><span class="o">/</span><span class="n">solution1</span><span class="o">/</span><span class="n">impl</span>
</pre></div>
</div>
<p>However you may customize the path in the export pop-up menu.</p>
<p>In the next step, we will launch Vivado and create a top-level design to instantiate the exported IP. You may close the Vitis HLS GUI now.</p>
<ol class="simple">
<li><p>View Co-Simulation Waveform (optional)</p></li>
</ol>
<p>You could modify the co-simulation related command lines in file <code class="docutils literal notranslate"><span class="pre">./run_hls.tcl</span></code> (around line 48) as below to turn-on the xsim waveform dump switch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>...
if {$COSIM == 1} {
  cosim_design -wave_debug
}
...
</pre></div>
</div>
<p>Then re-run the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">make</span> <span class="n">run</span> <span class="n">COSIM</span><span class="o">=</span><span class="mi">1</span> <span class="n">XPART</span><span class="o">=</span><span class="n">xcvu9p</span><span class="o">-</span><span class="n">flgc2104</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="n">e</span>
</pre></div>
</div>
<p>In this way you could get the simulation waveform, such as following example for a single SSR stream port:</p>
<p><img alt="../../../_images/cosim_wave.png" src="../../../_images/cosim_wave.png" /></p>
<p>We will use the interface signals behavior in co-simulation waveform as a reference for the following Vivado simulation testbench.</p>
</div>
<div class="section" id="use-the-exported-ip-in-rtl-design-with-vivado-flow">
<h3>Use the Exported IP in RTL Design with Vivado Flow<a class="headerlink" href="#use-the-exported-ip-in-rtl-design-with-vivado-flow" title="Permalink to this heading">¶</a></h3>
<p>Assuming you are in the root directory for this tutorial.</p>
<ol class="simple">
<li><p>Create top level project in Vivado using provided RTL source files</p></li>
</ol>
<p>Use following command to create a directory and start Vivado GUI:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">vivado</span>
<span class="n">cd</span> <span class="o">./</span><span class="n">vivado</span>
<span class="n">vivado</span> <span class="o">&amp;</span>
</pre></div>
</div>
<p>Create a new project with default project name <em>project_1</em> and select the type as <em><strong>RTL Project</strong></em> with <em><strong>Do not specify sources at this time</strong></em> box checked. Select <em><strong>xcvu9p-flgc2104-2-e</strong></em> as the part of this project. You may select other parts as well.</p>
<p>Now the project has been created. Let’s add the source files into the project. Select <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">or</span> <span class="pre">create</span> <span class="pre">design</span> <span class="pre">sources</span></code> menu from <code class="docutils literal notranslate"><span class="pre">PROJECT</span> <span class="pre">MANAGER</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">Sources</span></code> and then click <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">Files</span></code> to add the <em><strong>fft_wrap.v</strong></em> which is located under <em><strong>src</strong></em> folder. Then select <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">or</span> <span class="pre">create</span> <span class="pre">simulation</span> <span class="pre">sources</span></code> menu and click <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">Files</span></code> to add the <em><strong>fft_tb.v</strong></em> into the project. Use the same procedure to add the <em><strong>datain.txt</strong></em> and <em><strong>dataref.txt</strong></em> files into the project as simulation sources as well.</p>
<p>The <em><strong>fft_wrap.v</strong></em> simply instantiates the FFT IP which we just exported earlier. We need to set up the IP repo path in order to let Vivado find it. To do so, click <code class="docutils literal notranslate"><span class="pre">settings</span></code> from Flow Navigator panel and add the IP export folder to the repo path.</p>
<p><img alt="../../../_images/ip_repo.png" src="../../../_images/ip_repo.png" /></p>
<p>Then click <code class="docutils literal notranslate"><span class="pre">IP</span> <span class="pre">Catalog</span></code> from Flow Navigator and you should see the FFT IP shown in the User Repository.</p>
<p><img alt="../../../_images/ip_catalog.png" src="../../../_images/ip_catalog.png" /></p>
<p>Double click on the IP and click <code class="docutils literal notranslate"><span class="pre">OK</span></code> to add it into the project. Now you should see the IP core was correctly instantiated in the project hierarchy view.</p>
<ol class="simple">
<li><p>Open the <strong>fft_wrap.v</strong> file to take a look at its port signals. Along with the clock, reset and control signals (start, done, idle, ready), there are four input steam ports (<em>inData_x</em> and <em>inData_x_ce</em>) and four output stream ports (<em>outData_x</em> and <em>outData_x</em>we*). The input and output data bus are simply validated by <em>_ce</em> or <em>_we</em> signals. In the testbench file <strong>fft_tb.v</strong>, we read the input data from <strong>datain.txt</strong> file, divide them into four data streams and then send them to the fft module. Four output data streams are received and compared with the reference data file <strong>dataref.txt</strong>. The test datasets are identical with the simulation example in <em>/home/project/Vitis_Libraries/dsp/L1/examples/1Dfix_impluse</em> directory.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">fft_wrap</span> <span class="p">(</span>
  <span class="n">output</span>          <span class="n">inData_0_ce</span><span class="p">,</span>
  <span class="n">output</span>          <span class="n">inData_1_ce</span><span class="p">,</span>
  <span class="n">output</span>          <span class="n">inData_2_ce</span><span class="p">,</span>
  <span class="n">output</span>          <span class="n">inData_3_ce</span><span class="p">,</span>

  <span class="nb">input</span>   <span class="p">[</span><span class="mi">31</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span>  <span class="n">inData_0</span><span class="p">,</span>
  <span class="nb">input</span>   <span class="p">[</span><span class="mi">31</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span>  <span class="n">inData_1</span><span class="p">,</span>
  <span class="nb">input</span>   <span class="p">[</span><span class="mi">31</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span>  <span class="n">inData_2</span><span class="p">,</span>
  <span class="nb">input</span>   <span class="p">[</span><span class="mi">31</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span>  <span class="n">inData_3</span><span class="p">,</span>

  <span class="n">output</span>          <span class="n">outData_0_we</span><span class="p">,</span>
  <span class="n">output</span>          <span class="n">outData_1_we</span><span class="p">,</span>
  <span class="n">output</span>          <span class="n">outData_2_we</span><span class="p">,</span>
  <span class="n">output</span>          <span class="n">outData_3_we</span><span class="p">,</span>  

  <span class="n">output</span>  <span class="p">[</span><span class="mi">41</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span>  <span class="n">outData_0</span><span class="p">,</span>
  <span class="n">output</span>  <span class="p">[</span><span class="mi">41</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span>  <span class="n">outData_1</span><span class="p">,</span>
  <span class="n">output</span>  <span class="p">[</span><span class="mi">41</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span>  <span class="n">outData_2</span><span class="p">,</span>
  <span class="n">output</span>  <span class="p">[</span><span class="mi">41</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span>  <span class="n">outData_3</span><span class="p">,</span>
  
  <span class="nb">input</span>           <span class="n">clk</span><span class="p">,</span>
  <span class="nb">input</span>           <span class="n">rst</span><span class="p">,</span>
  <span class="nb">input</span>           <span class="n">start</span><span class="p">,</span>
  <span class="n">output</span>          <span class="n">done</span><span class="p">,</span>
  <span class="n">output</span>          <span class="n">idle</span><span class="p">,</span>
  <span class="n">output</span>          <span class="n">ready</span>

<span class="p">);</span>
</pre></div>
</div>
<ol class="simple">
<li><p>Simulate the top level project</p></li>
</ol>
<p>Click <code class="docutils literal notranslate"><span class="pre">Run</span> <span class="pre">Simulation</span></code> from Flow Navigator and select <code class="docutils literal notranslate"><span class="pre">Run</span> <span class="pre">Behavioral</span> <span class="pre">Simulation</span></code>. Vivado simulator launches with waveform loaded. Please note that the input data bus width is 32-bit and output data bus width is 42-bit.</p>
<p>If no issues encountered, simulation will end smoothly.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Result verification SUCCEED!
Simulation finished.
</pre></div>
</div>
<p>Below is the screen shot of the simulation waveform.</p>
<p><img alt="../../../_images/xsim_result.png" src="../../../_images/xsim_result.png" /></p>
<p>Close the simulation window.</p>
<ol class="simple">
<li><p>Implement the top level project</p></li>
</ol>
<p>Click <code class="docutils literal notranslate"><span class="pre">Run</span> <span class="pre">Implementation</span></code> from Flow Navigator panel and click <em><strong>OK</strong></em> in the pop-up window. This will run through the Vivado synthesis and implementation flow which will generate both timing and resource reports for this IP.</p>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>In this tutorial, we explain how to leverage a L1 Vitis library element to build your own design. The FFT example is selected for explanation, and you may follow similar flow to use other library elements.</p>
</div>
<div class="section" id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Permalink to this heading">¶</a></h2>
<p>Documentation on Vitis Libraries: https://xilinx.github.io/Vitis_Libraries/</p>
<p align="center" class="sphinxhide"><sup>Copyright&copy; 2022 Xilinx</sup></p></div>
</div>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../Vitis_HLS/dataflow_design.html" class="btn btn-neutral float-left" title="4. Reviewing the DATAFLOW Optimization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../Vitis_Platform/README.html" class="btn btn-neutral float-right" title="Versal Platform Creation Quick Start" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2022, Xilinx, Inc..
      <span class="lastupdated">Last updated on May 16, 2022.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>