


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

	<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="37701bd4-e5c0-4ee3-9329-e7475d0b13a7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
		<!-- Google Tag Manager -->
	<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
	<!-- End Google Tag Manager -->
	
        <!-- Google Tag Manager -->
        <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
        <!-- End Google Tag Manager -->	

  
  
  
  

  
      <script type="text/javascript" src="../../../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../../../_static/js/Searchbox.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/header-footer.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Vitis Platform Creation Tutorials" href="../../../Vitis_Platform_Creation/Vitis_Platform_Creation.html" />
    <link rel="prev" title="Introduction" href="../15-post-link-recompile/README.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
 <div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">

    
    

    



<div class="xf-content-height">
    

<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
    
    <div class="header parbase aem-GridColumn aem-GridColumn--default--12"><noindex>
	<header data-component="header" class="site-header">
		<nav class="navbar navbar-default">
			<div class="container-fluid main-nav">
				<div class="row">
					<div class="navbar-column col-xs-4 col-sm-5">
						<ul class="nav navbar-nav hidden-xs">
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
								</li>
							</ul>
							
						<ul class="nav navbar-nav hidden-sm hidden-md hidden-lg">
							<li>
									<button data-target="#header-container-0" data-function="toggle">Solutions</button>
								</li>
							<li>
									<button data-target="#header-container-1" data-function="toggle">Products</button>
								</li>
							<li>
									<button data-target="#header-container-2" data-function="toggle">Company</button>
								</li>
							</ul>
							
						<div id="header-container-0" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-1" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-2" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							</div>
					<div class="logo-column col-xs-4 col-sm-2">
						<div class="logo">
							<a target="_blank" href="https://www.xilinx.com/">
								<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
							</a>
						</div>
					</div>

				</div>
			</div>
			</nav></header></noindex></div>
		
	
</div>

    
</div>
</div>

<div class="calloutBanner parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><div class="callout-banner">
    Xilinx is now a part of <a target="_blank" href="https://www.amd.com/en/corporate/xilinx-acquisition">AMD</a> |  <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Learn More</a>
</div>
</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home" alt="Documentation Home"> Vitis™ Tutorials
          

          
          </a>

          
            
            
              <div class="version">
                2022.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">日本語版</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/master/docs-jp/index.html">Main</a></li>
</ul>
<p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Getting_Started/Vitis-Getting-Started.html">Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Acceleration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Hardware_Acceleration/Hardware-Acceleration.html">Hardware Acceleration</a></li>
</ul>
<p class="caption"><span class="caption-text">AI Engine</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../AI_Engine_Development.html">AI Engine Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../AI_Engine_Development.html#design-tutorials">Design Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../AI_Engine_Development.html#feature-tutorials">Feature Tutorials</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../02-using-gmio/README.html">Using GMIO with AIE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03-rtp-reconfiguration/README.html">Runtime Parameter Reconfiguration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03-rtp-reconfiguration/README.html#support">Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03-rtp-reconfiguration/README.html#license">License</a></li>
<li class="toctree-l3"><a class="reference internal" href="../04-packet-switching/README.html">Packet Switching Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="../04-packet-switching/README.html#support">Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../04-packet-switching/README.html#license">License</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05-AI-engine-versal-integration/README.html">Versal Integration for Hardware Emulation and Hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05-AI-engine-versal-integration/README.html#support">Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05-AI-engine-versal-integration/README.html#license">License</a></li>
<li class="toctree-l3"><a class="reference internal" href="../06-versal-system-design-clocking-tutorial/README.html">Versal System Design Clocking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../07-AI-Engine-Floating-Point/README.html">Using Floating-Point in the AI Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08-dsp-library/README.html">DSP Library Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="../09-debug-walkthrough/README.html">Debug Walkthrough</a></li>
<li class="toctree-l3"><a class="reference internal" href="../10-aie-dsp-lib-model-composer/README.html">AI Engine DSP Library and Model Composer Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="../11-ai-engine-emulation-waveform-analysis/README.html">Versal Emulation Waveform Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../12-axis-traffic-generator/README.html">AXIS External Traffic Generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../13-aie-performance-analysis/README.html">AI Engine Performance and Deadlock Analysis Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="../13-aie-performance-analysis/README.html#support">Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../13-aie-performance-analysis/README.html#license">License</a></li>
<li class="toctree-l3"><a class="reference internal" href="../14-implementing-iir-filter/README.html">Implementing an IIR Filter on the AI Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../01-aie_a_to_z/README.html">A to Z Bare-metal Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../15-post-link-recompile/README.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../15-post-link-recompile/README.html#before-you-begin">Before You Begin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../15-post-link-recompile/README.html#ai-engine-application-post-link-recompile">AI Engine Application Post-Link Recompile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../15-post-link-recompile/README.html#objectives">Objectives</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Python and C++ External Traffic Generators for AI Engine Simulation and Emulation Flows</a></li>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#objectives">Objectives</a></li>
<li class="toctree-l4"><a class="reference internal" href="#before-you-begin">Before You Begin</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#design-overview">Design Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tutorial-steps">Tutorial Steps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#step-1-adf-graph-modifications">Step 1: ADF Graph Modifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-2-linking-for-hardware-emulation">Step 2: Linking for Hardware Emulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-3-external-traffic-generators">Step 3: External Traffic Generators</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-4-testing-the-functionalities">Step 4: Testing the Functionalities</a></li>
<li class="toctree-l4"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Platforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Vitis_Platform_Creation/Vitis_Platform_Creation.html">Vitis Platform Creation</a></li>
</ul>
<p class="caption"><span class="caption-text">Other Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2021-2/build/html/index.html">2021.2</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2021-1/build/html/index.html">2021.1</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-2/docs/index.html">2020.2</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-1/docs/README.html">2020.1</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../../../_sources/docs/AI_Engine_Development/Feature_Tutorials/16-external-traffic-generator-aie/README.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Vitis™ Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../AI_Engine_Development.html">AI Engine Development</a> &raquo;</li>
        
      <li>Python and C++ External Traffic Generators for AI Engine Simulation and Emulation Flows</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/docs/AI_Engine_Development/Feature_Tutorials/16-external-traffic-generator-aie/README.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <table class="sphinxhide" width="100%">
 <tr width="100%">
    <td align="center"><img src="https://raw.githubusercontent.com/Xilinx/Image-Collateral/main/xilinx-logo.png" width="30%"/><h1>AI Engine Development</h1>
    <a href="https://www.xilinx.com/products/design-tools/vitis.html">See Vitis™ Development Environment on xilinx.com</br></a>
    <a href="https://www.xilinx.com/products/design-tools/vitis/vitis-ai.html">See Vitis™ AI Development Environment on xilinx.com</a>
    </td>
 </tr>
</table><div class="section" id="python-and-c-external-traffic-generators-for-ai-engine-simulation-and-emulation-flows">
<h1>Python and C++ External Traffic Generators for AI Engine Simulation and Emulation Flows<a class="headerlink" href="#python-and-c-external-traffic-generators-for-ai-engine-simulation-and-emulation-flows" title="Permalink to this headline">¶</a></h1>
<p><em><strong>Version: Vitis 2022.1</strong></em></p>
</div>
<div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>Versal™ adaptive compute acceleration platforms (ACAPs) combine Scalar Engines, Adaptable Engines, and Intelligent Engines with leading-edge memory and interfacing technologies to deliver powerful heterogeneous acceleration for any application. In a bottom-up approach, each part of system is simulated independently before being integrated in a more complete simulation. An heterogeneous device as the Versal ACAP authorizes dataflows to go through a diversity of engines for completion.</p>
<p>This tutorial develops a case in which the dataflow goes back and forth multiple times between the programmable logic (PL) and the AI Engine array. Some PL blocks are only source or destination kernels, whereas others are processing kernels within the dataflow. This tutorial demonstrates how to create external traffic generators as Python scripts or C++ applications to exercise the AI Engine kernels in the x86 simulator (<code class="docutils literal notranslate"><span class="pre">x86simulator</span></code>), AI Engine simulator (<code class="docutils literal notranslate"><span class="pre">aiesimulator</span></code>), and in hardware emulation (<code class="docutils literal notranslate"><span class="pre">hw_emu</span></code>).</p>
<div class="section" id="objectives">
<h2>Objectives<a class="headerlink" href="#objectives" title="Permalink to this headline">¶</a></h2>
<p>After completing the tutorial, you will be able to do the following:</p>
<ul class="simple">
<li><p>Create a Python script or C++ application.</p></li>
<li><p>Pass data between the traffic generator and the AI Engine through specific ports.</p></li>
<li><p>Capture and send data and display using Python.</p></li>
<li><p>Capture and send data using C++.</p></li>
<li><p>Compile and simulate a design.</p></li>
<li><p>Understand the necessary code changes in the graph and host to make the design work seamlessly between <code class="docutils literal notranslate"><span class="pre">x86simulator</span></code>, <code class="docutils literal notranslate"><span class="pre">aiesimulator</span></code>, and <code class="docutils literal notranslate"><span class="pre">hw_emu</span></code>.</p></li>
<li><p>Bring up results in Vitis Analyzer.</p></li>
</ul>
</div>
<div class="section" id="before-you-begin">
<h2>Before You Begin<a class="headerlink" href="#before-you-begin" title="Permalink to this headline">¶</a></h2>
<p>This tutorial uses Python. In addition to having the Xilinx tools installed, you also need a valid installation of Python 3.</p>
<div class="section" id="python-environment-setup">
<h3>Python Environment Setup<a class="headerlink" href="#python-environment-setup" title="Permalink to this headline">¶</a></h3>
<p>The external traffic generators use Python and require non-standard packages to be installed. Perform the following steps to install these packages.</p>
<ol>
<li><p>Make sure you are using the latest version of Python 3. This tutorial has been developed with version 3.6.5. Run the following command to check the version:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3 --version
</pre></div>
</div>
</li>
<li><p>Install the appropriate packges using <code class="docutils literal notranslate"><span class="pre">pip</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip -r install requirements.txt
</pre></div>
</div>
<p>This file contains the following packages:</p>
<div class="highlight-txt notranslate"><div class="highlight"><pre><span></span>numpy
multiprocessing
struct
matplotlib
</pre></div>
</div>
</li>
<li><p>Validate your environment by running the following command. If errors are reported during import, rerun <code class="docutils literal notranslate"><span class="pre">pip</span></code> and install the packages manually.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3 -c <span class="s1">&#39;import numpy, matplotlib, struct, multiprocessing&#39;</span>
</pre></div>
</div>
</li>
<li><p>Add the provided packages for external traffic generators to the <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code>. Run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PYTHONPATH</span><span class="o">=</span><span class="si">${</span><span class="nv">XILINX_VIVADO</span><span class="si">}</span>/data/emulation/hw_em/lib/python/:<span class="si">${</span><span class="nv">XILINX_VIVADO</span><span class="si">}</span>/data/emulation/ip_utils/xtlm_ipc/xtlm_ipc_v1_0/python/:<span class="si">${</span><span class="nv">PYTHONPATH</span><span class="si">}</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="xilinx-tools-initialization">
<h3>Xilinx Tools Initialization<a class="headerlink" href="#xilinx-tools-initialization" title="Permalink to this headline">¶</a></h3>
<p>Before starting this tutorial, run the following steps.</p>
<ol class="simple">
<li><p>Set up the following paths in the script <code class="docutils literal notranslate"><span class="pre">env_setup.sh</span></code>:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">XILINX_TOOLS_LOCATION</span><span class="o">=</span>&lt;Path to Vitis Build - Directory&gt;/Vitis/2022.1
<span class="nb">export</span> <span class="nv">PLATFORM_REPO_PATHS</span><span class="o">=</span>&lt;YOUR-PLATFORMS-DIRECTORY&gt;
<span class="nb">export</span> <span class="nv">XILINX_VERSAL_SW</span><span class="o">=</span>&lt;Path to xilinx-versal-common-v2022.1 - Directory&gt;
<span class="nb">export</span> <span class="nv">XILINX_XRT</span><span class="o">=</span>/&lt;user-path&gt;/opt/xilinx/xrt
<span class="nb">export</span> <span class="nv">PYTHON3_LOCATION</span><span class="o">=</span>&lt;user-path&gt;
</pre></div>
</div>
<ol class="simple">
<li><p>The script sets the necessary paths to run the tutorial:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ROOTFS</span></code>, <code class="docutils literal notranslate"><span class="pre">IMAGE</span></code>, <code class="docutils literal notranslate"><span class="pre">SYSROOT</span></code>, <code class="docutils literal notranslate"><span class="pre">CXX</span></code>, and <code class="docutils literal notranslate"><span class="pre">SDKTARGETSYSROOT</span></code> for host software compilation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBRARY_PATH</span></code> to handle external traffic generator handles.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PATH</span></code> and <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> for the Python-based external traffic generator.</p></li>
</ul>
</li>
<li><p>This tutorial targets the VCK190 board, which is currently available on the <a class="reference external" href="https://www.xilinx.com/products/boards-and-kits/vck190.html">Xilinx website</a>. Because this tutorial is about simulation, you do not need to have the real hardware.</p></li>
<li><p>Run the <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">env_setup.sh</span></code> script in the console.</p></li>
</ol>
</div>
</div>
</div>
<div class="section" id="design-overview">
<h1>Design Overview<a class="headerlink" href="#design-overview" title="Permalink to this headline">¶</a></h1>
<p>This tutorial is based on a basic design, as shown below. This design contains two AI Engine kernels with an intermediate kernel in the PL. The overall system is fed and flushed from kernels that are also in the PL.</p>
<p><img alt="Diagram of the design" src="../../../../_images/TutorialImages-CompleteSystem.svg" /></p>
<p>In a standard simulation scheme, you would have to perform several steps:</p>
<ul class="simple">
<li><p>In <code class="docutils literal notranslate"><span class="pre">x86simulator</span></code> and <code class="docutils literal notranslate"><span class="pre">aiesimulator</span></code>, you would have to replace <code class="docutils literal notranslate"><span class="pre">mm2s</span></code> and the output of <code class="docutils literal notranslate"><span class="pre">polar_clip</span></code> with text test vectors and verify that the input of <code class="docutils literal notranslate"><span class="pre">polar_cip</span></code> and <code class="docutils literal notranslate"><span class="pre">s2mm</span></code> is as intended.</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">hw_emu</span></code>, you would have to build the three PL kernels <code class="docutils literal notranslate"><span class="pre">mm2s</span></code>, <code class="docutils literal notranslate"><span class="pre">polar_clip</span></code>, and <code class="docutils literal notranslate"><span class="pre">s2mm</span></code> either from RTL code or HLS, link them with Vitis compiler to create the XCLBIN file, create a complete host application that also verifies the output of the system, and then simulate using <code class="docutils literal notranslate"><span class="pre">hw_emu</span></code>.</p></li>
</ul>
<p>This tutorial shows you how to write Python scripts and C++ traffic generators to replace these text files that you would have to create offline. It also allows you to simulate the design in various different ways:</p>
<ul class="simple">
<li><p>In <code class="docutils literal notranslate"><span class="pre">x86simulator</span></code>, <code class="docutils literal notranslate"><span class="pre">aiesimulator</span></code>, and <code class="docutils literal notranslate"><span class="pre">hw_emu</span></code></p></li>
<li><p>With text files as test vectors</p></li>
<li><p>With external traffic generators in Python or C++</p></li>
</ul>
<p>A standard simulation with text files would be represented as shown below:</p>
<p><img alt="Standard Simulation" src="../../../../_images/TutorialImages-StandardSimulation.svg" /></p>
<p>When using external traffic generators, communication with the simulator is achieved through Unix sockets, as shown below:</p>
<p><img alt="External Traffic Generator based Simulation" src="../../../../_images/TutorialImages-ETGSimulation.svg" /></p>
</div>
<div class="section" id="tutorial-steps">
<h1>Tutorial Steps<a class="headerlink" href="#tutorial-steps" title="Permalink to this headline">¶</a></h1>
<div class="section" id="step-1-adf-graph-modifications">
<h2>Step 1: ADF Graph Modifications<a class="headerlink" href="#step-1-adf-graph-modifications" title="Permalink to this headline">¶</a></h2>
<p>To use external traffic generators for any kind of simulation, you need to make modifications to the graph code, specifically the <code class="docutils literal notranslate"><span class="pre">graph.h</span></code> file. This file contains the PLIO constructors, which are used to connect the graph to the programmable logic.</p>
<ol class="simple">
<li><p>Navigate to <code class="docutils literal notranslate"><span class="pre">aie/src</span></code> and open <code class="docutils literal notranslate"><span class="pre">graph.h</span></code>.</p></li>
<li><p>Notice that the <code class="docutils literal notranslate"><span class="pre">#ifdef</span> <span class="pre">EXTERNAL_IO</span></code> is used and the lines of code under it do not have the data file in the PLIO constructors. This is needed for the external traffic generator to work properly, because the data file (seen on lines 85 to 88) take precedence.</p></li>
<li><p>Take note of the names (first argument) of the PLIO constructors. These will be used to hook up the external traffic generators.</p></li>
<li><p>Close <code class="docutils literal notranslate"><span class="pre">graph.h</span></code>.</p></li>
</ol>
<p><strong>Note</strong>: Code guarding this is optional. It is used in this instance to show the changes needed. These modifications are simple. Remove the filenames of the test vectors, and the simulator (AI Engine or x86) automatically takes responsibility for creating ports to connect Unix sockets.</p>
</div>
<div class="section" id="step-2-linking-for-hardware-emulation">
<h2>Step 2: Linking for Hardware Emulation<a class="headerlink" href="#step-2-linking-for-hardware-emulation" title="Permalink to this headline">¶</a></h2>
<p>In a standard simulation, the various XO files (<code class="docutils literal notranslate"><span class="pre">mm2s</span></code>, <code class="docutils literal notranslate"><span class="pre">polar_clip</span></code>, and <code class="docutils literal notranslate"><span class="pre">s2mm</span></code>) would be created and linked to the AI Engine array, leaving no room for the external traffic generators. A configuration file for such a simulation can be seen in <code class="docutils literal notranslate"><span class="pre">system.cfg</span></code>:</p>
<div class="highlight-BASH notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>connectivity<span class="o">]</span>
<span class="nv">nk</span><span class="o">=</span>mm2s:1:mm2s
<span class="nv">nk</span><span class="o">=</span>s2mm:1:s2mm
<span class="nv">nk</span><span class="o">=</span>polar_clip:1:polar_clip

<span class="nv">sc</span><span class="o">=</span>mm2s.s:ai_engine_0.DataIn1
<span class="nv">sc</span><span class="o">=</span>ai_engine_0.clip_in:polar_clip.sin
<span class="nv">sc</span><span class="o">=</span>polar_clip.sout:ai_engine_0.clip_out
<span class="nv">sc</span><span class="o">=</span>ai_engine_0.DataOut1:s2mm.s
</pre></div>
</div>
<p>To work with external traffic generators in hardware emulation, introduce hooks in the PL. For that purpose, Xilinx provides a complete set of XO files with various bitwidths in <code class="docutils literal notranslate"><span class="pre">$XILINX_VITIS/data/emulation/XO/</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sim_ipc_master_NNN.xo</span></code> with <code class="docutils literal notranslate"><span class="pre">NNN</span></code> in 8, 16, 32, 64, 128, 256, 512</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sim_ipc_slave_NNN.xo</span></code> with <code class="docutils literal notranslate"><span class="pre">NNN</span></code> in 8, 16, 32, 64, 128, 256, 512</p></li>
</ul>
<p>In this tutorial, there are 32-bit interfaces. Copy the files <code class="docutils literal notranslate"><span class="pre">sim_ipc_master_32.xo</span></code> and <code class="docutils literal notranslate"><span class="pre">sim_ipc_slave_32.xo</span></code> into the  <code class="docutils literal notranslate"><span class="pre">pl_kernels</span></code> directory. The configuration file is the one in <code class="docutils literal notranslate"><span class="pre">system_etg.cfg</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>connectivity<span class="o">]</span>
<span class="nv">nk</span><span class="o">=</span>sim_ipc_axis_master_32:2:mm2s.polar_clip_out
<span class="nv">nk</span><span class="o">=</span>sim_ipc_axis_slave_32:2:s2mm.polar_clip_in

<span class="nv">sc</span><span class="o">=</span>mm2s.M00_AXIS:ai_engine_0.DataIn1
<span class="nv">sc</span><span class="o">=</span>ai_engine_0.clip_in:polar_clip_in.S00_AXIS
<span class="nv">sc</span><span class="o">=</span>polar_clip_out.M00_AXIS:ai_engine_0.clip_out
<span class="nv">sc</span><span class="o">=</span>ai_engine_0.DataOut1:s2mm.S00_AXIS
</pre></div>
</div>
</div>
<div class="section" id="step-3-external-traffic-generators">
<h2>Step 3: External Traffic Generators<a class="headerlink" href="#step-3-external-traffic-generators" title="Permalink to this headline">¶</a></h2>
<p>The overall goal of the external traffic generator is to send or receive data to or from the AI Engine array through a specific port. The sender can generate data on the fly or read it from a file. The receiver can keep data and save it somewhere, or process it in a function. When the external traffic generator takes the place of a PL kernel that performs processing, it can use a Python/C++ model of the functionality or even use the original HLS function.</p>
<div class="section" id="python-scripts">
<h3>Python Scripts<a class="headerlink" href="#python-scripts" title="Permalink to this headline">¶</a></h3>
<p>To test this design, you can use a Python script as an external traffic generator. Each kernel of the AI Engine is tested separately to show that multiple traffic generators can be run in parallel. The following image shows the general flow of the Python to be used in <code class="docutils literal notranslate"><span class="pre">aiesimulator</span></code>, <code class="docutils literal notranslate"><span class="pre">x86simulator</span></code>, and <code class="docutils literal notranslate"><span class="pre">hw_emu</span></code>:</p>
<p><img alt="Diagram of the python ETG" src="../../../../_images/TutorialImages-PythonETG.svg" /></p>
<div class="section" id="script-analysis">
<h4>Script Analysis<a class="headerlink" href="#script-analysis" title="Permalink to this headline">¶</a></h4>
<p>The general overview of what the script does as follows:</p>
<ol class="simple">
<li><p>Read in two input files (<code class="docutils literal notranslate"><span class="pre">mm2s.txt</span></code>, <code class="docutils literal notranslate"><span class="pre">polar_clip_out.txt</span></code>).</p></li>
<li><p>Convert the data from the input files into byte arrays.</p></li>
<li><p>Transmit the byte arrays using AXI transactions from the XTLM Python package.</p></li>
<li><p>Read the data from AXI transactions and convert it to <code class="docutils literal notranslate"><span class="pre">numpy</span></code> arrays for plotting.</p></li>
<li><p>Save output data and plot the input/output data to see the data transformation.</p></li>
</ol>
<p>The script contains a class <code class="docutils literal notranslate"><span class="pre">ExternalTraffic</span></code> that contains functions that communicate with the XTLM utilities objects.</p>
</div>
<div class="section" id="instantiating-the-xtlm-utilies">
<h4>Instantiating the XTLM Utilies<a class="headerlink" href="#instantiating-the-xtlm-utilies" title="Permalink to this headline">¶</a></h4>
<ol class="simple">
<li><p>Navigate to <code class="docutils literal notranslate"><span class="pre">TrafficGenerator/Python</span></code> and open the file <code class="docutils literal notranslate"><span class="pre">xtg_aie.py</span></code>.</p></li>
<li><p>Scroll to lines 155-159. This is where you instantiate the master/slave utilities for communicating with the simulator. To allow for direct connections to be made between the functions that will be generating the data and the simulator, the name of the utility being instantiated is the same as the name used in the following files:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">system_etg.cfg</span></code> for hardware emulation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">graph.h</span></code> with the PLIO constructors for AI Engine simulation</p></li>
</ul>
</li>
</ol>
<p>These utility objects contain the functions to transport and receive packets of data for processing, and require the data to be converted into a byte array.</p>
</div>
<div class="section" id="transmitting-data-through-the-ipc-axis-master-util-utility">
<h4>Transmitting Data through the ipc_axis_master_util Utility<a class="headerlink" href="#transmitting-data-through-the-ipc-axis-master-util-utility" title="Permalink to this headline">¶</a></h4>
<p>In <code class="docutils literal notranslate"><span class="pre">xtg_aie.py</span></code>, go to line 35, the <code class="docutils literal notranslate"><span class="pre">mm2s</span></code> function. This function performs the following operations:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>1. It reads the input text file (`mm2s.txt`) into the variable `L`.
2. It transforms the data into a byte array by using two&#39;s complement and OR-ing the real and imaginary values together.
3. It sends the data in 128-sample packets to the utility using the `b_transport()` function.
</pre></div>
</div>
</div>
<div class="section" id="receiving-data-through-the-ipc-axis-slave-util-utility">
<h4>Receiving Data through the ipc_axis_slave_util Utility<a class="headerlink" href="#receiving-data-through-the-ipc-axis-slave-util-utility" title="Permalink to this headline">¶</a></h4>
<p>Navigate to line 69, the <code class="docutils literal notranslate"><span class="pre">s2mm</span></code> function. This function performs the following operations:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>1. It receives data using the `sample_transaction` function. This is a blocking function, so it will not continue until it sees data from the utility.
2. It parses the data, which is still a byte array, and transports it back to the `run` function using the `self.child1.send()` function.
</pre></div>
</div>
</div>
</div>
<div class="section" id="c-application">
<h3>C++ Application<a class="headerlink" href="#c-application" title="Permalink to this headline">¶</a></h3>
<p>A C++ application has also been created to test this feature. On top of reading and writing files, this application uses the original HLS code of the <code class="docutils literal notranslate"><span class="pre">polar_clip</span></code> function to test it in situ. The following image shows the general flow of the Python to be used in <code class="docutils literal notranslate"><span class="pre">aiesimulator</span></code>, <code class="docutils literal notranslate"><span class="pre">x86simulator</span></code>, and <code class="docutils literal notranslate"><span class="pre">hw_emu</span></code>:</p>
<p><img alt="Diagram of the C++ ETG" src="../../../../_images/TutorialImages-CppETG.svg" /></p>
<p>In the <code class="docutils literal notranslate"><span class="pre">main.cpp</span></code> file, the function <code class="docutils literal notranslate"><span class="pre">main()</span></code> is defined along with the three classes which are instantiated in it:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mm2s_impl</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">polar_clip_impl</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s2mm_impl</span></code></p></li>
</ul>
<p>These three classes inherit from their three counterpart classes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mm2s</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">polar_clip</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s2mm</span></code></p></li>
</ul>
<p><img alt="C++ classes for ETG" src="../../../../_images/TutorialImages-CppClasses.svg" /></p>
<p>Depending on the type of simulation (AI Engine only or complete system simulation), the instances of <code class="docutils literal notranslate"><span class="pre">mm2s_impl</span></code>, <code class="docutils literal notranslate"><span class="pre">polar_clip_impl</span></code> and <code class="docutils literal notranslate"><span class="pre">s2mm_impl</span></code> must target different names (hence the separation in two sections in the <code class="docutils literal notranslate"><span class="pre">main.cpp</span></code> as in the Python counterpart). While the socket names are different, the application itself is exactly the same.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">run</span></code> method is called for the three instances, which creates a thread with the data handler:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mm2s</span></code> and <code class="docutils literal notranslate"><span class="pre">s2mm</span></code>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">m_thread</span> <span class="pre">=</span> <span class="pre">std::thread(&amp;mm2s::sock_data_handler,</span> <span class="pre">this);</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_thread</span> <span class="pre">=</span> <span class="pre">std::thread(&amp;s2mm::sock_data_handler,</span> <span class="pre">this);</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">polar_clip</span></code> (a thread is created for the input and the output ports):</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">m_thread</span> <span class="pre">=</span> <span class="pre">std::thread(&amp;polar_clip::in_data_handler,</span> <span class="pre">this);</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m_thread_1</span> <span class="pre">=</span> <span class="pre">std::thread(&amp;polar_clip::out_data_handler,</span> <span class="pre">this);</span></code></p></li>
</ul>
</li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">data_handler</span></code> method calls the send/receive data functions (defined in the implementation class) and then uses the transaction method implemented in the sockets to communicate in between the threads. The class <code class="docutils literal notranslate"><span class="pre">mm2s</span></code> reads data from an array initialized in <code class="docutils literal notranslate"><span class="pre">input.h</span></code>, and <code class="docutils literal notranslate"><span class="pre">s2mm</span></code> writes the data in the file <code class="docutils literal notranslate"><span class="pre">DataOut1.txt</span></code>. The     <code class="docutils literal notranslate"><span class="pre">polar_clip</span></code> is different. It reads and writes to a different socket, and in the middle it processes the data using the core processing function of the HLS IP of <code class="docutils literal notranslate"><span class="pre">polar_clip</span></code>.</p>
</div>
</div>
<div class="section" id="step-4-testing-the-functionalities">
<h2>Step 4: Testing the Functionalities<a class="headerlink" href="#step-4-testing-the-functionalities" title="Permalink to this headline">¶</a></h2>
<p>For simplicity, all the tests can be conducted using variables defined in the command line of the Makefile. The three variables are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TARGET</span></code>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">_sw_emu_</span></code> allows you to run <code class="docutils literal notranslate"><span class="pre">x86simulator</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_hw_emu_</span></code> allows you to run <code class="docutils literal notranslate"><span class="pre">aiesimulator</span></code> or <code class="docutils literal notranslate"><span class="pre">hw_emu</span></code>.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">EXTIO</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">_false_</span></code>: the input and output files are defined in the AI Engine design. The <code class="docutils literal notranslate"><span class="pre">x86simulator</span></code> and <code class="docutils literal notranslate"><span class="pre">aiesimulator</span></code> are run using these predefined test vectors. <code class="docutils literal notranslate"><span class="pre">hw_emu</span></code> runs after having synthesized <code class="docutils literal notranslate"><span class="pre">mm2s</span></code>, <code class="docutils literal notranslate"><span class="pre">s2mm</span></code>, and <code class="docutils literal notranslate"><span class="pre">polar_clip</span></code> in the PL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_true_</span></code>: external traffic generators are hooked up to the various simulators.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">TRAFFIC_GEN</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">_Python_</span></code>: a Python external traffic generator is used if necessary (<code class="docutils literal notranslate"><span class="pre">EXTIO=true</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Cpp_</span></code>: a C++ external traffic generator is used if necessary.</p></li>
</ul>
</li>
</ul>
<p>The rules defined in the Makefile are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">clean</span></code>: Clean up all subdirectories.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aie</span></code>: Compile the AI Engine graph (the <code class="docutils literal notranslate"><span class="pre">EXTERNAL_IO</span></code> macro value is defined depending on the <code class="docutils literal notranslate"><span class="pre">EXTIO</span></code> variable value).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aiesim</span></code>: Simulate at the AI Engine array level (<code class="docutils literal notranslate"><span class="pre">x86simulator</span></code> or <code class="docutils literal notranslate"><span class="pre">aiesimulator</span></code>) and check results.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kernels</span></code>: Compile <code class="docutils literal notranslate"><span class="pre">s2mm</span></code>, <code class="docutils literal notranslate"><span class="pre">mm2s</span></code>, and <code class="docutils literal notranslate"><span class="pre">polar_clip</span></code> into XO files, or copy <code class="docutils literal notranslate"><span class="pre">sim_ipc_master_32.xo</span></code> and <code class="docutils literal notranslate"><span class="pre">sim_ipc_slave_32.xo</span></code> into the kernels directory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xclbin</span></code>: Create the XCLBIN files with the kernels defined by the XOs in the kernels directory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">host</span></code>: Create the host application. No test is defined in this application because the verification is done on the output of the external traffic generator.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">package</span></code>: Prepare for the <code class="docutils literal notranslate"><span class="pre">hw_emu</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">traffic_gen</span></code>: Compile the C++ traffic generator if it has been selected.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run_emu</span></code>: Run <code class="docutils literal notranslate"><span class="pre">hw_emu</span></code> and checks results.</p></li>
</ul>
<p>Some simulations you can try are shown in the following examples.</p>
<div class="highlight-BASH notranslate"><div class="highlight"><pre><span></span>make <span class="nv">TARGET</span><span class="o">=</span>sw_emu <span class="nv">EXTIO</span><span class="o">=</span><span class="nb">false</span>  clean aie aiesim
--&gt; Runs x86simulator without external TG.

make <span class="nv">TARGET</span><span class="o">=</span>hw_emu <span class="nv">EXTIO</span><span class="o">=</span><span class="nb">true</span> <span class="nv">TRAFFIC_GEN</span><span class="o">=</span>PYTHON clean aie aiesim
--&gt; Runs aiesimulator with a Python external TG. You have to close the two plots to finish the simulation.

make <span class="nv">TARGET</span><span class="o">=</span>hw_emu <span class="nv">EXTIO</span><span class="o">=</span><span class="nb">true</span> <span class="nv">TRAFFIC_GEN</span><span class="o">=</span>CPP clean aie traffic_gen aiesim
--&gt; Same but with a C++ external TG

make <span class="nv">TARGET</span><span class="o">=</span>hw_emu <span class="nv">EXTIO</span><span class="o">=</span><span class="nb">true</span> <span class="nv">TRAFFIC_GEN</span><span class="o">=</span>PYTHON clean aie xclbin host package hw_emu
--&gt; Runs hw_emu with Python External TG. You have to get out from Qemu <span class="o">(</span>CTRL A + X<span class="o">)</span> and close the <span class="m">2</span> plots to finish the simulation.

make <span class="nv">TARGET</span><span class="o">=</span>hw_emu <span class="nv">EXTIO</span><span class="o">=</span><span class="nb">true</span> <span class="nv">TRAFFIC_GEN</span><span class="o">=</span>CPP traffic_gen hw_emu
--&gt; Runs hw_emu with C++ external TG. Here, you take advantage of the already compiled xclbin and created package.
</pre></div>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>In this tutorial, you have learned about the following:</p>
<ul class="simple">
<li><p>The required modifications to enable external traffic generators in the graph code.</p></li>
<li><p>The format and layout of the provided Python script and C++ application to use.</p></li>
<li><p>The changes needed to the Vitis compiler configuration to run external traffic generators in <code class="docutils literal notranslate"><span class="pre">hw_emu</span></code>.</p></li>
</ul>
<p>The advantages of using external traffic generators are as follows:</p>
<ul class="simple">
<li><p>You can use Python script and design between <code class="docutils literal notranslate"><span class="pre">aiesimulator</span></code> and <code class="docutils literal notranslate"><span class="pre">hw_emu</span></code>.</p></li>
<li><p>You can use discrete standalone input files, or use data generated within the Python script.</p></li>
<li><p>You do not need to write PL kernels to communicate with the AI Engine (only reference specific Simulator IPC IPs provided by Xilinx for hardware emulation).</p></li>
<li><p>You can mimic the flow of a PL kernel that is needed by the AI Engine (for example, <code class="docutils literal notranslate"><span class="pre">polar_clip</span></code>).</p></li>
</ul>
<div class="section" id="support">
<h3>Support<a class="headerlink" href="#support" title="Permalink to this headline">¶</a></h3>
<p>GitHub issues will be used for tracking requests and bugs. For questions go to <a class="reference external" href="http://forums.xilinx.com/">forums.xilinx.com</a>.</p>
</div>
<div class="section" id="license">
<h3>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h3>
<p>Licensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License.</p>
<p>You may obtain a copy of the License at <a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<p align="center"><sup>XD136 | &copy; Copyright 2022 Xilinx, Inc.</sup></p></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../../Vitis_Platform_Creation/Vitis_Platform_Creation.html" class="btn btn-neutral float-right" title="Vitis Platform Creation Tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../15-post-link-recompile/README.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on May 16, 2022.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
														
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<div class="lang-select dropup hidden-md hidden-lg">
		<button data-toggle="dropdown">
			<span class="fas fa-globe" aria-hidden="true"></span>
			<span>
				
					English
				</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a target="_blank" href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
																	<div class="lang-select dropup hidden-xs hidden-sm">
	<button data-toggle="dropdown">
		<span class="fas fa-globe" aria-hidden="true"></span>
		<span>
			
				English
			</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
															</div>
														</div>
														<div class="col-md-pull-5 col-lg-pull-5 col-md-5 col-lg-5">
															<span class="copyright">©2022 Advanced Micro Devices, Inc</span>
														</div>

													</div>
													                    <div class="movethisrowtoleft row">
                        <div class="col-xs-24">
                            <ul class="sub-menu">
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a></li>
								<li><a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a></li>
                                <li><a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></li>
                            </ul>
                        </div>
                    </div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
<div class="backToTop parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><noindex>
    <span data-component="backToTopButton" class="backToTopButton loaded">
        <ul>
            <li>
                <a href="https://www.author.xilinx.com/xx/rebrand/amd/en-amd-xilinx-header-footer.html#top" class="btn top">
                    <span class="fas fa-angle-up" aria-hidden="true"></span>
                </a>
            </li>
        </ul>
    </span>
</noindex></div>
			</div>
		</div>


		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>