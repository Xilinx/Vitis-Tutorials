<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
  <title>Versal Emulation Waveform Analysis &mdash; Vitis™ Tutorials 2022.1 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="AXIS External Traffic Generator Feature Tutorial" href="../12-axis-traffic-generator/README.html" />
    <link rel="prev" title="Designing with the AI Engine DSPLib and Vitis Model Composer" href="../10-aie-dsp-lib-model-composer/README.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../../../index.html" class="icon icon-home"> Vitis™ Tutorials
            <img src="../../../../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2022.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">日本語版</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/master/docs-jp/index.html">Main</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Getting_Started/Vitis-Getting-Started.html">Getting Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Acceleration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Hardware_Acceleration/Hardware-Acceleration.html">Hardware Acceleration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AI Engine</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../AI_Engine_Development.html">AI Engine Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../AI_Engine_Development.html#design-tutorials">Design Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../AI_Engine_Development.html#feature-tutorials">Feature Tutorials</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../02-using-gmio/README.html">Using GMIO with AIE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03-rtp-reconfiguration/README.html">Runtime Parameter Reconfiguration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../04-packet-switching/README.html">Packet Switching</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05-AI-engine-versal-integration/README.html">Versal Integration for Hardware Emulation and Hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../06-versal-system-design-clocking-tutorial/README.html">Versal System Design Clocking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../07-AI-Engine-Floating-Point/README.html">Using Floating-Point in the AI Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08-dsp-library/README.html">DSP Library Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="../09-debug-walkthrough/README.html">Debug Walkthrough</a></li>
<li class="toctree-l3"><a class="reference internal" href="../10-aie-dsp-lib-model-composer/README.html">AI Engine DSP Library and Model Composer Tutorial</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Versal Emulation Waveform Analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#objectives">Objectives</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tutorial-overview">Tutorial Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#transaction-level-modeling">Transaction Level Modeling</a></li>
<li class="toctree-l4"><a class="reference internal" href="#steps">Steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../12-axis-traffic-generator/README.html">AXIS External Traffic Generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../13-aie-performance-analysis/README.html">AI Engine Performance and Deadlock Analysis Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="../13-aie-performance-analysis/README.html#support">Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../13-aie-performance-analysis/README.html#license">License</a></li>
<li class="toctree-l3"><a class="reference internal" href="../14-implementing-iir-filter/README.html">Implementing an IIR Filter on the AI Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../01-aie_a_to_z/README.html">A to Z Bare-metal Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../15-post-link-recompile/README.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../15-post-link-recompile/README.html#before-you-begin">Before You Begin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../15-post-link-recompile/README.html#ai-engine-application-post-link-recompile">AI Engine Application Post-Link Recompile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../15-post-link-recompile/README.html#objectives">Objectives</a></li>
<li class="toctree-l3"><a class="reference internal" href="../16-external-traffic-generator-aie/README.html">Python and C++ External Traffic Generators for AI Engine Simulation and Emulation Flows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../16-external-traffic-generator-aie/README.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../16-external-traffic-generator-aie/README.html#design-overview">Design Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../16-external-traffic-generator-aie/README.html#tutorial-steps">Tutorial Steps</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Platforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Vitis_Platform_Creation/Vitis_Platform_Creation.html">Vitis Platform Creation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2021-2/build/html/index.html">2021.2</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2021-1/build/html/index.html">2021.1</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-2/docs/index.html">2020.2</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-1/docs/README.html">2020.1</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Vitis™ Tutorials</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../AI_Engine_Development.html">AI Engine Development</a> &raquo;</li>
      <li>Versal Emulation Waveform Analysis</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/docs/AI_Engine_Development/Feature_Tutorials/11-ai-engine-emulation-waveform-analysis/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <table class="sphinxhide" width="100%">
 <tr width="100%">
    <td align="center"><img src="https://raw.githubusercontent.com/Xilinx/Image-Collateral/main/xilinx-logo.png" width="30%"/><h1>AI Engine Development</h1>
    <a href="https://www.xilinx.com/products/design-tools/vitis.html">See Vitis™ Development Environment on xilinx.com</br></a>
    <a href="https://www.xilinx.com/products/design-tools/vitis/vitis-ai.html">See Vitis™ AI Development Environment on xilinx.com</a>
    </td>
 </tr>
</table><div class="section" id="versal-emulation-waveform-analysis">
<h1>Versal Emulation Waveform Analysis<a class="headerlink" href="#versal-emulation-waveform-analysis" title="Permalink to this heading">¶</a></h1>
<p><em><strong>Version: Vitis 2022.1</strong></em></p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>Simulating a complete system in the Vitis™ unified software platform allows for a near-hardware run of a design without the hardware, and has the added benefit of detailed waveform analysis during hardware emulation to identify issues in the programmable logic (PL), AI Engine interfaces, and memory read/writes that might be harder to debug on hardware.</p>
<p>This tutorial demonstrates how you can use the Vivado logic simulator (XSIM) waveform GUI, and the Vitis analyzer to debug and analyze your design for a Versal®  ACAP. It steps through the process of building a design for hardware emulation, launching emulation with waveform viewing, and detailed information on how to read the waveforms, as well as using the Vitis analyzer to continue the analysis with generated trace output waveforms and data.</p>
<p>It is strongly recommended to go through the <strong>Versal Integration tutorial</strong> and the <strong>Versal System Design Clocking tutorial</strong> before running this tutorial.</p>
<p><strong>IMPORTANT</strong>: Before beginning the tutorial make sure you have read and followed the <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1393-vitis-application-acceleration/Vitis-Software-Platform-Release-Notes">Vitis Software Platform Release Notes (v2021.2)</a> for setting up software and installing the VCK190 base platform.</p>
<p>Before starting this tutorial run the following steps.</p>
<ol class="simple">
<li><p>Source VITIS and XRT.</p></li>
<li><p>Set the AIE License.</p></li>
<li><p>Set up your platform by running the <code class="docutils literal notranslate"><span class="pre">xilinx-versal-common-v2022.1/environment-setup-aarch64-xilinx-linux</span></code> script as provided in the platform download. This script sets up the <code class="docutils literal notranslate"><span class="pre">SDKTARGETSYSROOT</span></code> and <code class="docutils literal notranslate"><span class="pre">CXX</span></code> variables. If the script is not present, you <strong>must</strong> run <code class="docutils literal notranslate"><span class="pre">xilinx-versal-common-v2022.1/sdk.sh</span></code>.</p></li>
<li><p>Set up your <code class="docutils literal notranslate"><span class="pre">ROOTFS</span></code>, and <code class="docutils literal notranslate"><span class="pre">IMAGE</span></code> to point to the <code class="docutils literal notranslate"><span class="pre">xilinx-versal-common-v2022.1</span></code> directory.</p></li>
<li><p>Set up your <code class="docutils literal notranslate"><span class="pre">PLATFORM_REPO_PATHS</span></code> environment variable based on where you downloaded the platform.</p></li>
</ol>
</div>
<div class="section" id="objectives">
<h2>Objectives<a class="headerlink" href="#objectives" title="Permalink to this heading">¶</a></h2>
<p>After completing this tutorial you should be able to:</p>
<ul class="simple">
<li><p>Use XSIM as a live waveform viewer to view signals to and from the AI Engine including stream data and run-time parameters (RTP).</p></li>
<li><p>Read/understand Transaction Level Modeling (TLM) information in a waveform.</p></li>
<li><p>Use the Vitis analyzer to read trace and profile data.</p></li>
</ul>
</div>
<div class="section" id="tutorial-overview">
<h2>Tutorial Overview<a class="headerlink" href="#tutorial-overview" title="Permalink to this heading">¶</a></h2>
<div class="section" id="design-overview">
<h3>Design Overview<a class="headerlink" href="#design-overview" title="Permalink to this heading">¶</a></h3>
<p>The design is a simple FIR filter that takes in random noise generated by the PL kernel, <code class="docutils literal notranslate"><span class="pre">random_noise</span></code>, and gets asynchronous RTP updates to the AI Engine to update the FIR filter coefficients. To confirm the coefficients are applied, the host code reads back the coefficients.</p>
<p><img alt="Block Diagram" src="../../../../_images/design_block_diagram.png" /></p>
</div>
</div>
<div class="section" id="transaction-level-modeling">
<h2>Transaction Level Modeling<a class="headerlink" href="#transaction-level-modeling" title="Permalink to this heading">¶</a></h2>
<p>Transaction level modeling (TLM) models Control Interfaces and Processing Systems (CIPS), Network on Chip (NoC), and AI Engine blocks, using SystemC, to show transaction-level communication in the waveform. It is cycle-approximate modeling. It can provide high-level information such as the address and data of the transactions to/from DDR memory or a specific PL kernel.</p>
<p>In the following diagram, the CIPS, NoC, and AI Engine are modeled in SystemC.</p>
<p><img alt="Model Block Diagram" src="../../../../_images/model_block_diagram.png" /></p>
</div>
<div class="section" id="steps">
<h2>Steps<a class="headerlink" href="#steps" title="Permalink to this heading">¶</a></h2>
<p><strong>Step 1</strong>: Building the Design</p>
<p><strong>Step 2</strong>: Launching Emulation with the XSIM Waveform GUI</p>
<p><strong>Step 3</strong>: Using XSIM Waveform GUI and <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1393-vitis-application-acceleration/QEMU">QEMU</a></p>
<p><strong>Step 4</strong>: Using Vitis Analyzer</p>
<div class="section" id="step-1-build-design">
<h3>Step 1: Build Design<a class="headerlink" href="#step-1-build-design" title="Permalink to this heading">¶</a></h3>
<ol>
<li><p>To build the design run the following commands.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make aie
</pre></div>
</div>
</li>
<li><p>After the ADF graph is compiled, run the AI Engine simulator (<code class="docutils literal notranslate"><span class="pre">aiesimulator</span></code>) to get additional profile data. This ensures the design is simulating correctly and generates extra profile information for performance analysis and optimizing the kernels.</p>
<p>To run the simulator, run the following commands.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make aiesim
</pre></div>
</div>
<p>After running emulation a new directory, <code class="docutils literal notranslate"><span class="pre">aiesimulator_output</span></code>, is created and inside this directory, there is a file called <code class="docutils literal notranslate"><span class="pre">aiesim-options.txt</span></code>.</p>
</li>
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">aiesim-options.txt</span></code> and you should see content similar to the following.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AIE_PKG_DIR</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/&lt;</span><span class="n">tutorial</span><span class="o">&gt;/./</span><span class="n">Work</span>
<span class="n">AIE_DUMP_VCD</span><span class="o">=</span><span class="n">tutorial</span>
<span class="n">AIE_PROFILE</span><span class="o">=</span><span class="n">All</span>
</pre></div>
</div>
</li>
<li><p>Close the text file.</p>
<p><strong>NOTE</strong>: To view all the <code class="docutils literal notranslate"><span class="pre">aiesim_option.txt</span></code> values, see <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1076-ai-engine-environment/Reusing-AI-Engine-Simulator-Options">Reusing AI Engine Simulator Options</a>.</p>
</li>
<li><p>Run the rest of the build process using the following commands.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make kernels
make xclbin
make host
make package
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="step-2-launching-emulation-with-xsim-waveform-gui">
<h3>Step 2: Launching Emulation with XSIM Waveform GUI<a class="headerlink" href="#step-2-launching-emulation-with-xsim-waveform-gui" title="Permalink to this heading">¶</a></h3>
<p>After the building and packaging of the design is complete you can run hardware emulation on your design. Ensure that <code class="docutils literal notranslate"><span class="pre">launch_hw_emu.sh</span></code> is in the <code class="docutils literal notranslate"><span class="pre">sw</span></code> directory.</p>
<ol>
<li><p>To launch emulation with the XSIM Waveform GUI run the following command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./launch_hw_emu.sh -g -aie-sim-options ../aiesimulator_output/aiesim_options.txt
</pre></div>
</div>
<p>OR</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make run_emu
</pre></div>
</div>
<p>OR</p>
<p>You can include more options during emulation launch to see transactions logs as mentioned below:</p>
<p>To see all the transactions generated by PS (QEMU) to either PL/AIE, set env variable <code class="docutils literal notranslate"><span class="pre">ENABLE_RP_LOGS=true</span></code>.
You can see the logs at sim/behav_waveform/xsim/rp_log.txt. Note that PS to DDR transactions cannot be seen here as QEMU has a backdoor direct connection into DDR buffer.</p>
<p>To capture AIE transaction logs generated at runtime, set the env variable <code class="docutils literal notranslate"><span class="pre">ENABLE_AIE_DBG_TRACE</span></code>.<br />You can see the logs created in the folder aie_log/ e.g. sw/sim/behav_waveform/xsim/aie_log/S00_AXI.log file.
This helps to debug the AIE systemC models only and contains transaction information per interface at each simulation cycle.</p>
<p>At launch emulation, you can pass <code class="docutils literal notranslate"><span class="pre">-xtlm-aximm-log</span></code> switch. This logs all the transactions generated from CIPS to AIE or PL that is captured
in xsc_report.log file e.g. sw/sim/behav_waveform/xsim/xsc_report.log</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./launch_hw_emu.sh -g -aie-sim-options ../aiesimulator_output/aiesim_options.txt -xtlm-aximm-log
</pre></div>
</div>
<p>The terminal shows the following.</p>
<div class="highlight-log notranslate"><div class="highlight"><pre><span></span>Starting QEMU
- Press &lt;Ctrl-a h&gt; for help 
Waiting for QEMU to start. 
running directly on console
QEMU started. qemu_pid=3208
Waiting for PMU to start. 
qemu-system-aarch64: -chardev socket,path=./qemu-rport-_pmc@0,server,id=ps-pmc-rp: info: QEMU waiting for connection on: disconnected:unix:./qemu-rport-_pmc@0,server
PMC started. pmc_pid=3243
qemu-system-aarch64: -chardev socket,id=pl-rp,host=127.0.0.1,port=7043,server: info: QEMU waiting for connection on: disconnected:tcp:127.0.0.1:7043,server
XSIM started. xsim_pid=3300
</pre></div>
</div>
<p>This shows QEMU starting and launching XSIM. Note that QEMU and XSIM are linked together, meaning closing one closes the other. The use of the <code class="docutils literal notranslate"><span class="pre">-g</span></code> flag opens up the XSIM Waveform GUI as shown in the following image with two config files (.wcfg and Untitled1).</p>
<p><img alt="XSIM GUI Startup Default" src="../../../../_images/xsim_gui_default.png" /></p>
<p>Users can keep any of the one file (preferably close .wcfg file) to contiunue adding signals or creating wavegroups for waveform analysis.</p>
<p><img alt="XSIM GUI Startup " src="../../../../_images/xsim_gui_startup.png" /></p>
<p>In this view you can select the signals you want to watch from the <strong>Scope</strong> and <strong>Objects</strong> views.</p>
</li>
<li><p>In the <strong>Tcl Console</strong> at the bottom of the view, run the following command.</p>
<div class="highlight-Tcl notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span>tcl<span class="o">/</span>add_waveforms.tcl
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">add_waveforms.tcl</span></code> file removes any default signals provided by the simulation environment, and adds in all the signals you want to view. There are some signals that are important to have such as: NoC, DDR memory, PL Kernel, and CIPS signals. Your design interacts with these components, and being able to trace signal changes from CIPS to the NoC to/from DDR memory, and then to your design can prove helpful in debugging any potential issue with data transfers.
This file contains the following.</p>
<div class="highlight-Tcl notranslate"><div class="highlight"><pre><span></span><span class="c">## Remove all waveforms before adding new ones</span>
<span class="nv">remove_wave</span><span class="w"> </span><span class="o">-</span>of<span class="w"> </span><span class="k">[</span><span class="nv">get_wave_config</span><span class="k">]</span><span class="w"> </span><span class="k">[</span><span class="nv">get_waves</span><span class="w"> </span><span class="o">-</span>of<span class="w"> </span><span class="k">[</span><span class="nv">get_wave_config</span><span class="k">]</span><span class="w"> </span><span class="o">-</span>regexp<span class="w"> </span><span class="s2">&quot;.*&quot;</span><span class="k">]</span>

<span class="c">## Set the appropriate paths based upon the platform being used</span>
<span class="k">set</span><span class="w"> </span>scope_path<span class="w"> </span><span class="s2">&quot;/xilinx_vck190_base_wrapper_sim_wrapper/xilinx_vck190_base_wrapper_i/xilinx_vck190_base_i&quot;</span>

<span class="c">## Create a wave group called CIPS and add all signals for the CIPS_0 to it</span>
<span class="k">set</span><span class="w"> </span>CIPS<span class="w"> </span><span class="k">[</span><span class="nv">add_wave_group</span><span class="w"> </span>CIPS<span class="k">]</span>
<span class="k">set</span><span class="w"> </span>cips_intf<span class="w"> </span><span class="k">[</span><span class="nv">get_objects</span><span class="w"> </span><span class="o">-</span>r<span class="w"> </span><span class="nv">$scope_path</span><span class="o">/</span>CIPS_0<span class="o">/*</span><span class="w"> </span><span class="o">-</span>filter<span class="w"> </span><span class="k">{</span><span class="nv">type</span><span class="o">==</span>proto_inst<span class="k">}]</span>
<span class="nv">add_wave</span><span class="w"> </span><span class="o">-</span>into<span class="w"> </span><span class="nv">$CIPS</span><span class="w"> </span><span class="nv">$cips_intf</span>

<span class="c">## Create a wave group called NOISE and add all signals of the random_noise_1 to it</span>
<span class="k">set</span><span class="w"> </span>NOISE<span class="w"> </span><span class="k">[</span><span class="nv">add_wave_group</span><span class="w"> </span>NOISE<span class="k">]</span>
<span class="k">set</span><span class="w"> </span>noise_intf<span class="w"> </span><span class="k">[</span><span class="nv">get_objects</span><span class="w"> </span><span class="o">-</span>r<span class="w"> </span><span class="nv">$scope_path</span><span class="o">/</span>random_noise_1<span class="o">/*</span><span class="w"> </span><span class="o">-</span>filter<span class="w"> </span><span class="k">{</span><span class="nv">type</span><span class="o">==</span>proto_inst<span class="k">}]</span>
<span class="nv">add_wave</span><span class="w"> </span><span class="o">-</span>into<span class="w"> </span><span class="nv">$NOISE</span><span class="w"> </span><span class="nv">$noise_intf</span>

<span class="c">## Create a wave group called S2MM and add all signals of the S2MM kernel to it</span>
<span class="k">set</span><span class="w"> </span>S2MM<span class="w"> </span><span class="k">[</span><span class="nv">add_wave_group</span><span class="w"> </span>S2MM<span class="k">]</span>
<span class="k">set</span><span class="w"> </span>s2mm_intf<span class="w"> </span><span class="k">[</span><span class="nv">get_objects</span><span class="w"> </span><span class="o">-</span>r<span class="w"> </span><span class="nv">$scope_path</span><span class="o">/</span>s2mm_1<span class="o">/*</span><span class="w"> </span><span class="o">-</span>filter<span class="w"> </span><span class="k">{</span><span class="nv">type</span><span class="o">==</span>proto_inst<span class="k">}]</span>
<span class="nv">add_wave</span><span class="w"> </span><span class="o">-</span>into<span class="w"> </span><span class="nv">$S2MM</span><span class="w"> </span><span class="nv">$s2mm_intf</span>

<span class="c">## Create a wave group called CIPS_NOC and all signals of the CIPS NoC to it</span>
<span class="k">set</span><span class="w"> </span>CIPS_NOC<span class="w"> </span><span class="k">[</span><span class="nv">add_wave_group</span><span class="w"> </span>CIPS_NOC<span class="k">]</span>
<span class="k">set</span><span class="w"> </span>cips_intf<span class="w"> </span><span class="k">[</span><span class="nv">get_objects</span><span class="w"> </span><span class="o">-</span>r<span class="w"> </span><span class="nv">$scope_path</span><span class="o">/</span>cips_noc<span class="o">/*</span><span class="w"> </span><span class="o">-</span>filter<span class="w"> </span><span class="k">{</span><span class="nv">type</span><span class="o">==</span>proto_inst<span class="k">}]</span>
<span class="nv">add_wave</span><span class="w"> </span><span class="o">-</span>into<span class="w"> </span><span class="nv">$CIPS_NOC</span><span class="w"> </span><span class="nv">$cips_intf</span>

<span class="c">## Create a wave group called DDR4 and all signals to/from DDR4</span>
<span class="k">set</span><span class="w"> </span>DDR4<span class="w"> </span><span class="k">[</span><span class="nv">add_wave_group</span><span class="w"> </span>DDR4<span class="k">]</span>
<span class="k">set</span><span class="w"> </span>ddr4_intf<span class="w"> </span><span class="k">[</span><span class="nv">get_objects</span><span class="w"> </span><span class="o">-</span>r<span class="w"> </span><span class="nv">$scope_path</span><span class="o">/</span>noc_ddr4<span class="o">/*</span><span class="w"> </span><span class="o">-</span>filter<span class="w"> </span><span class="k">{</span><span class="nv">type</span><span class="o">==</span>proto_inst<span class="k">}]</span>
<span class="nv">add_wave</span><span class="w"> </span><span class="o">-</span>into<span class="w"> </span><span class="nv">$DDR4</span><span class="w"> </span><span class="nv">$ddr4_intf</span>

<span class="c">## Create a wave group called AIENGINE and all signals of the AI Engine block to it</span>
<span class="k">set</span><span class="w"> </span>AIENGINE<span class="w"> </span><span class="k">[</span><span class="nv">add_wave_group</span><span class="w"> </span>AIENGINE<span class="k">]</span>
<span class="k">set</span><span class="w"> </span>aie_intf<span class="w"> </span><span class="k">[</span><span class="nv">get_objects</span><span class="w"> </span><span class="o">-</span>r<span class="w"> </span><span class="nv">$scope_path</span><span class="o">/</span>ai_engine_0<span class="o">/*</span><span class="w"> </span><span class="o">-</span>filter<span class="w"> </span><span class="k">{</span><span class="nv">type</span><span class="o">==</span>proto_inst<span class="k">}]</span>
<span class="nv">add_wave</span><span class="w"> </span><span class="o">-</span>into<span class="w"> </span><span class="nv">$AIENGINE</span><span class="w"> </span><span class="nv">$aie_intf</span>
</pre></div>
</div>
<p><strong>NOTE</strong>: This file can be executed automatically from the <code class="docutils literal notranslate"><span class="pre">launch_hw_emu.sh</span></code> command by using the <code class="docutils literal notranslate"><span class="pre">-user-pre-sim-script</span> <span class="pre">add_waveforms.tcl</span></code>.</p>
<p><strong>IMPORTANT</strong>: Add all the signals you need before starting emulation. If, after starting emulation, you pause it and add more signals there will not be any data for the new signals.</p>
<p>You will see a waveform view as shown in the following.</p>
<p><img alt="XSIM with new signals" src="../../../../_images/xsim_with_signals.png" /></p>
</li>
<li><p>Expand the all signal groups in the view to get the following view.</p>
<p><img alt="Expanded signals" src="../../../../_images/expanded_signals.png" /></p>
</li>
<li><p>The tutorial design runs very fast and you will not be able to see anything meaningful on this small scale.</p>
<p>Adjust the scale to 100 us.</p>
<p><img alt="Proper Scale" src="../../../../_images/proper_scale.png" /></p>
<p><strong>TIP</strong>: The scale can be adjusted when emulation is running to fit your needs.</p>
</li>
</ol>
<p><strong>NOTE</strong>: For more information about this simulator view and how to use it, see the <a class="reference external" href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2021_2/ug900-vivado-logic-simulation.pdf">UG900 Vivado Design Suite User Guide: Logic Simulation</a>.</p>
</div>
<div class="section" id="step-3-using-xsim-waveform-gui-and-qemu">
<h3>Step 3: Using XSIM Waveform GUI and QEMU<a class="headerlink" href="#step-3-using-xsim-waveform-gui-and-qemu" title="Permalink to this heading">¶</a></h3>
<p>A great benefit of having a waveform viewer showing live data is so you can see how the signals interact with each other. This includes the programming of the AI Engine and device traffic to/from the DDR memory, traffic to/from the PL kernels, as well as seeing RTP data being written to the AI Engine.</p>
<ol>
<li><p>Click the <strong>Run All</strong> button (<img alt="run all" src="../../../../_images/run_all.png" />).</p></li>
<li><p>Click back to the terminal where <code class="docutils literal notranslate"><span class="pre">./launch_hw_emu.sh</span></code> was launched. Notice that the QEMU instance has begun booting and when you see the following messages QEMU has finished launching.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>root@versal-rootfs-common-2021_1:~## Enabling notebook extension jupyter-js-widgets/extension...
    - Validating: OK
xinit: giving up
xinit: unable to connect to X server: Connection refused
xinit: server error
[C 17:53:36.686 NotebookApp] Bad config encountered during initialization: No such notebook dir: &#39;&#39;/usr/share/example-notebooks&#39;&#39;
</pre></div>
</div>
<p><strong>IMPORTANT</strong>: Ignore the messages above.</p>
</li>
<li><p>Hit <strong>Enter</strong> a few times to clear these messages and you should see this prompt.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@versal-rootfs-common-2021_1:~#
</pre></div>
</div>
</li>
<li><p>Type in the following commands to launch the tutorial application.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">XILINX_XRT</span><span class="o">=</span>/usr
<span class="nb">cd</span> /mnt/sd*1
./host.exe a.xclbin
</pre></div>
</div>
<p><strong>NOTE</strong>: This might take some time to complete because hardware emulation is collecting profiling data as well as Value Change Dump (VCD) data.</p>
</li>
<li><p>Navigate back to the XSIM Waveform GUI and notice that signals are toggling. Scroll up and down to see all the signals that are starting to display data.</p></li>
<li><p>Pause the execution of the design when you see all signals in the view stop toggling.</p></li>
</ol>
<div class="section" id="exploring-the-waveforms">
<h4>Exploring the Waveforms<a class="headerlink" href="#exploring-the-waveforms" title="Permalink to this heading">¶</a></h4>
<p>One of the things the waveform viewer can help with is figuring out the order in which data is transferred from a source to a destination. In the following sections you can see how to explore the various waveforms specific to certain communication/data transfer.</p>
<p><strong>NOTE</strong>: If AI Engine kernels contain <code class="docutils literal notranslate"><span class="pre">printf</span></code> statements, the output will show up in the XSIM Waveform GUI in the <strong>Tcl Console</strong> and will be written to the <code class="docutils literal notranslate"><span class="pre">simulate.log</span></code> file after emulation is closed.</p>
<div class="section" id="checking-proper-boot-up-using-pmc">
<h5>Checking Proper Boot-up Using PMC<a class="headerlink" href="#checking-proper-boot-up-using-pmc" title="Permalink to this heading">¶</a></h5>
<p>The first key step to ensure emulation is operating correctly is making sure that the PS is able to program the platform management controller (PMC). This system is responsible for booting and configuring the device. Seeing the signal through the CIPS, NoC, and the AI Engine is a sign that things are operating normally.</p>
<ol>
<li><p>To see this signal only run the following Tcl script.</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span>tcl<span class="o">/</span>bootup_signals.tcl
</pre></div>
</div>
<p><img alt="Bootup Signals" src="../../../../_images/bootup_signals.png" /></p>
</li>
<li><p>Zoom in to the first transactions by clicking and dragging the mouse from the upper left to the bottom right. You should see something like the following.</p>
<p><img alt="Bootup Zoomed In" src="../../../../_images/bootup_zoom_in.png" /></p>
<p>Expand these signals and notice that the NoC and the CIPS signals are all matched. This is showing that the CIPS is transferring configuration information to the PMC. These signals are TLM signals, because the blocks of the device they are targeting are modeled in SystemC. In this view, a wide colored block might not be one transaction (because it is a <em><strong>us</strong></em> timescale), so zoom in and notice there are more transactions occurring in a short amount of time.</p>
<p>Looking at the last interface, <em><strong>xilinx_vck190_base_ai_engine_0_0_S00_AXI_tlm</strong></em>, the majority of the transactions are writes, and are configuring the AI Engine to the graph created in <strong>Step 1</strong>. These writes are specific to the Configuration Data Objects (CDO) that are commands that are passed to the PLM to configure the device, and in this interface, the AI Engine.</p>
</li>
<li><p>Zoom the window to full by clicking the mouse on the lower right side, and drag to the upper left.</p></li>
</ol>
</div>
</div>
<div class="section" id="transactions-generated-by-ps-qemu-to-pl-aie">
<h4>Transactions generated by PS (QEMU) to PL/AIE<a class="headerlink" href="#transactions-generated-by-ps-qemu-to-pl-aie" title="Permalink to this heading">¶</a></h4>
<p>Users can see the logs at : sim/behav_waveform/xsim/rp_log.txt. Note that PS to DDR transactions cannot be seen here as QEMU has a backdoor direct connection into DDR buffer.</p>
<div class="section" id="pl-to-ai-engine">
<h5>PL to AI Engine<a class="headerlink" href="#pl-to-ai-engine" title="Permalink to this heading">¶</a></h5>
<p>After bootup and the device is configured, the application can begin to run. In this design, there is a PL kernel called <code class="docutils literal notranslate"><span class="pre">random</span> <span class="pre">noise</span></code> that is generating data that is being fed directly into the AI Engine. The key here is looking at the <code class="docutils literal notranslate"><span class="pre">s_axi_control</span></code> interface to see when the PS sends the <code class="docutils literal notranslate"><span class="pre">run</span></code> signal.</p>
<ol>
<li><p>To view the specific signals controlling the PL kernel, run the following.</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span>tcl<span class="o">/</span>pl_to_aie.tcl
</pre></div>
</div>
</li>
<li><p>Expand the <strong>CIPS</strong> group down to the <strong>Row 0</strong>. Zoom into a specific region. In the following screenshot the red area is the zoom region.</p>
<p><img alt="Zoom region" src="../../../../_images/pl_to_aie_zoom_region.png" /></p>
<p>After the zoom in, you should see something similar to the following.</p>
<p><img alt="Zoomed in" src="../../../../_images/pl_to_aie_zoomed_in.png" /></p>
<p>Here you can see the PS is using the Full Power Domain (FPD) interface to send the AXI signal to turn on. Notice that there are two blocks shown. This is the PS telling the <code class="docutils literal notranslate"><span class="pre">random_noise</span></code> and <code class="docutils literal notranslate"><span class="pre">s2mm</span></code> kernels to start running.</p>
<p>If you zoom in more, you can see more specifics of the transactions.</p>
<p><img alt="Zoomed in 2x" src="../../../../_images/pl_to_aie_zoom_2x.png" /></p>
<p>Notice that the <code class="docutils literal notranslate"><span class="pre">s_axi_control</span></code> has a read transaction slightly after the second transaction has started of the <em><strong>FPD</strong></em> interface.</p>
</li>
<li><p>Expand the <strong>xilinx_vck190_base_CIPS_0_0_M_AXI_FPD_tlm</strong> interface and the <strong>Outstanding Reads</strong> and you will see a <strong>Row 0</strong>. If you move the mouse over the <strong>#3</strong> or <strong>#4</strong> a context help menu shows you some signal information on where data is being transfered. Notice the <code class="docutils literal notranslate"><span class="pre">ARADDR</span></code> value of <code class="docutils literal notranslate"><span class="pre">0xa4060000</span></code> for <strong>#3</strong> and <code class="docutils literal notranslate"><span class="pre">0xa4050000</span></code> for <strong>#4</strong>, and understand that this is the address to the PL kernels that the Vitis linker auto-assigns it during linking. From the host code, you can determine that these kernels are activated before the AI Engine, soon after the application starts, so it is safe to say these signals are used to start them. Do remember that these kernels are simpler than others; more complex kernels will result in different transactions.</p></li>
<li><p>Zoom to fit by clicking the <strong>Zoom Fit</strong> button (<img alt="zoom fit" src="../../../../_images/zoom_to_fit.png" />). Expand the <em><strong>NOISE</strong></em> group and expand <em><strong>Out_r</strong></em>.</p>
<p><img alt="Random Noise" src="../../../../_images/pl_noise.png" /></p>
</li>
<li><p>Notice after the <code class="docutils literal notranslate"><span class="pre">random_noise</span></code> kernel starts, you see the large green-line. This is a series of many transactions of the PL kernel transferring data to the AI Engine. There are a few red sections in the waveform. This is a link stall, or where the kernel has been stalled and is caused by the AI Engine.</p></li>
<li><p>Zoom to fit by clicking the <strong>Zoom Fit</strong> button.</p></li>
</ol>
</div>
<div class="section" id="ai-engine-rtp-signals">
<h5>AI Engine RTP Signals<a class="headerlink" href="#ai-engine-rtp-signals" title="Permalink to this heading">¶</a></h5>
<p>As mentioned in the <strong>Overview</strong> this design is sending RTP values to the AI Engine through the <code class="docutils literal notranslate"><span class="pre">graph.update()</span></code> host application. From the host code, you can see that there are two updates being done, both with an array size of 12. Because these only apply to the AI Engine kernel, these will write signals to the <code class="docutils literal notranslate"><span class="pre">AIENGINE/S00_AXI</span></code> interface. However, there are other signals that show the same values because these are the interfaces the data traverses to the destination.</p>
<ol>
<li><p>Run the following Tcl script to see only the AI Engine signal.</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span>tcl<span class="o">/</span>rtp_signals.tcl
</pre></div>
</div>
</li>
<li><p>Expand the <strong>AIENGINE</strong> group, <strong>xilinx_vck190_base_ai_engine_0_0_S00_AXI</strong> interface, and expand the <strong>Outstanding Writes</strong>. You will see some write transactions; go to the second visible instance shown in the following.</p>
<p><img alt="RTP zoom loc" src="../../../../_images/rtp_zoom_loc.png" /></p>
</li>
<li><p>Zoom into the transaction of writes until you can see something similar to the following screenshot.</p>
<p><img alt="RTP Signals" src="../../../../_images/rtp_signals.png" /></p>
<p><strong>NOTE</strong>: Depending on the time the host application runs you will not see the exact same times.</p>
<p>Here you can see that there are 12 writes that are being sent to the AI Engine which are the RTP coefficients that are to be updated in the design.</p>
<p>Expand <strong>Row 0</strong> and hover the mouse over <strong>#262</strong> where it says <strong>Data</strong> and you will see a pop-up as shown in the following.</p>
<p><img alt="RTP One" src="../../../../_images/rtp_data.png" /></p>
<p>You can see that there is data presented here. It is in the radix of hexidecimal, and reads <code class="docutils literal notranslate"><span class="pre">0xB4</span></code>. Converting this to decimal is <code class="docutils literal notranslate"><span class="pre">180</span></code>, which is the first coefficent in the area for updates.</p>
<p><strong>TIP</strong>: There are two RTP updates occurring. If you follow the same write signal, you will find the write transactions for the second update.</p>
</li>
<li><p>Click the <strong>Zoom to Fit</strong> button.</p></li>
</ol>
</div>
<div class="section" id="ai-engine-to-pl-to-ddr-memory">
<h5>AI Engine to PL to DDR Memory<a class="headerlink" href="#ai-engine-to-pl-to-ddr-memory" title="Permalink to this heading">¶</a></h5>
<p>After the RTP update has been sent, you can start to see output data being written to DDR memory. In this design, the AI Engine is sending data from the <code class="docutils literal notranslate"><span class="pre">S00_AXIS</span></code> interface and getting it to the <code class="docutils literal notranslate"><span class="pre">s2mm</span></code> kernel. This kernel is a FIFO written in HLS and is used to write the output to DDR memory.</p>
<ol>
<li><p>To view these signals run the following.</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span>tcl<span class="o">/</span>aie_to_ddr.tcl
</pre></div>
</div>
<p>You should see something similar to the following.</p>
<p><img alt="AIE to DDR" src="../../../../_images/aie_to_ddr.png" /></p>
<p>As you can see, the transactions in green are slightly ahead of the tan. This means those signals are going first. The data path is the AI Engine kernel, to the interface tile, then to the <strong>AIENGINE/M00_AXIS</strong> interface. Notice how <strong>AIENGINE/M00_AXIS</strong> and <strong>S2MM/s</strong> interfaces are matched, meaning they are connected together. The same applies to the <strong>S2MM/m_axi_gmem</strong> and the <strong>DDR4/S00_AXI</strong> interfaces on the <strong>noc_ddr4</strong> IP.</p>
<p>After the data is stored into DDR memory, the host application can then access it.</p>
</li>
<li><p>Expand the <strong>CIPS_NOC</strong> group. Notice that the last transactions on the <strong>cips_noc_0_M00_AXI_tlm</strong> and the <strong>cips_noc_0_S00_AXI_tlm</strong> interfaces as following. This is the host application reading the data that was stored by the <code class="docutils literal notranslate"><span class="pre">s2mm</span></code> kernel.</p>
<p><img alt="DDR to PS" src="../../../../_images/ddr_to_ps.png" /></p>
<p>Zoom in and you should see the following.</p>
<p><img alt="DDR to PS zoom in" src="../../../../_images/ddr_to_ps_zoom_in.png" /></p>
</li>
<li><p>When emulation is finished, close the XSIM GUI, which closes the QEMU and the emulation. Discard the waveform at the pop-up prompt.</p></li>
<li><p>Navigate back to the terminal that launched emulation.</p></li>
</ol>
</div>
<div class="section" id="limitations">
<h5>Limitations<a class="headerlink" href="#limitations" title="Permalink to this heading">¶</a></h5>
<p>Note the following limitations of the waveform viewer.</p>
<ul class="simple">
<li><p>Signals internal to the AI Engine can be viewed using VCD. They are not integrated in the general XSIM Waveform GUI.</p></li>
<li><p>CIPS (QEMU model) which executes the software program is purely a functional model with no timing accuracy. The NoC, DDR memory, and AI Engine are cycle-approximate models.</p></li>
<li><p>Bandwidth and latency estimation are approximate, based on the accuracy of the individual IP models.</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="step-4-using-vitis-analyzer">
<h3>Step 4: Using Vitis Analyzer<a class="headerlink" href="#step-4-using-vitis-analyzer" title="Permalink to this heading">¶</a></h3>
<p>After emulation is complete, you can look at the profiling and VCD trace data that was also generated at the same time. Note that if profiling and VCD signal features are not used, emulation runs faster.</p>
<p>Using the XSIM Waveform GUI to view waveforms is powerful in allowing you to see the data path and flow of the design, as well as debug potential issues like a hang. However, this will only show the programmable logic side of the system. To investigate the AI Engine signals, you need to use the VCD trace in the Vitis analyzer. To use the Vitis analyzer, open up a <code class="docutils literal notranslate"><span class="pre">.aierun_summary</span></code> file.</p>
<ol>
<li><p>Open the run summary of the design by running the following command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>vitis_analyzer sw/sim/behav_waveform/xsim/default.aierun_summary <span class="p">&amp;</span>
</pre></div>
</div>
<p>When the summary is open, you should see something similar to the following.</p>
<p><img alt="Vitis Analyzer Summary" src="../../../../_images/vitis_analyzer_summary1.png" /></p>
</li>
<li><p>Here you can see various reports: <strong>Summary</strong>, <strong>Trace</strong>, <strong>Profile</strong>, <strong>Graph</strong>, <strong>Array</strong>. Click on <strong>Trace</strong> to open up the VCD data that was collected during hardware emulation.</p>
<p><img alt="Vitis Analyzer Trace" src="../../../../_images/vitis_analyzer_trace.png" /></p>
<p>Here you can see the inner traces of the graph through a tile hierarchy. Selecting a net, tile, function, or any object in this view will cross-select to various views. This can help with identifying specific nets and functions.</p>
</li>
<li><p>Open the <strong>Graph</strong> view and click on the <strong>Buffers</strong> tab.</p></li>
<li><p>To find the RTP buffers, click on the search button (<img alt="search" src="../../../../_images/search.png" />) and type in <code class="docutils literal notranslate"><span class="pre">coeffs</span></code>.</p>
<p>You should see a window like the following.</p>
<p><img alt="rtp search" src="../../../../_images/graph_buffers.png" /></p>
</li>
<li><p>Select the three <code class="docutils literal notranslate"><span class="pre">coeffs</span></code> buffers, and click the <strong>Trace</strong> view again, and see that the lock signals are highlighted.</p>
<p><img alt="Selected RTP" src="../../../../_images/selected_rtp.png" /></p>
</li>
<li><p>If you scroll up you can see that the FIR filter kernel begins to process data soon after the RTP is read.</p>
<p><img alt="Vitis Analyzer FIR" src="../../../../_images/fir_filter.png" /></p>
</li>
<li><p>Open up the <strong>Profile</strong> report and see specific information about the kernel and the tile it is placed in.</p>
<p><img alt="Vitis Analyzer Profile" src="../../../../_images/vitis_analyzer_profile1.png" /></p>
</li>
<li><p>Click on <strong>Total Function Time</strong> and see the following:</p>
<p><img alt="Total Function Time" src="../../../../_images/profile_total_time.png" /></p>
<p>This information is useful because it helps determine how long the kernel runs and can be used with the <strong>Trace</strong> to help determine if kernels are running optimally, or if there are stalls.</p>
</li>
<li><p>Close the Vitis analyzer.</p></li>
</ol>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>In this tutorial you have learned:</p>
<ul class="simple">
<li><p>To read the waveform viewer to follow data flow pathing for a simple Versal design.</p></li>
<li><p>To add/remove signals to the XSIM viewer to look at specific signals such as, NoC, DDR memory, PS, AI Engine.</p></li>
<li><p>View TLM signals and how they interact with the AI Engine and Versal blocks.</p></li>
<li><p>Open and view Trace and Profile info in Vitis Analyzer.</p></li>
</ul>
<p>Licensed under the Apache License, Version 2.0 (the “License”);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">apache</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">licenses</span><span class="o">/</span><span class="n">LICENSE</span><span class="o">-</span><span class="mf">2.0</span>
</pre></div>
</div>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
<p align="center"><sup>XD067 | &copy; Copyright 2021 Xilinx, Inc.</sup></p></div>
</div>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../10-aie-dsp-lib-model-composer/README.html" class="btn btn-neutral float-left" title="Designing with the AI Engine DSPLib and Vitis Model Composer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../12-axis-traffic-generator/README.html" class="btn btn-neutral float-right" title="AXIS External Traffic Generator Feature Tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2022, Xilinx, Inc..
      <span class="lastupdated">Last updated on May 16, 2022.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>