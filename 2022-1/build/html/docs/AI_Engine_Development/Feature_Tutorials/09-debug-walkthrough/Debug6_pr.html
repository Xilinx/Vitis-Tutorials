


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

	<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="37701bd4-e5c0-4ee3-9329-e7475d0b13a7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
		<!-- Google Tag Manager -->
	<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
	<!-- End Google Tag Manager -->
	
        <!-- Google Tag Manager -->
        <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
        <!-- End Google Tag Manager -->	

  
  
  
  

  
      <script type="text/javascript" src="../../../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../../../_static/js/Searchbox.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/header-footer.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/pro.min.css" media="all" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
 <div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">

    
    

    



<div class="xf-content-height">
    

<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
    
    <div class="header parbase aem-GridColumn aem-GridColumn--default--12"><noindex>
	<header data-component="header" class="site-header">
		<nav class="navbar navbar-default">
			<div class="container-fluid main-nav">
				<div class="row">
					<div class="navbar-column col-xs-4 col-sm-5">
						<ul class="nav navbar-nav hidden-xs">
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
								</li>
							</ul>
							
						<ul class="nav navbar-nav hidden-sm hidden-md hidden-lg">
							<li>
									<button data-target="#header-container-0" data-function="toggle">Solutions</button>
								</li>
							<li>
									<button data-target="#header-container-1" data-function="toggle">Products</button>
								</li>
							<li>
									<button data-target="#header-container-2" data-function="toggle">Company</button>
								</li>
							</ul>
							
						<div id="header-container-0" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-1" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-2" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							</div>
					<div class="logo-column col-xs-4 col-sm-2">
						<div class="logo">
							<a target="_blank" href="https://www.xilinx.com/">
								<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
							</a>
						</div>
					</div>

				</div>
			</div>
			</nav></header></noindex></div>
		
	
</div>

    
</div>
</div>

<div class="calloutBanner parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><div class="callout-banner">
    Xilinx is now a part of <a target="_blank" href="https://www.amd.com/en/corporate/xilinx-acquisition">AMD</a> |  <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Learn More</a>
</div>
</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home" alt="Documentation Home"> Vitis™ Tutorials
          

          
          </a>

          
            
            
              <div class="version">
                2022.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">日本語版</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/master/docs-jp/index.html">Main</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AI Engine</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../AI_Engine_Development.html">AI Engine Development</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../../../_sources/docs/AI_Engine_Development/Feature_Tutorials/09-debug-walkthrough/Debug6_pr.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Vitis™ Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/docs/AI_Engine_Development/Feature_Tutorials/09-debug-walkthrough/Debug6_pr.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <table>
 <tr>
   <td align="center"><img src="https://raw.githubusercontent.com/Xilinx/Image-Collateral/main/xilinx-logo.png" width="30%"/><h1>AI Engine Debug Walkthrough Tutorial - From Simulation to Hardware</h1>
   </td>
 </tr>
 <tr>
 <td align="center"><h1>AI Engine Debug with Hardware Profiling Features</h1>
 </td>
 </tr>
</table><div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h1>
<p>In this tutorial you will learn how to:</p>
<ul class="simple">
<li><p>Use hardware profiling features to inspect design.</p></li>
</ul>
</div>
<div class="section" id="hardware-profiling-features">
<h1>Hardware Profiling Features<a class="headerlink" href="#hardware-profiling-features" title="Permalink to this heading">¶</a></h1>
<p>Two flows, XSDB and XRT flow, are supported profiling features with AIE design. The profiling feature requires no design source code change to collect profiling data. No special options required to build the design. You can use <a class="reference external" href="#XRT-Flow">XRT Flow</a> or <a class="reference external" href="#XSDB-Flow">XSDB Flow</a> for this tutorial.</p>
<div class="section" id="xrt-flow">
<h2>XRT Flow<a class="headerlink" href="#xrt-flow" title="Permalink to this heading">¶</a></h2>
</div>
<div class="section" id="step-1-1-prepare-the-boot-image-and-boot-the-board">
<h2>Step 1.1 Prepare the boot image and boot the board<a class="headerlink" href="#step-1-1-prepare-the-boot-image-and-boot-the-board" title="Permalink to this heading">¶</a></h2>
<p>After the design is built correctly without error, we are ready to run on the hardware board.</p>
<ul class="simple">
<li><p>Flash the SD card with the built sd_card.img.</p></li>
<li><p>Plug the flashed SD card into the SD card slot of the vck190 board.</p></li>
<li><p>Connect the USB type C cable to the board and computer that supports serial port connection.</p></li>
<li><p>Set the serial port configuration with Speed=115200, Data=8 bit, Parity=none, Stop bits=1 bit and flow control=none.</p></li>
<li><p>Power up the vck190 board to see boot messages from serial connection.</p></li>
</ul>
</div>
<div class="section" id="step-1-2-generate-profiling-data">
<h2>Step 1.2 Generate Profiling data<a class="headerlink" href="#step-1-2-generate-profiling-data" title="Permalink to this heading">¶</a></h2>
<p>Create an <code class="docutils literal notranslate"><span class="pre">xrt.ini</span></code> file on SD card using the following lines.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>Debug<span class="o">]</span>
<span class="nv">aie_profile</span> <span class="o">=</span> <span class="nb">true</span>
<span class="nv">aie_profile_interval_us</span> <span class="o">=</span> <span class="m">1000</span>
<span class="nv">aie_profile_core_metrics</span> <span class="o">=</span> heat_map
<span class="nv">aie_profile_memory_metrics</span> <span class="o">=</span> conflicts
<span class="nv">aie_profile_interface_metrics</span> <span class="o">=</span> input_bandwidths:0
</pre></div>
</div>
<p>Supported predefined metrics can be found from UG1076, Profiling the AI Engine in Hardware section (https://docs.xilinx.com/r/en-US/ug1076-ai-engine-environment/Profiling-the-AI-Engine-in-Hardware).</p>
<!--
Available predefined metrics:
1. Supported aie_profile_core_metrics: heap_map, stalls, execution, floating_point, stream_put_get, aie_trace, write_bandwidth, and read_bandwidth.
2. Supported aie_profile_memory_metrics: conflicts, dma_locks, dma_stalls_s2mm, dma_stalls_mm2s, write_bandwidths and read_bandwidths.
3. aie_profile_interface_metrics: input_bandwidths, output_bandwidths, input_stalls_idle and output_stalls_idle.
--></div>
<div class="section" id="step-1-3-to-run-application-after-petalinux-boots-up-on-board">
<h2>Step 1.3 to Run Application after Petalinux Boots up on Board<a class="headerlink" href="#step-1-3-to-run-application-after-petalinux-boots-up-on-board" title="Permalink to this heading">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /run/media/mmcblk0p1
./host.exe a.xclbin
</pre></div>
</div>
</div>
<div class="section" id="step-1-4-collect-profiling-files">
<h2>Step 1.4 Collect Profiling Files<a class="headerlink" href="#step-1-4-collect-profiling-files" title="Permalink to this heading">¶</a></h2>
<p>After the design run completes on the hardware, the generated profiling files and run_summary files need to be collected and ready to be examined.</p>
<div class="section" id="step-1-4-1">
<h3>Step 1.4.1<a class="headerlink" href="#step-1-4-1" title="Permalink to this heading">¶</a></h3>
<p>Make sure <code class="docutils literal notranslate"><span class="pre">aie_profile_edge_[core_metrics]_[memory_metrics]_[interface_metrics].csv</span></code>, <code class="docutils literal notranslate"><span class="pre">summary.csv</span></code> and <code class="docutils literal notranslate"><span class="pre">xrt.run_summary</span></code> files are created on the SD card.</p>
</div>
<div class="section" id="step-1-4-2">
<h3>Step 1.4.2<a class="headerlink" href="#step-1-4-2" title="Permalink to this heading">¶</a></h3>
<p>Power off the board and take out the sd_card from board and plug in the sd card to host’s sd card reader.</p>
</div>
<div class="section" id="step-1-4-3">
<h3>Step 1.4.3<a class="headerlink" href="#step-1-4-3" title="Permalink to this heading">¶</a></h3>
<p>Copy <code class="docutils literal notranslate"><span class="pre">aie_profile_edge_[core_metrics]_[memory_metrics]_[interface_metrics].csv</span></code>, <code class="docutils literal notranslate"><span class="pre">summary.csv</span></code> and <code class="docutils literal notranslate"><span class="pre">xrt.run_summary</span></code> files from SD card back to where the design is.</p>
</div>
</div>
<div class="section" id="step-1-5-launch-vitis-analyzer-to-examine-profiling-files">
<h2>Step 1.5 Launch Vitis Analyzer to Examine Profiling Files<a class="headerlink" href="#step-1-5-launch-vitis-analyzer-to-examine-profiling-files" title="Permalink to this heading">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>vitis_analyzer xrt.run.summary
</pre></div>
</div>
<p>After issuing above command, expect to see result from <a class="reference external" href="#Step-3-Expected-Result-with-Vitis_Analyzer">Step 3 Expected Result with Vitis_Analyzer</a> and continue this tutorial.</p>
</div>
<div class="section" id="xsdb-flow">
<h2>XSDB Flow<a class="headerlink" href="#xsdb-flow" title="Permalink to this heading">¶</a></h2>
</div>
<div class="section" id="step-2-1-prepare-the-boot-image-and-boot-the-board">
<h2>Step 2.1 Prepare the boot image and boot the board<a class="headerlink" href="#step-2-1-prepare-the-boot-image-and-boot-the-board" title="Permalink to this heading">¶</a></h2>
<p>Same as step 1.1 of XRT flow.</p>
</div>
<div class="section" id="step-2-2-generate-profiling-data">
<h2>Step 2.2 Generate Profiling data<a class="headerlink" href="#step-2-2-generate-profiling-data" title="Permalink to this heading">¶</a></h2>
<div class="section" id="step-2-2-1-target-connection-setup">
<h3>Step 2.2.1 Target Connection Setup<a class="headerlink" href="#step-2-2-1-target-connection-setup" title="Permalink to this heading">¶</a></h3>
<div class="section" id="run-hardware-server-from-computer-that-connects-to-target-board">
<h4>Run hardware server from computer that connects to target board<a class="headerlink" href="#run-hardware-server-from-computer-that-connects-to-target-board" title="Permalink to this heading">¶</a></h4>
<p>Launch hw_server from the computer that has JTAG connection to the VCK190 board.
<img src="images/hw_ta_hw.png" width="600"></p>
</div>
</div>
<div class="section" id="step-2-2-2-connect-xsdb-to-board">
<h3>Step 2.2.2 Connect XSDB to Board<a class="headerlink" href="#step-2-2-2-connect-xsdb-to-board" title="Permalink to this heading">¶</a></h3>
<p>Launch xsdb from your host computer at the same level of the design’s Work directory:
Issue this commands from XSDB prompt,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>xsdb
%xsdb connect -url TCP:<span class="si">${</span><span class="nv">COMPUTER</span><span class="p"> NAME/IP</span><span class="si">}</span>:3121
%xsdb ta
%xsdb ta <span class="m">1</span>
%xsdb <span class="nb">source</span> <span class="si">${</span><span class="nv">XILINX_VITIS</span><span class="p">)/scripts/vitis/util/aie_profile.tcl</span>
<span class="p">%xsdb aieprofile start -graphs dut -work-dir ./Work -core-metrics heat_map -memory-metrics conflicts -interface-metrics input_bandwidths:</span><span class="nv">0</span><span class="p"> -interval 20 -samples 100</span>
</pre></div>
</div>
<p>note:</p>
<ol class="simple">
<li><p>-graph: The graph profile data to be captured.</p></li>
<li><p>-core-metrics: The core metrics to be captured.</p></li>
<li><p>-memory-metrics: The memory metrics to be captured.</p></li>
<li><p>-interface-metrics: The interface metrics to be captured.</p></li>
<li><p>-interval: The sample interval in milliseconds (default 20).</p></li>
<li><p>-samples: The number of counter samples (default 100).</p></li>
</ol>
<p><strong>IMPORTANT: After above command issued, wait until Count: 10, Count: 20, … is displayed from XSDB console. This indicates XSDB is ready to collect design profiling data.</strong></p>
</div>
</div>
<div class="section" id="step-2-3-to-run-application-after-petalinux-boots-up-on-board">
<h2>Step 2.3 to Run Application after Petalinux Boots up on Board<a class="headerlink" href="#step-2-3-to-run-application-after-petalinux-boots-up-on-board" title="Permalink to this heading">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /run/media/mmcblk0p1
./host.exe a.xclbin
</pre></div>
</div>
</div>
<div class="section" id="step-2-4-inspect-generated-files">
<h2>Step 2.4 Inspect generated Files<a class="headerlink" href="#step-2-4-inspect-generated-files" title="Permalink to this heading">¶</a></h2>
<p>After XSDB complete, expect to see <code class="docutils literal notranslate"><span class="pre">aie_profile.csv</span></code>, <code class="docutils literal notranslate"><span class="pre">summary.csv</span></code> and <code class="docutils literal notranslate"><span class="pre">aie_trace_profile.run_summary</span></code> files are created on the host computer at the location where XSDB is launched.</p>
</div>
<div class="section" id="step-2-5-launch-vitis-analyzer-to-examine-profiling-files">
<h2>Step 2.5 Launch Vitis Analyzer to Examine Profiling Files<a class="headerlink" href="#step-2-5-launch-vitis-analyzer-to-examine-profiling-files" title="Permalink to this heading">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>vitis_analyzer aie_trace_profile.run.summary
</pre></div>
</div>
<p>After issuing above command, expect to see result from <a class="reference external" href="#Step-3-Expected-Result-with-Vitis_Analyzer">Step 3 Expected Result with Vitis_Analyzer</a> and continue this tutorial.</p>
</div>
<div class="section" id="step-3-expected-result-with-vitis-analyzer">
<h2>Step 3 Expected Result with Vitis_Analyzer<a class="headerlink" href="#step-3-expected-result-with-vitis-analyzer" title="Permalink to this heading">¶</a></h2>
<p>Vitis_analyzer GUI is launched, select <code class="docutils literal notranslate"><span class="pre">Profile</span> <span class="pre">Summary</span></code> then <code class="docutils literal notranslate"><span class="pre">AI</span> <span class="pre">Engine</span> <span class="pre">&amp;</span> <span class="pre">Memory</span></code> or <code class="docutils literal notranslate"><span class="pre">Interface</span> <span class="pre">Channels</span></code>.
<img src="images/pr_hw_perf_va.png"></p>
</div>
<div class="section" id="step-4-open-multiple-profiling-runs-with-vitis-analyzer">
<h2>Step 4 Open Multiple Profiling Runs with Vitis_Analyzer<a class="headerlink" href="#step-4-open-multiple-profiling-runs-with-vitis-analyzer" title="Permalink to this heading">¶</a></h2>
<p>You can run the application as many times as you would like with your preferences. However, some of these metrics’ sets are interconnected because some use group events and others use individual events. For example, the heat_map metric set contains a metric that groups all kinds of stall events in a single metric along with other metrics that group data transfer events (load/store, streams, cascade, etc.) and vector instructions. To get a better view of which stall type(s) are prevalent, re-run with the stalls metric set. To better understand execution, re-run with the execution metric set.</p>
</div>
<div class="section" id="step-4-1-generate-first-profiling-data">
<h2>Step 4.1 Generate First Profiling Data<a class="headerlink" href="#step-4-1-generate-first-profiling-data" title="Permalink to this heading">¶</a></h2>
<p>Apply <code class="docutils literal notranslate"><span class="pre">heat_map</span></code> for <code class="docutils literal notranslate"><span class="pre">core-metrics</span></code>, <code class="docutils literal notranslate"><span class="pre">conflicts</span></code> for <code class="docutils literal notranslate"><span class="pre">memory-metrics</span></code>, and <code class="docutils literal notranslate"><span class="pre">input_bandwidths</span></code> for <code class="docutils literal notranslate"><span class="pre">interface-metrics</span></code> to collect first profiling data.
Follow step 1.1 to 1.4 if using XRT flow or follow step 2.1 to 2.4 if using XSDB flow. Save profiling data to a directory ex. <code class="docutils literal notranslate"><span class="pre">profile_0</span></code>.</p>
</div>
<div class="section" id="step-4-2-generate-second-profiling-data">
<h2>Step 4.2 Generate Second Profiling Data<a class="headerlink" href="#step-4-2-generate-second-profiling-data" title="Permalink to this heading">¶</a></h2>
<p>Apply <code class="docutils literal notranslate"><span class="pre">execution</span></code> for <code class="docutils literal notranslate"><span class="pre">core-metrics</span></code>, <code class="docutils literal notranslate"><span class="pre">dma_locks</span></code> for <code class="docutils literal notranslate"><span class="pre">memory-metrics</span></code>, and <code class="docutils literal notranslate"><span class="pre">output_bandwidths</span></code> for <code class="docutils literal notranslate"><span class="pre">interface-metrics</span></code> to collect second profiling data.
Follow step 1.1 to 1.4 if using XRT flow or follow step 2.1 to 2.4 if using XSDB flow. Save profiling data to a directory ex. <code class="docutils literal notranslate"><span class="pre">profile_1</span></code>.</p>
</div>
<div class="section" id="step-4-3-open-first-profiling-data">
<h2>Step 4.3 Open First Profiling Data<a class="headerlink" href="#step-4-3-open-first-profiling-data" title="Permalink to this heading">¶</a></h2>
<p>Follow step 1.5 for XRT flow or follow step 2.5 for XSDB flow to open first profiling run_summary file with vitis_analyzer.</p>
</div>
<div class="section" id="step-4-4-open-second-profiling-data">
<h2>Step 4.4 Open Second Profiling Data<a class="headerlink" href="#step-4-4-open-second-profiling-data" title="Permalink to this heading">¶</a></h2>
<p>Click on <code class="docutils literal notranslate"><span class="pre">+</span></code> from GUI, highlighted in red square to browse and select second profiling run_summary file. Two runs of profiling data are combined.
<img src="images/pr_hw_perf_va_1.png">
This example combines first run with <code class="docutils literal notranslate"><span class="pre">heat_map</span></code>, <code class="docutils literal notranslate"><span class="pre">conflicts</span></code>, and <code class="docutils literal notranslate"><span class="pre">input_bandwidths</span></code> metrics and second run with <code class="docutils literal notranslate"><span class="pre">execution</span></code>, <code class="docutils literal notranslate"><span class="pre">dma_locks</span></code> and <code class="docutils literal notranslate"><span class="pre">output_bandwidth</span></code> metrics.</p>
<p>Click on <code class="docutils literal notranslate"><span class="pre">%</span></code> to toggle between absolute and percentage values of collected design metrics.
<img src="images/pr_hw_perf_va_2.png"></p>
<p>Click on column header to sort the data within those rows. Click once to display selected row data in ascending order. Click twice to display selected row data in descending order. Click three times to disable sorting function.
<img src="images/pr_hw_perf_va_4.png"></p>
</div>
<div class="section" id="profiling-data-explanation">
<h2>Profiling Data Explanation<a class="headerlink" href="#profiling-data-explanation" title="Permalink to this heading">¶</a></h2>
<p>An easy way to know the definition of profile data category by moving mouse cursor to column title. For example, <code class="docutils literal notranslate"><span class="pre">Active</span> <span class="pre">Time</span> <span class="pre">(ms)</span></code> is “Amount of time (in ms) AI Engine was active when it was enabled.”</p>
<div class="section" id="ai-engine-core-profiling-data">
<h3>AI Engine core profiling data<a class="headerlink" href="#ai-engine-core-profiling-data" title="Permalink to this heading">¶</a></h3>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Active</span> <span class="pre">Time</span> <span class="pre">(ms)</span></code> = <code class="docutils literal notranslate"><span class="pre">Stall</span> <span class="pre">Time</span> <span class="pre">(ms)</span></code> + <code class="docutils literal notranslate"><span class="pre">Active</span> <span class="pre">Utilization</span> <span class="pre">Time</span> <span class="pre">(ms)</span></code>.</p></li>
<li><p>Take tile(6,0) as an example, tile(6,0) is active for a period of 1.401 milliseconds, where 1.333 milliseconds is stalled and 0.069 milliseconds is actively executing instructions. During 0.069 milliseconds active period, 0.061 milliseconds is executing vector instructions. There are 0.008 milliseconds spent on other instructions such as load/store instructions.</p></li>
<li><p>There are 76800 <code class="docutils literal notranslate"><span class="pre">Vector</span> <span class="pre">instructions</span></code>, 79303 <code class="docutils literal notranslate"><span class="pre">Load</span> <span class="pre">Instructions</span></code> and 1135 <code class="docutils literal notranslate"><span class="pre">Store</span> <span class="pre">Instructions</span></code> during <code class="docutils literal notranslate"><span class="pre">Active</span> <span class="pre">Utilization</span> <span class="pre">Time</span> <span class="pre">(ms)</span></code>.</p></li>
</ol>
</div>
<div class="section" id="ai-engine-memory-profiling-data">
<h3>AI Engine memory profiling data<a class="headerlink" href="#ai-engine-memory-profiling-data" title="Permalink to this heading">¶</a></h3>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Memory</span> <span class="pre">Conflict</span> <span class="pre">Time</span> <span class="pre">(ms)</span></code> indicates memory access conflicts time runing AI Engine execution. Recommend rerunning <code class="docutils literal notranslate"><span class="pre">aiesimulator</span></code> with <code class="docutils literal notranslate"><span class="pre">-enable-memory-check</span></code> option to check design memory access conflicts.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Cumulative</span> <span class="pre">Memory</span> <span class="pre">Errors</span> <span class="pre">Time</span> <span class="pre">(ms)</span></code> indicates time taken due to ECC errors in any of the data memory banks as well as MM2S and S2MM DMAs.</p></li>
</ol>
</div>
<div class="section" id="interface-profiling-data">
<h3>Interface profiling data<a class="headerlink" href="#interface-profiling-data" title="Permalink to this heading">¶</a></h3>
<p>Select <code class="docutils literal notranslate"><span class="pre">Profile</span> <span class="pre">Summary</span></code> then <code class="docutils literal notranslate"><span class="pre">Interface</span> <span class="pre">Channels</span></code>.
<img src="images/pr_hw_perf_va_3.png"></p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PLIO</span> <span class="pre">Bandwidth</span></code> displays the design ran with PLIO bandwidth in unit of MB/s. This info is a good indication the design is I/O bound or compute bound design and provides guidance to optimize design performance.</p></li>
</ol>
</div>
</div>
<div class="section" id="profiling-data-analysis">
<h2>Profiling Data Analysis<a class="headerlink" href="#profiling-data-analysis" title="Permalink to this heading">¶</a></h2>
<ol class="simple">
<li><p>From AI Engine core profiling data, tile(6,1), tile(6,3),… have much larger number of <code class="docutils literal notranslate"><span class="pre">Store</span> <span class="pre">Instructions</span></code>. An indication check tile source code if lowering number of <code class="docutils literal notranslate"><span class="pre">Store</span> <span class="pre">Instructions</span></code> can be done to improve performance.</p></li>
<li><p>From AI Engine Memory profiling data, tile(6,1), tile(9,0),… have non-zero <code class="docutils literal notranslate"><span class="pre">Memory</span> <span class="pre">Conflict</span> <span class="pre">Time</span></code> value. Suggest running AIE simulator to check for memory access violations and clear those violations if any.</p></li>
<li><p>From AI Engine Memory profiling data, tile(6,1), tile(6,3),… have longer <code class="docutils literal notranslate"><span class="pre">Cumulative</span> <span class="pre">DMA</span> <span class="pre">Lock</span> <span class="pre">Stalls</span> <span class="pre">Time</span></code>. This leads to check input/output PLIO area to see if PLIO frequency or PLIO width is implemented properly. Suggest using Integrated Logic Analyzer (ILA) to check PLIO input/output states during run time.</p></li>
<li><p>From AI Engine Interface profiling data, hardware profiling data shows design <code class="docutils literal notranslate"><span class="pre">PLIO</span> <span class="pre">Bandwidth</span></code>. Apply sorting function by click on <code class="docutils literal notranslate"><span class="pre">PLIO</span> <span class="pre">Bandwidth</span> <span class="pre">(MB/s)</span></code> to examine highest and lowest PLIO bandwidth. Highest is 289.741 MB/s vs. lowest 254.709 MB/s is over 13% difference. This difference suggests to check PLIO input/output implementation and use ILA checking PLIO input/output during run time.</p></li>
</ol>
</div>
</div>
<div class="section" id="support">
<h1>Support<a class="headerlink" href="#support" title="Permalink to this heading">¶</a></h1>
<p>GitHub issues will be used for tracking requests and bugs. For questions go to <a class="reference external" href="https://support.xilinx.com/">support.xilinx.com</a>.</p>
</div>
<div class="section" id="license">
<h1>License<a class="headerlink" href="#license" title="Permalink to this heading">¶</a></h1>
<p>Licensed under the Apache License, Version 2.0 (the “License”);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">apache</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">licenses</span><span class="o">/</span><span class="n">LICENSE</span><span class="o">-</span><span class="mf">2.0</span>
</pre></div>
</div>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
<p align="center"><sup>XD005 | &copy; Copyright 2021 Xilinx, Inc.</sup></p></div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on May 16, 2022.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
														
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<div class="lang-select dropup hidden-md hidden-lg">
		<button data-toggle="dropdown">
			<span class="fas fa-globe" aria-hidden="true"></span>
			<span>
				
					English
				</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a target="_blank" href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
																	<div class="lang-select dropup hidden-xs hidden-sm">
	<button data-toggle="dropdown">
		<span class="fas fa-globe" aria-hidden="true"></span>
		<span>
			
				English
			</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
															</div>
														</div>
														<div class="col-md-pull-5 col-lg-pull-5 col-md-5 col-lg-5">
															<span class="copyright">©2022 Advanced Micro Devices, Inc</span>
														</div>

													</div>
													                    <div class="movethisrowtoleft row">
                        <div class="col-xs-24">
                            <ul class="sub-menu">
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a></li>
								<li><a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a></li>
                                <li><a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></li>
                            </ul>
                        </div>
                    </div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
<div class="backToTop parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><noindex>
    <span data-component="backToTopButton" class="backToTopButton loaded">
        <ul>
            <li>
                <a href="https://www.author.xilinx.com/xx/rebrand/amd/en-amd-xilinx-header-footer.html#top" class="btn top">
                    <span class="fas fa-angle-up" aria-hidden="true"></span>
                </a>
            </li>
        </ul>
    </span>
</noindex></div>
			</div>
		</div>


		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>